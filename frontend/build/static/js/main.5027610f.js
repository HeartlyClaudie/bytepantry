/*! For license information please see main.5027610f.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),o=Symbol.for("react.element"),i=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:o,type:e,key:l,ref:u,props:i,_owner:s.current}}t.jsx=l,t.jsxs=l},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,g(b,y.prototype),b.isPureReactComponent=!0;var C=Array.isArray,k=Object.prototype.hasOwnProperty,S={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,r){var o,i={},a=null,s=null;if(null!=t)for(o in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)k.call(t,o)&&!T.hasOwnProperty(o)&&(i[o]=t[o]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(o in c=e.defaultProps)void 0===i[o]&&(i[o]=c[o]);return{$$typeof:n,type:e,key:a,ref:s,props:i,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function _(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c=!1;if(null===e)c=!0;else switch(s){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return a=a(c=e),e=""===i?"."+_(c,0):i,C(a)?(o="",null!=e&&(o=e.replace(A,"$&/")+"/"),R(a,t,o,"",(function(e){return e}))):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,o+(!a.key||c&&c.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+e)),t.push(a)),1;if(c=0,i=""===i?".":i+":",C(e))for(var l=0;l<e.length;l++){var u=i+_(s=e[l],l);c+=R(s,t,o,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(s=e.next()).done;)c+=R(s=s.value,t,o,u=i+_(s,l++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function P(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",(function(e){return t.call(n,e,o++)})),r}function O(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var x={current:null},M={transition:null},N={ReactCurrentDispatcher:x,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=L,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var o=g({},e.props),i=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=S.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)k.call(t,l)&&!T.hasOwnProperty(l)&&(o[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}return{$$typeof:n,type:e.type,key:i,ref:a,props:o,_owner:s}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:O}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return x.current.useCallback(e,t)},t.useContext=function(e){return x.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return x.current.useDeferredValue(e)},t.useEffect=function(e,t){return x.current.useEffect(e,t)},t.useId=function(){return x.current.useId()},t.useImperativeHandle=function(e,t,n){return x.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return x.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return x.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return x.current.useMemo(e,t)},t.useReducer=function(e,t,n){return x.current.useReducer(e,t,n)},t.useRef=function(e){return x.current.useRef(e)},t.useState=function(e){return x.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return x.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return x.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function C(e){if(m=!1,b(e),!g)if(null!==r(l))g=!0,M(k);else{var t=r(u);null!==t&&N(C,t.startTime-e)}}function k(e,n){g=!1,m&&(m=!1,v(E),E=-1),p=!0;var i=f;try{for(b(n),h=r(l);null!==h&&(!(h.expirationTime>n)||e&&!R());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var s=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?h.callback=s:h===r(l)&&o(l),b(n)}else o(l);h=r(l)}if(null!==h)var c=!0;else{var d=r(u);null!==d&&N(C,d.startTime-n),c=!1}return c}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,T=!1,I=null,E=-1,A=5,_=-1;function R(){return!(t.unstable_now()-_<A)}function P(){if(null!==I){var e=t.unstable_now();_=e;var n=!0;try{n=I(!0,e)}finally{n?S():(T=!1,I=null)}}else T=!1}if("function"===typeof w)S=function(){w(P)};else if("undefined"!==typeof MessageChannel){var O=new MessageChannel,x=O.port2;O.port1.onmessage=P,S=function(){x.postMessage(null)}}else S=function(){y(P,0)};function M(e){I=e,T||(T=!0,S())}function N(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(k))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(m?(v(E),E=-1):m=!0,N(C,i-a))):(e.sortIndex=s,n(l,e),g||p||(g=!0,M(k))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},358:(e,t)=>{const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,o=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function c(e,t,n){do{const n=e.charCodeAt(t);if(32!==n&&9!==n)return t}while(++t<n);return n}function l(e,t,n){for(;t>n;){const n=e.charCodeAt(--t);if(32!==n&&9!==n)return t+1}return n}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),o=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var o=m.hasOwnProperty(t)?m[t]:null;(null!==o?0!==o.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,o,r)&&(n=null),r||null===o?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=null===n?3!==o.type&&"":n:(t=o.attributeName,r=o.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(o=o.type)||4===o&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C=Symbol.for("react.element"),k=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var q,U=Object.assign;function F(e){if(void 0===q)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q=t&&t[1]||""}return"\n"+q+e}var H=!1;function D(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var o=l.stack.split("\n"),i=r.stack.split("\n"),a=o.length-1,s=i.length-1;1<=a&&0<=s&&o[a]!==i[s];)s--;for(;1<=a&&0<=s;a--,s--)if(o[a]!==i[s]){if(1!==a||1!==s)do{if(a--,0>--s||o[a]!==i[s]){var c="\n"+o[a].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function B(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=D(e.type,!1);case 11:return e=D(e.type.render,!1);case 1:return e=D(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case k:return"Portal";case I:return"Profiler";case T:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case _:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case O:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function j(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var o=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function V(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=j(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Y(e,t);var n=j(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,j(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&V(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+j(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:j(n)}}function ie(e,t){var n=j(t.value),r=j(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),o=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function Ce(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var ke=null,Se=null,Te=null;function Ie(e){if(e=bo(e)){if("function"!==typeof ke)throw Error(i(280));var t=e.stateNode;t&&(t=ko(t),ke(e.stateNode,e.type,t))}}function Ee(e){Se?Te?Te.push(e):Te=[e]:Se=e}function Ae(){if(Se){var e=Se,t=Te;if(Te=Se=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function _e(e,t){return e(t)}function Re(){}var Pe=!1;function Oe(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return _e(e,t,n)}finally{Pe=!1,(null!==Se||null!==Te)&&(Re(),Ae())}}function xe(e,t){var n=e.stateNode;if(null===n)return null;var r=ko(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Me=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Me=!1}function Le(e,t,n,r,o,i,a,s,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var qe=!1,Ue=null,Fe=!1,He=null,De={onError:function(e){qe=!0,Ue=e}};function Be(e,t,n,r,o,i,a,s,c){qe=!1,Ue=null,Le.apply(De,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function je(e){if(ze(e)!==e)throw Error(i(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var a=o.alternate;if(null===a){if(null!==(r=o.return)){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return je(o),e;if(a===r)return je(o),t;a=a.sibling}throw Error(i(188))}if(n.return!==r.return)n=o,r=a;else{for(var s=!1,c=o.child;c;){if(c===n){s=!0,n=o,r=a;break}if(c===r){s=!0,r=o,n=a;break}c=c.sibling}if(!s){for(c=a.child;c;){if(c===n){s=!0,n=a,r=o;break}if(c===r){s=!0,r=a,n=o;break}c=c.sibling}if(!s)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=o.unstable_scheduleCallback,Ve=o.unstable_cancelCallback,Ge=o.unstable_shouldYield,Je=o.unstable_requestPaint,Ye=o.unstable_now,Xe=o.unstable_getCurrentPriorityLevel,Ze=o.unstable_ImmediatePriority,et=o.unstable_UserBlockingPriority,tt=o.unstable_NormalPriority,nt=o.unstable_LowPriority,rt=o.unstable_IdlePriority,ot=null,it=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/ct|0)|0},st=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,o=e.suspendedLanes,i=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~o;0!==s?r=dt(s):0!==(i&=a)&&(r=dt(i))}else 0!==(a=n&~o)?r=dt(a):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&o)&&((o=r&-r)>=(i=t&-t)||16===o&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)o=1<<(n=31-at(t)),r|=e[n],t&=~o;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ct,kt,St,Tt,It,Et=!1,At=[],_t=null,Rt=null,Pt=null,Ot=new Map,xt=new Map,Mt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":_t=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Ot.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xt.delete(t.pointerId)}}function qt(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=bo(t))&&kt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Ut(e){var t=wo(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void It(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bo(n))&&kt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ht(e,t,n){Ft(e)&&n.delete(t)}function Dt(){Et=!1,null!==_t&&Ft(_t)&&(_t=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Ot.forEach(Ht),xt.forEach(Ht)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Dt)))}function zt(e){function t(t){return Bt(t,e)}if(0<At.length){Bt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==_t&&Bt(_t,e),null!==Rt&&Bt(Rt,e),null!==Pt&&Bt(Pt,e),Ot.forEach(t),xt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Mt.shift()}var $t=b.ReactCurrentBatchConfig,jt=!0;function Kt(e,t,n,r){var o=wt,i=$t.transition;$t.transition=null;try{wt=1,Qt(e,t,n,r)}finally{wt=o,$t.transition=i}}function Wt(e,t,n,r){var o=wt,i=$t.transition;$t.transition=null;try{wt=4,Qt(e,t,n,r)}finally{wt=o,$t.transition=i}}function Qt(e,t,n,r){if(jt){var o=Gt(e,t,n,r);if(null===o)jr(e,t,r,Vt,n),Lt(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return _t=qt(_t,e,t,n,r,o),!0;case"dragenter":return Rt=qt(Rt,e,t,n,r,o),!0;case"mouseover":return Pt=qt(Pt,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ot.set(i,qt(Ot.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,xt.set(i,qt(xt.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==o;){var i=bo(o);if(null!==i&&Ct(i),null===(i=Gt(e,t,n,r))&&jr(e,t,r,Vt,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else jr(e,t,r,null,n)}}var Vt=null;function Gt(e,t,n,r){if(Vt=null,null!==(e=wo(e=Ce(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Vt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Yt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,o="value"in Yt?Yt.value:Yt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Zt=o.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(ln),dn=U({},ln,{view:0,detail:0}),hn=on(dn),fn=U({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(an=e.screenX-cn.screenX,sn=e.screenY-cn.screenY):sn=an=0,cn=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),gn=on(U({},fn,{dataTransfer:0})),mn=on(U({},dn,{relatedTarget:0})),yn=on(U({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=U({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=on(vn),bn=on(U({},ln,{data:0})),Cn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function In(){return Tn}var En=U({},dn,{key:function(e){if(e.key){var t=Cn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=on(En),_n=on(U({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(U({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=on(U({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),On=U({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xn=on(On),Mn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var qn=u&&"TextEvent"in window&&!Ln,Un=u&&(!Nn||Ln&&8<Ln&&11>=Ln),Fn=String.fromCharCode(32),Hn=!1;function Dn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Vn(e){Fr(e,0)}function Gn(e){if(Q(Co(e)))return e}function Jn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Yn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Gn(Qn)){var t=[];Kn(t,Qn,e,Ce(e)),Oe(Vn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Qn)}function ir(e,t){if("click"===e)return Gn(t)}function ar(e,t){if("input"===e||"change"===e)return Gn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!d.call(t,o)||!sr(e[o],t[o]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=V();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=V((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var o=n.textContent.length,i=Math.min(r.start,o);r=void 0===r.end?i:Math.min(r.end,o),!e.extend&&i>r&&(o=r,r=i,i=o),o=ur(n,i);var a=ur(n,r);o&&a&&(1!==e.rangeCount||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(o.node,o.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==mr||mr!==V(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function Cr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var kr={animationend:Cr("Animation","AnimationEnd"),animationiteration:Cr("Animation","AnimationIteration"),animationstart:Cr("Animation","AnimationStart"),transitionend:Cr("Transition","TransitionEnd")},Sr={},Tr={};function Ir(e){if(Sr[e])return Sr[e];if(!kr[e])return e;var t,n=kr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Sr[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);var Er=Ir("animationend"),Ar=Ir("animationiteration"),_r=Ir("animationstart"),Rr=Ir("transitionend"),Pr=new Map,Or="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(e,t){Pr.set(e,t),c(t,[e])}for(var Mr=0;Mr<Or.length;Mr++){var Nr=Or[Mr];xr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}xr(Er,"onAnimationEnd"),xr(Ar,"onAnimationIteration"),xr(_r,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(Rr,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,o,a,s,c,l){if(Be.apply(this,arguments),qe){if(!qe)throw Error(i(198));var u=Ue;qe=!1,Ue=null,Fe||(Fe=!0,He=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;Ur(o,s,l),i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;Ur(o,s,l),i=c}}}if(Fe)throw e=He,Fe=!1,He=null,e}function Hr(e,t){var n=t[mo];void 0===n&&(n=t[mo]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Dr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Br]){e[Br]=!0,a.forEach((function(t){"selectionchange"!==t&&(qr.has(t)||Dr(t,!1,e),Dr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,Dr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Jt(t)){case 1:var o=Kt;break;case 4:o=Wt;break;default:o=Qt}n=o.bind(null,t,n,e),o=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function jr(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o||8===s.nodeType&&s.parentNode===o)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&((c=a.stateNode.containerInfo)===o||8===c.nodeType&&c.parentNode===o))return;a=a.return}for(;null!==s;){if(null===(a=wo(s)))return;if(5===(c=a.tag)||6===c){r=i=a;continue e}s=s.parentNode}}r=r.return}Oe((function(){var r=i,o=Ce(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=An;break;case"focusin":l="focus",c=mn;break;case"focusout":l="blur",c=mn;break;case"beforeblur":case"afterblur":c=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Rn;break;case Er:case Ar:case _r:c=yn;break;case Rr:c=Pn;break;case"scroll":c=hn;break;case"wheel":c=xn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=_n}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==h&&(null!=(g=xe(p,h))&&u.push(Kr(p,g,f)))),d)break;p=p.return}0<u.length&&(s=new c(s,l,null,n,o),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!wo(l)&&!l[go])&&(c||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?wo(l):null)&&(l!==(d=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=pn,g="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=_n,g="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==c?s:Co(c),f=null==l?s:Co(l),(s=new u(g,p+"leave",c,n,o)).target=d,s.relatedTarget=f,g=null,wo(o)===r&&((u=new u(h,p+"enter",l,n,o)).target=f,u.relatedTarget=d,g=u),d=g,c&&l)e:{for(h=l,p=0,f=u=c;f;f=Qr(f))p++;for(f=0,g=h;g;g=Qr(g))f++;for(;0<p-f;)u=Qr(u),p--;for(;0<f-p;)h=Qr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Qr(u),h=Qr(h)}u=null}else u=null;null!==c&&Vr(a,s,c,u,!1),null!==l&&null!==d&&Vr(a,d,l,u,!0)}if("select"===(c=(s=r?Co(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var m=Jn;else if(jn(s))if(Yn)m=ar;else{m=or;var y=rr}else(c=s.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ir);switch(m&&(m=m(e,r))?Kn(a,m,n,o):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&ee(s,"number",s.value)),y=r?Co(r):window,e){case"focusin":(jn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(a,n,o);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":br(a,n,o)}var v;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Dn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Un&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Xt="value"in(Yt=o)?Yt.value:Yt.textContent,zn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,o),a.push({event:w,listeners:y}),v?w.data=v:null!==(v=Bn(n))&&(w.data=v))),(v=qn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Hn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Nn&&Dn(e,t)?(e=en(),Zt=Xt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(o=new bn("onBeforeInput","beforeinput",null,n,o),a.push({event:o,listeners:r}),o.data=v))}Fr(a,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;5===o.tag&&null!==i&&(o=i,null!=(i=xe(e,n))&&r.unshift(Kr(e,i,o)),null!=(i=xe(e,t))&&r.push(Kr(e,i,o))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Vr(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(null!==c&&c===r)break;5===s.tag&&null!==l&&(s=l,o?null!=(c=xe(n,i))&&a.unshift(Kr(n,c,s)):o||null!=(c=xe(n,i))&&a.push(Kr(n,c,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Yr(e){return("string"===typeof e?e:""+e).replace(Gr,"\n").replace(Jr,"")}function Xr(e,t,n){if(t=Yr(t),Yr(e)!==t&&n)throw Error(i(425))}function Zr(){}var eo=null,to=null;function no(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ro="function"===typeof setTimeout?setTimeout:void 0,oo="function"===typeof clearTimeout?clearTimeout:void 0,io="function"===typeof Promise?Promise:void 0,ao="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof io?function(e){return io.resolve(null).then(e).catch(so)}:ro;function so(e){setTimeout((function(){throw e}))}function co(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)){if(0===r)return e.removeChild(o),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=o}while(n);zt(t)}function lo(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function uo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ho=Math.random().toString(36).slice(2),fo="__reactFiber$"+ho,po="__reactProps$"+ho,go="__reactContainer$"+ho,mo="__reactEvents$"+ho,yo="__reactListeners$"+ho,vo="__reactHandles$"+ho;function wo(e){var t=e[fo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[go]||n[fo]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=uo(e);null!==e;){if(n=e[fo])return n;e=uo(e)}return t}n=(e=n).parentNode}return null}function bo(e){return!(e=e[fo]||e[go])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Co(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ko(e){return e[po]||null}var So=[],To=-1;function Io(e){return{current:e}}function Eo(e){0>To||(e.current=So[To],So[To]=null,To--)}function Ao(e,t){To++,So[To]=e.current,e.current=t}var _o={},Ro=Io(_o),Po=Io(!1),Oo=_o;function xo(e,t){var n=e.type.contextTypes;if(!n)return _o;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o,i={};for(o in n)i[o]=t[o];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mo(e){return null!==(e=e.childContextTypes)&&void 0!==e}function No(){Eo(Po),Eo(Ro)}function Lo(e,t,n){if(Ro.current!==_o)throw Error(i(168));Ao(Ro,t),Ao(Po,n)}function qo(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(i(108,$(e)||"Unknown",o));return U({},n,r)}function Uo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_o,Oo=Ro.current,Ao(Ro,e),Ao(Po,Po.current),!0}function Fo(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=qo(e,t,Oo),r.__reactInternalMemoizedMergedChildContext=e,Eo(Po),Eo(Ro),Ao(Ro,e)):Eo(Po),Ao(Po,n)}var Ho=null,Do=!1,Bo=!1;function zo(e){null===Ho?Ho=[e]:Ho.push(e)}function $o(){if(!Bo&&null!==Ho){Bo=!0;var e=0,t=wt;try{var n=Ho;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ho=null,Do=!1}catch(o){throw null!==Ho&&(Ho=Ho.slice(e+1)),Qe(Ze,$o),o}finally{wt=t,Bo=!1}}return null}var jo=[],Ko=0,Wo=null,Qo=0,Vo=[],Go=0,Jo=null,Yo=1,Xo="";function Zo(e,t){jo[Ko++]=Qo,jo[Ko++]=Wo,Wo=e,Qo=t}function ei(e,t,n){Vo[Go++]=Yo,Vo[Go++]=Xo,Vo[Go++]=Jo,Jo=e;var r=Yo;e=Xo;var o=32-at(r)-1;r&=~(1<<o),n+=1;var i=32-at(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,Yo=1<<32-at(t)+o|n<<o|r,Xo=i+e}else Yo=1<<i|n<<o|r,Xo=e}function ti(e){null!==e.return&&(Zo(e,1),ei(e,1,0))}function ni(e){for(;e===Wo;)Wo=jo[--Ko],jo[Ko]=null,Qo=jo[--Ko],jo[Ko]=null;for(;e===Jo;)Jo=Vo[--Go],Vo[Go]=null,Xo=Vo[--Go],Vo[Go]=null,Yo=Vo[--Go],Vo[Go]=null}var ri=null,oi=null,ii=!1,ai=null;function si(e,t){var n=Ol(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ci(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ri=e,oi=lo(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ri=e,oi=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Jo?{id:Yo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ol(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ri=e,oi=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ui(e){if(ii){var t=oi;if(t){var n=t;if(!ci(e,t)){if(li(e))throw Error(i(418));t=lo(n.nextSibling);var r=ri;t&&ci(e,t)?si(r,n):(e.flags=-4097&e.flags|2,ii=!1,ri=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,ii=!1,ri=e}}}function di(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ri=e}function hi(e){if(e!==ri)return!1;if(!ii)return di(e),ii=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!no(e.type,e.memoizedProps)),t&&(t=oi)){if(li(e))throw fi(),Error(i(418));for(;t;)si(e,t),t=lo(t.nextSibling)}if(di(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){oi=lo(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}oi=null}}else oi=ri?lo(e.stateNode.nextSibling):null;return!0}function fi(){for(var e=oi;e;)e=lo(e.nextSibling)}function pi(){oi=ri=null,ii=!1}function gi(e){null===ai?ai=[e]:ai.push(e)}var mi=b.ReactCurrentBatchConfig;function yi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var o=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=o.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function vi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function o(e,t){return(e=Ml(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ul(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===S?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===x&&wi(i)===t.type)?((r=o(t,n.props)).ref=yi(e,t,n),r.return=e,r):((r=Nl(n.type,n.key,n.props,null,e.mode,r)).ref=yi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Ll(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ul(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case C:return(n=Nl(t.type,t.key,t.props,null,e.mode,n)).ref=yi(e,null,t),n.return=e,n;case k:return(t=Fl(t,e.mode,n)).return=e,t;case x:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Ll(t,e.mode,n,null)).return=e,t;vi(e,t)}return null}function f(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case C:return n.key===o?l(e,t,n,r):null;case k:return n.key===o?u(e,t,n,r):null;case x:return f(e,t,(o=n._init)(n._payload),r)}if(te(n)||L(n))return null!==o?null:d(e,t,n,r,null);vi(e,n)}return null}function p(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case C:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case k:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case x:return p(e,t,n,(0,r._init)(r._payload),o)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,o,null);vi(t,r)}return null}function g(o,i,s,c){for(var l=null,u=null,d=i,g=i=0,m=null;null!==d&&g<s.length;g++){d.index>g?(m=d,d=null):m=d.sibling;var y=f(o,d,s[g],c);if(null===y){null===d&&(d=m);break}e&&d&&null===y.alternate&&t(o,d),i=a(y,i,g),null===u?l=y:u.sibling=y,u=y,d=m}if(g===s.length)return n(o,d),ii&&Zo(o,g),l;if(null===d){for(;g<s.length;g++)null!==(d=h(o,s[g],c))&&(i=a(d,i,g),null===u?l=d:u.sibling=d,u=d);return ii&&Zo(o,g),l}for(d=r(o,d);g<s.length;g++)null!==(m=p(d,o,g,s[g],c))&&(e&&null!==m.alternate&&d.delete(null===m.key?g:m.key),i=a(m,i,g),null===u?l=m:u.sibling=m,u=m);return e&&d.forEach((function(e){return t(o,e)})),ii&&Zo(o,g),l}function m(o,s,c,l){var u=L(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var d=u=null,g=s,m=s=0,y=null,v=c.next();null!==g&&!v.done;m++,v=c.next()){g.index>m?(y=g,g=null):y=g.sibling;var w=f(o,g,v.value,l);if(null===w){null===g&&(g=y);break}e&&g&&null===w.alternate&&t(o,g),s=a(w,s,m),null===d?u=w:d.sibling=w,d=w,g=y}if(v.done)return n(o,g),ii&&Zo(o,m),u;if(null===g){for(;!v.done;m++,v=c.next())null!==(v=h(o,v.value,l))&&(s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return ii&&Zo(o,m),u}for(g=r(o,g);!v.done;m++,v=c.next())null!==(v=p(g,o,m,v.value,l))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),s=a(v,s,m),null===d?u=v:d.sibling=v,d=v);return e&&g.forEach((function(e){return t(o,e)})),ii&&Zo(o,m),u}return function e(r,i,a,c){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case C:e:{for(var l=a.key,u=i;null!==u;){if(u.key===l){if((l=a.type)===S){if(7===u.tag){n(r,u.sibling),(i=o(u,a.props.children)).return=r,r=i;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===x&&wi(l)===u.type){n(r,u.sibling),(i=o(u,a.props)).ref=yi(r,u,a),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===S?((i=Ll(a.props.children,r.mode,c,a.key)).return=r,r=i):((c=Nl(a.type,a.key,a.props,null,r.mode,c)).ref=yi(r,i,a),c.return=r,r=c)}return s(r);case k:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){n(r,i.sibling),(i=o(i,a.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fl(a,r.mode,c)).return=r,r=i}return s(r);case x:return e(r,i,(u=a._init)(a._payload),c)}if(te(a))return g(r,i,a,c);if(L(a))return m(r,i,a,c);vi(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==i&&6===i.tag?(n(r,i.sibling),(i=o(i,a)).return=r,r=i):(n(r,i),(i=Ul(a,r.mode,c)).return=r,r=i),s(r)):n(r,i)}}var Ci=bi(!0),ki=bi(!1),Si=Io(null),Ti=null,Ii=null,Ei=null;function Ai(){Ei=Ii=Ti=null}function _i(e){var t=Si.current;Eo(Si),e._currentValue=t}function Ri(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pi(e,t){Ti=e,Ei=Ii=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ws=!0),e.firstContext=null)}function Oi(e){var t=e._currentValue;if(Ei!==e)if(e={context:e,memoizedValue:t,next:null},null===Ii){if(null===Ti)throw Error(i(308));Ii=e,Ti.dependencies={lanes:0,firstContext:e}}else Ii=Ii.next=e;return t}var xi=null;function Mi(e){null===xi?xi=[e]:xi.push(e)}function Ni(e,t,n,r){var o=t.interleaved;return null===o?(n.next=n,Mi(t)):(n.next=o.next,o.next=n),t.interleaved=n,Li(e,r)}function Li(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var qi=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Di(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&_c)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,Li(e,n)}return null===(o=r.interleaved)?(t.next=t,Mi(r)):(t.next=o.next,o.next=t),r.interleaved=t,Li(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function zi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $i(e,t,n,r){var o=e.updateQueue;qi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=s.lane,f=s.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,g=s;switch(h=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(f,d,h):p)||void 0===h)break e;d=U({},d,h);break e;case 2:qi=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=o.effects)?o.effects=[s]:h.push(s))}else f={eventTime:f,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=f,c=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(h=s).next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}if(null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null!==(t=o.shared.interleaved)){o=t;do{a|=o.lane,o=o.next}while(o!==t)}else null===i&&(o.shared.lanes=0);qc|=a,e.lanes=a,e.memoizedState=d}}function ji(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(null!==o){if(r.callback=null,r=n,"function"!==typeof o)throw Error(i(191,o));o.call(r)}}}var Ki={},Wi=Io(Ki),Qi=Io(Ki),Vi=Io(Ki);function Gi(e){if(e===Ki)throw Error(i(174));return e}function Ji(e,t){switch(Ao(Vi,t),Ao(Qi,e),Ao(Wi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Eo(Wi),Ao(Wi,t)}function Yi(){Eo(Wi),Eo(Qi),Eo(Vi)}function Xi(e){Gi(Vi.current);var t=Gi(Wi.current),n=ce(t,e.type);t!==n&&(Ao(Qi,e),Ao(Wi,n))}function Zi(e){Qi.current===e&&(Eo(Wi),Eo(Qi))}var ea=Io(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var oa=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,aa=0,sa=null,ca=null,la=null,ua=!1,da=!1,ha=0,fa=0;function pa(){throw Error(i(321))}function ga(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ma(e,t,n,r,o,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,oa.current=null===e||null===e.memoizedState?Za:es,e=n(r,o),da){a=0;do{if(da=!1,ha=0,25<=a)throw Error(i(301));a+=1,la=ca=null,t.updateQueue=null,oa.current=ts,e=n(r,o)}while(da)}if(oa.current=Xa,t=null!==ca&&null!==ca.next,aa=0,la=ca=sa=null,ua=!1,t)throw Error(i(300));return e}function ya(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?sa.memoizedState=la=e:la=la.next=e,la}function wa(){if(null===ca){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=ca.next;var t=null===la?sa.memoizedState:la.next;if(null!==t)la=t,ca=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ca=e).memoizedState,baseState:ca.baseState,baseQueue:ca.baseQueue,queue:ca.queue,next:null},null===la?sa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function Ca(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ca,o=r.baseQueue,a=n.pending;if(null!==a){if(null!==o){var s=o.next;o.next=a.next,a.next=s}r.baseQueue=o=a,n.pending=null}if(null!==o){a=o.next,r=r.baseState;var c=s=null,l=null,u=a;do{var d=u.lane;if((aa&d)===d)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=h,s=r):l=l.next=h,sa.lanes|=d,qc|=d}u=u.next}while(null!==u&&u!==a);null===l?s=r:l.next=c,sr(r,t.memoizedState)||(ws=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){o=e;do{a=o.lane,sa.lanes|=a,qc|=a,o=o.next}while(o!==e)}else null===o&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ka(e){var t=wa(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{a=e(a,s.action),s=s.next}while(s!==o);sr(a,t.memoizedState)||(ws=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function Sa(){}function Ta(e,t){var n=sa,r=wa(),o=t(),a=!sr(r.memoizedState,o);if(a&&(r.memoizedState=o,ws=!0),r=r.queue,qa(Aa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Oa(9,Ea.bind(null,n,r,o,t),void 0,null),null===Rc)throw Error(i(349));0!==(30&aa)||Ia(n,t,o)}return o}function Ia(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ra(e)}function Aa(e,t,n){return n((function(){_a(t)&&Ra(e)}))}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ra(e){var t=Li(e,1);null!==t&&nl(t,e,1,-1)}function Pa(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Va.bind(null,sa,e),[t.memoizedState,e]}function Oa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function xa(){return wa().memoizedState}function Ma(e,t,n,r){var o=va();sa.flags|=e,o.memoizedState=Oa(1|t,n,void 0,void 0===r?null:r)}function Na(e,t,n,r){var o=wa();r=void 0===r?null:r;var i=void 0;if(null!==ca){var a=ca.memoizedState;if(i=a.destroy,null!==r&&ga(r,a.deps))return void(o.memoizedState=Oa(t,n,i,r))}sa.flags|=e,o.memoizedState=Oa(1|t,n,i,r)}function La(e,t){return Ma(8390656,8,e,t)}function qa(e,t){return Na(2048,8,e,t)}function Ua(e,t){return Na(4,2,e,t)}function Fa(e,t){return Na(4,4,e,t)}function Ha(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Da(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4,4,Ha.bind(null,t,e),n)}function Ba(){}function za(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $a(e,t){var n=wa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ga(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ja(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,ws=!0),e.memoizedState=n):(sr(n,t)||(n=gt(),sa.lanes|=n,qc|=n,e.baseState=!0),t)}function Ka(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{wt=n,ia.transition=r}}function Wa(){return wa().memoizedState}function Qa(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ga(e))Ja(t,n);else if(null!==(n=Ni(e,t,n,r))){nl(n,e,r,el()),Ya(n,t,r)}}function Va(e,t,n){var r=tl(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ga(e))Ja(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,sr(s,a)){var c=t.interleaved;return null===c?(o.next=o,Mi(t)):(o.next=c.next,c.next=o),void(t.interleaved=o)}}catch(l){}null!==(n=Ni(e,t,o,r))&&(nl(n,e,r,o=el()),Ya(n,t,r))}}function Ga(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ja(e,t){da=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ya(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xa={readContext:Oi,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Za={readContext:Oi,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Oi,useEffect:La,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Ha.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Pa,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Pa(!1),t=e[0];return e=Ka.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,o=va();if(ii){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Rc)throw Error(i(349));0!==(30&aa)||Ia(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,La(Aa.bind(null,r,a,e),[e]),r.flags|=2048,Oa(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=Rc.identifierPrefix;if(ii){var n=Xo;t=":"+t+"R"+(n=(Yo&~(1<<32-at(Yo)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Oi,useCallback:za,useContext:Oi,useEffect:qa,useImperativeHandle:Da,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:$a,useReducer:Ca,useRef:xa,useState:function(){return Ca(ba)},useDebugValue:Ba,useDeferredValue:function(e){return ja(wa(),ca.memoizedState,e)},useTransition:function(){return[Ca(ba)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ta,useId:Wa,unstable_isNewReconciler:!1},ts={readContext:Oi,useCallback:za,useContext:Oi,useEffect:qa,useImperativeHandle:Da,useInsertionEffect:Ua,useLayoutEffect:Fa,useMemo:$a,useReducer:ka,useRef:xa,useState:function(){return ka(ba)},useDebugValue:Ba,useDeferredValue:function(e){var t=wa();return null===ca?t.memoizedState=e:ja(t,ca.memoizedState,e)},useTransition:function(){return[ka(ba)[0],wa().memoizedState]},useMutableSource:Sa,useSyncExternalStore:Ta,useId:Wa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var os={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=Hi(r,o);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,o))&&(nl(t,e,o,r),Bi(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),o=tl(e),i=Hi(r,o);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Di(e,i,o))&&(nl(t,e,o,r),Bi(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),o=Hi(n,r);o.tag=2,void 0!==t&&null!==t&&(o.callback=t),null!==(t=Di(e,o,r))&&(nl(t,e,r,n),Bi(t,e,r))}};function is(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(o,i))}function as(e,t,n){var r=!1,o=_o,i=t.contextType;return"object"===typeof i&&null!==i?i=Oi(i):(o=Mo(t)?Oo:Ro.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?xo(e,o):_o),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=os,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&os.enqueueReplaceState(t,t.state,null)}function cs(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},Ui(e);var i=t.contextType;"object"===typeof i&&null!==i?o.context=Oi(i):(i=Mo(t)?Oo:Ro.current,o.context=xo(e,i)),o.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(rs(e,t,i,n),o.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(t=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),t!==o.state&&os.enqueueReplaceState(o,o.state,null),$i(e,n,o,r),o.state=e.memoizedState),"function"===typeof o.componentDidMount&&(e.flags|=4194308)}function ls(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var o=n}catch(i){o="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:o,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ds(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var hs="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Hi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){jc||(jc=!0,Kc=r),ds(0,t)},n}function ps(e,t,n){(n=Hi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ds(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ds(0,t),"function"!==typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function gs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hs;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=Il.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,o){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Hi(-1,1)).tag=2,Di(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=o,e)}var vs=b.ReactCurrentOwner,ws=!1;function bs(e,t,n,r){t.child=null===e?ki(t,null,n,r):Ci(t,e.child,n,r)}function Cs(e,t,n,r,o){n=n.render;var i=t.ref;return Pi(t,o),r=ma(e,t,n,r,i,o),n=ya(),null===e||ws?(ii&&n&&ti(t),t.flags|=1,bs(e,t,r,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,js(e,t,o))}function ks(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||xl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nl(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ss(e,t,i,r,o))}if(i=e.child,0===(e.lanes&o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(a,r)&&e.ref===t.ref)return js(e,t,o)}return t.flags|=1,(e=Ml(i,r)).ref=t.ref,e.return=t,t.child=e}function Ss(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(ws=!1,t.pendingProps=r=i,0===(e.lanes&o))return t.lanes=e.lanes,js(e,t,o);0!==(131072&e.flags)&&(ws=!0)}}return Es(e,t,n,r,o)}function Ts(e,t,n){var r=t.pendingProps,o=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ao(Mc,xc),xc|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ao(Mc,xc),xc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ao(Mc,xc),xc|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ao(Mc,xc),xc|=r;return bs(e,t,o,n),t.child}function Is(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Es(e,t,n,r,o){var i=Mo(n)?Oo:Ro.current;return i=xo(t,i),Pi(t,o),n=ma(e,t,n,r,i,o),r=ya(),null===e||ws?(ii&&r&&ti(t),t.flags|=1,bs(e,t,n,o),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,js(e,t,o))}function As(e,t,n,r,o){if(Mo(n)){var i=!0;Uo(t)}else i=!1;if(Pi(t,o),null===t.stateNode)$s(e,t),as(t,n,r),cs(t,n,r,o),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var c=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=Oi(l):l=xo(t,l=Mo(n)?Oo:Ro.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;d||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||c!==l)&&ss(t,a,r,l),qi=!1;var h=t.memoizedState;a.state=h,$i(t,r,a,o),c=t.memoizedState,s!==r||h!==c||Po.current||qi?("function"===typeof u&&(rs(t,n,u,r),c=t.memoizedState),(s=qi||is(t,n,s,r,h,c,l))?(d||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),a.props=r,a.state=c,a.context=l,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Fi(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ns(t.type,s),a.props=l,d=t.pendingProps,h=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=Oi(c):c=xo(t,c=Mo(n)?Oo:Ro.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==d||h!==c)&&ss(t,a,r,c),qi=!1,h=t.memoizedState,a.state=h,$i(t,r,a,o);var p=t.memoizedState;s!==d||h!==p||Po.current||qi?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(l=qi||is(t,n,l,r,h,p,c)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return _s(e,t,n,r,i,o)}function _s(e,t,n,r,o,i){Is(e,t);var a=0!==(128&t.flags);if(!r&&!a)return o&&Fo(t,n,!1),js(e,t,i);r=t.stateNode,vs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ci(t,e.child,null,i),t.child=Ci(t,null,s,i)):bs(e,t,s,i),t.memoizedState=r.state,o&&Fo(t,n,!0),t.child}function Rs(e){var t=e.stateNode;t.pendingContext?Lo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lo(0,t.context,!1),Ji(e,t.containerInfo)}function Ps(e,t,n,r,o){return pi(),gi(o),t.flags|=256,bs(e,t,n,r),t.child}var Os,xs,Ms,Ns,Ls={dehydrated:null,treeContext:null,retryLane:0};function qs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Us(e,t,n){var r,o=t.pendingProps,a=ea.current,s=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ao(ea,1&a),null===e)return ui(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=o.children,e=o.fallback,s?(o=t.mode,s=t.child,c={mode:"hidden",children:c},0===(1&o)&&null!==s?(s.childLanes=0,s.pendingProps=c):s=ql(c,o,0,null),e=Ll(e,o,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=qs(n),t.memoizedState=Ls,e):Fs(t,c));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,o,a,s){if(n)return 256&t.flags?(t.flags&=-257,Hs(e,t,s,r=us(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=ql({mode:"visible",children:r.children},o,0,null),(a=Ll(a,o,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&Ci(t,e.child,null,s),t.child.memoizedState=qs(s),t.memoizedState=Ls,a);if(0===(1&t.mode))return Hs(e,t,s,null);if("$!"===o.data){if(r=o.nextSibling&&o.nextSibling.dataset)var c=r.dgst;return r=c,Hs(e,t,s,r=us(a=Error(i(419)),r,void 0))}if(c=0!==(s&e.childLanes),ws||c){if(null!==(r=Rc)){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(o=0!==(o&(r.suspendedLanes|s))?0:o)&&o!==a.retryLane&&(a.retryLane=o,Li(e,o),nl(r,e,o,-1))}return gl(),Hs(e,t,s,r=us(Error(i(421))))}return"$?"===o.data?(t.flags|=128,t.child=e.child,t=Al.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,oi=lo(o.nextSibling),ri=t,ii=!0,ai=null,null!==e&&(Vo[Go++]=Yo,Vo[Go++]=Xo,Vo[Go++]=Jo,Yo=e.id,Xo=e.overflow,Jo=t),t=Fs(t,r.children),t.flags|=4096,t)}(e,t,c,o,r,a,n);if(s){s=o.fallback,c=t.mode,r=(a=e.child).sibling;var l={mode:"hidden",children:o.children};return 0===(1&c)&&t.child!==a?((o=t.child).childLanes=0,o.pendingProps=l,t.deletions=null):(o=Ml(a,l)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Ml(r,s):(s=Ll(s,c,n,null)).flags|=2,s.return=t,o.return=t,o.sibling=s,t.child=o,o=s,s=t.child,c=null===(c=e.child.memoizedState)?qs(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},s.memoizedState=c,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,o}return e=(s=e.child).sibling,o=Ml(s,{mode:"visible",children:o.children}),0===(1&t.mode)&&(o.lanes=n),o.return=t,o.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=o,t.memoizedState=null,o}function Fs(e,t){return(t=ql({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Hs(e,t,n,r){return null!==r&&gi(r),Ci(t,e.child,null,n),(e=Fs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ds(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ri(e.return,t,n)}function Bs(e,t,n,r,o){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o)}function zs(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;if(bs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ds(e,n,t);else if(19===e.tag)Ds(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ao(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Bs(t,!1,o,n,i);break;case"backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===ta(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Bs(t,!0,n,null,i);break;case"together":Bs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $s(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function js(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Ml(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ml(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ks(e,t){if(!ii)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=14680064&o.subtreeFlags,r|=14680064&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qs(e,t,n){var r=t.pendingProps;switch(ni(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Mo(t.type)&&No(),Ws(t),null;case 3:return r=t.stateNode,Yi(),Eo(Po),Eo(Ro),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ai&&(al(ai),ai=null))),xs(e,t),Ws(t),null;case 5:Zi(t);var o=Gi(Vi.current);if(n=t.type,null!==e&&null!=t.stateNode)Ms(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ws(t),null}if(e=Gi(Wi.current),hi(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fo]=t,r[po]=a,e=0!==(1&t.mode),n){case"dialog":Hr("cancel",r),Hr("close",r);break;case"iframe":case"object":case"embed":Hr("load",r);break;case"video":case"audio":for(o=0;o<Lr.length;o++)Hr(Lr[o],r);break;case"source":Hr("error",r);break;case"img":case"image":case"link":Hr("error",r),Hr("load",r);break;case"details":Hr("toggle",r);break;case"input":J(r,a),Hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Hr("invalid",r);break;case"textarea":oe(r,a),Hr("invalid",r)}for(var c in ve(n,a),o=null,a)if(a.hasOwnProperty(c)){var l=a[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),o=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==a.suppressHydrationWarning&&Xr(r.textContent,l,e),o=["children",""+l]):s.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Hr("scroll",r)}switch(n){case"input":W(r),Z(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=o,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===o.nodeType?o:o.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[fo]=t,e[po]=r,Os(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Hr("cancel",e),Hr("close",e),o=r;break;case"iframe":case"object":case"embed":Hr("load",e),o=r;break;case"video":case"audio":for(o=0;o<Lr.length;o++)Hr(Lr[o],e);o=r;break;case"source":Hr("error",e),o=r;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),o=r;break;case"details":Hr("toggle",e),o=r;break;case"input":J(e,r),o=G(e,r),Hr("invalid",e);break;case"option":default:o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=U({},r,{value:void 0}),Hr("invalid",e);break;case"textarea":oe(e,r),o=re(e,r),Hr("invalid",e)}for(a in ve(n,o),l=o)if(l.hasOwnProperty(a)){var u=l[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Hr("scroll",e):null!=u&&w(e,a,u,c))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+j(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof o.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Ns(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Gi(Vi.current),Gi(Wi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[fo]=t,(a=r.nodeValue!==n)&&null!==(e=ri))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fo]=t,t.stateNode=r}return Ws(t),null;case 13:if(Eo(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ii&&null!==oi&&0!==(1&t.mode)&&0===(128&t.flags))fi(),pi(),t.flags|=98560,a=!1;else if(a=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(i(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(i(317));a[fo]=t}else pi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==ai&&(al(ai),ai=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Nc&&(Nc=3):gl())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Yi(),xs(e,t),null===e&&zr(t.stateNode.containerInfo),Ws(t),null;case 10:return _i(t.type._context),Ws(t),null;case 19:if(Eo(ea),null===(a=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(c=a.rendering))if(r)Ks(a,!1);else{if(0!==Nc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=ta(e))){for(t.flags|=128,Ks(a,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(c=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ao(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ye()>zc&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ks(a,!0),null===a.tail&&"hidden"===a.tailMode&&!c.alternate&&!ii)return Ws(t),null}else 2*Ye()-a.renderingStartTime>zc&&1073741824!==n&&(t.flags|=128,r=!0,Ks(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=a.last)?n.sibling=c:t.child=c,a.last=c)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ye(),t.sibling=null,n=ea.current,Ao(ea,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return dl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&xc)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Vs(e,t){switch(ni(t),t.tag){case 1:return Mo(t.type)&&No(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Eo(Po),Eo(Ro),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zi(t),null;case 13:if(Eo(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));pi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Eo(ea),null;case 4:return Yi(),null;case 10:return _i(t.type._context),null;case 22:case 23:return dl(),null;default:return null}}Os=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xs=function(){},Ms=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Gi(Wi.current);var i,a=null;switch(n){case"input":o=G(e,o),r=G(e,r),a=[];break;case"select":o=U({},o,{value:void 0}),r=U({},r,{value:void 0}),a=[];break;case"textarea":o=re(e,o),r=re(e,r),a=[];break;default:"function"!==typeof o.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,o)if(!r.hasOwnProperty(u)&&o.hasOwnProperty(u)&&null!=o[u])if("style"===u){var c=o[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=o?o[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Hr("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var Gs=!1,Js=!1,Ys="function"===typeof WeakSet?WeakSet:Set,Xs=null;function Zs(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tl(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Tl(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var o=r=r.next;do{if((o.tag&e)===e){var i=o.destroy;o.destroy=void 0,void 0!==i&&ec(t,n,i)}o=o.next}while(o!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function oc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fo],delete t[po],delete t[mo],delete t[yo],delete t[vo])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ac(e){return 5===e.tag||3===e.tag||4===e.tag}function sc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ac(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,dc=!1;function hc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:Js||Zs(n,t);case 6:var r=uc,o=dc;uc=null,hc(e,t,n),dc=o,null!==(uc=r)&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(dc?(e=uc,n=n.stateNode,8===e.nodeType?co(e.parentNode,n):1===e.nodeType&&co(e,n),zt(e)):co(uc,n.stateNode));break;case 4:r=uc,o=dc,uc=n.stateNode.containerInfo,dc=!0,hc(e,t,n),uc=r,dc=o;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){o=r=r.next;do{var i=o,a=i.destroy;i=i.tag,void 0!==a&&(0!==(2&i)||0!==(4&i))&&ec(n,t,a),o=o.next}while(o!==r)}hc(e,t,n);break;case 1:if(!Js&&(Zs(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tl(n,t,s)}hc(e,t,n);break;case 21:hc(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,hc(e,t,n),Js=r):hc(e,t,n);break;default:hc(e,t,n)}}function pc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ys),t.forEach((function(t){var r=_l.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,dc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,dc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));fc(a,s,o),uc=null,dc=!1;var l=o.alternate;null!==l&&(l.return=null),o.return=null}catch(u){Tl(o,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mc(t,e),t=t.sibling}function mc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gc(t,e),yc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(m){Tl(e,e.return,m)}try{nc(5,e,e.return)}catch(m){Tl(e,e.return,m)}}break;case 1:gc(t,e),yc(e),512&r&&null!==n&&Zs(n,n.return);break;case 5:if(gc(t,e),yc(e),512&r&&null!==n&&Zs(n,n.return),32&e.flags){var o=e.stateNode;try{he(o,"")}catch(m){Tl(e,e.return,m)}}if(4&r&&null!=(o=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===a.type&&null!=a.name&&Y(o,a),we(c,s);var u=we(c,a);for(s=0;s<l.length;s+=2){var d=l[s],h=l[s+1];"style"===d?me(o,h):"dangerouslySetInnerHTML"===d?de(o,h):"children"===d?he(o,h):w(o,d,h,u)}switch(c){case"input":X(o,a);break;case"textarea":ie(o,a);break;case"select":var f=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(o,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(o,!!a.multiple,a.defaultValue,!0):ne(o,!!a.multiple,a.multiple?[]:"",!1))}o[po]=a}catch(m){Tl(e,e.return,m)}}break;case 6:if(gc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(i(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(m){Tl(e,e.return,m)}}break;case 3:if(gc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Tl(e,e.return,m)}break;case 4:default:gc(t,e),yc(e);break;case 13:gc(t,e),yc(e),8192&(o=e.child).flags&&(a=null!==o.memoizedState,o.stateNode.isHidden=a,!a||null!==o.alternate&&null!==o.alternate.memoizedState||(Bc=Ye())),4&r&&pc(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||d,gc(t,e),Js=u):gc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Xs=e,d=e.child;null!==d;){for(h=Xs=d;null!==Xs;){switch(p=(f=Xs).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:Zs(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Tl(r,n,m)}}break;case 5:Zs(f,f.return);break;case 22:if(null!==f.memoizedState){Cc(h);continue}}null!==p?(p.return=f,Xs=p):Cc(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{o=h.stateNode,u?"function"===typeof(a=o.style).setProperty?a.setProperty("display","none","important"):a.display="none":(c=h.stateNode,s=void 0!==(l=h.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=ge("display",s))}catch(m){Tl(e,e.return,m)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(m){Tl(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gc(t,e),yc(e),4&r&&pc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ac(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var o=r.stateNode;32&r.flags&&(he(o,""),r.flags&=-33),lc(e,sc(e),o);break;case 3:case 4:var a=r.stateNode.containerInfo;cc(e,sc(e),a);break;default:throw Error(i(161))}}catch(s){Tl(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){Xs=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xs;){var o=Xs,i=o.child;if(22===o.tag&&r){var a=null!==o.memoizedState||Gs;if(!a){var s=o.alternate,c=null!==s&&null!==s.memoizedState||Js;s=Gs;var l=Js;if(Gs=a,(Js=c)&&!l)for(Xs=o;null!==Xs;)c=(a=Xs).child,22===a.tag&&null!==a.memoizedState?kc(o):null!==c?(c.return=a,Xs=c):kc(o);for(;null!==i;)Xs=i,wc(i,t,n),i=i.sibling;Xs=o,Gs=s,Js=l}bc(e)}else 0!==(8772&o.subtreeFlags)&&null!==i?(i.return=o,Xs=i):bc(e)}}function bc(e){for(;null!==Xs;){var t=Xs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&ji(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}ji(t,s,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(i(163))}Js||512&t.flags&&oc(t)}catch(f){Tl(t,t.return,f)}}if(t===e){Xs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xs=n;break}Xs=t.return}}function Cc(e){for(;null!==Xs;){var t=Xs;if(t===e){Xs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xs=n;break}Xs=t.return}}function kc(e){for(;null!==Xs;){var t=Xs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Tl(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var o=t.return;try{r.componentDidMount()}catch(c){Tl(t,o,c)}}var i=t.return;try{oc(t)}catch(c){Tl(t,i,c)}break;case 5:var a=t.return;try{oc(t)}catch(c){Tl(t,a,c)}}}catch(c){Tl(t,t.return,c)}if(t===e){Xs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Xs=s;break}Xs=t.return}}var Sc,Tc=Math.ceil,Ic=b.ReactCurrentDispatcher,Ec=b.ReactCurrentOwner,Ac=b.ReactCurrentBatchConfig,_c=0,Rc=null,Pc=null,Oc=0,xc=0,Mc=Io(0),Nc=0,Lc=null,qc=0,Uc=0,Fc=0,Hc=null,Dc=null,Bc=0,zc=1/0,$c=null,jc=!1,Kc=null,Wc=null,Qc=!1,Vc=null,Gc=0,Jc=0,Yc=null,Xc=-1,Zc=0;function el(){return 0!==(6&_c)?Ye():-1!==Xc?Xc:Xc=Ye()}function tl(e){return 0===(1&e.mode)?1:0!==(2&_c)&&0!==Oc?Oc&-Oc:null!==mi.transition?(0===Zc&&(Zc=gt()),Zc):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nl(e,t,n,r){if(50<Jc)throw Jc=0,Yc=null,Error(i(185));yt(e,n,r),0!==(2&_c)&&e===Rc||(e===Rc&&(0===(2&_c)&&(Uc|=n),4===Nc&&sl(e,Oc)),rl(e,r),1===n&&0===_c&&0===(1&t.mode)&&(zc=Ye()+500,Do&&$o()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=e.pendingLanes;0<i;){var a=31-at(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=ft(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}}(e,t);var r=ht(e,e===Rc?Oc:0);if(0===r)null!==n&&Ve(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ve(n),1===t)0===e.tag?function(e){Do=!0,zo(e)}(cl.bind(null,e)):zo(cl.bind(null,e)),ao((function(){0===(6&_c)&&$o()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Rl(n,ol.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ol(e,t){if(Xc=-1,Zc=0,0!==(6&_c))throw Error(i(327));var n=e.callbackNode;if(kl()&&e.callbackNode!==n)return null;var r=ht(e,e===Rc?Oc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=ml(e,r);else{t=r;var o=_c;_c|=2;var a=pl();for(Rc===e&&Oc===t||($c=null,zc=Ye()+500,hl(e,t));;)try{vl();break}catch(c){fl(e,c)}Ai(),Ic.current=a,_c=o,null!==Pc?t=0:(Rc=null,Oc=0,t=Nc)}if(0!==t){if(2===t&&(0!==(o=pt(e))&&(r=o,t=il(e,o))),1===t)throw n=Lc,hl(e,0),sl(e,r),rl(e,Ye()),n;if(6===t)sl(e,r);else{if(o=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!sr(i(),o))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(o)&&(2===(t=ml(e,r))&&(0!==(a=pt(e))&&(r=a,t=il(e,a))),1===t))throw n=Lc,hl(e,0),sl(e,r),rl(e,Ye()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:Cl(e,Dc,$c);break;case 3:if(sl(e,r),(130023424&r)===r&&10<(t=Bc+500-Ye())){if(0!==ht(e,0))break;if(((o=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=ro(Cl.bind(null,e,Dc,$c),t);break}Cl(e,Dc,$c);break;case 4:if(sl(e,r),(4194240&r)===r)break;for(t=e.eventTimes,o=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>o&&(o=s),r&=~a}if(r=o,10<(r=(120>(r=Ye()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tc(r/1960))-r)){e.timeoutHandle=ro(Cl.bind(null,e,Dc,$c),r);break}Cl(e,Dc,$c);break;default:throw Error(i(329))}}}return rl(e,Ye()),e.callbackNode===n?ol.bind(null,e):null}function il(e,t){var n=Hc;return e.current.memoizedState.isDehydrated&&(hl(e,t).flags|=256),2!==(e=ml(e,t))&&(t=Dc,Dc=n,null!==t&&al(t)),e}function al(e){null===Dc?Dc=e:Dc.push.apply(Dc,e)}function sl(e,t){for(t&=~Fc,t&=~Uc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&_c))throw Error(i(327));kl();var t=ht(e,0);if(0===(1&t))return rl(e,Ye()),null;var n=ml(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Lc,hl(e,0),sl(e,t),rl(e,Ye()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cl(e,Dc,$c),rl(e,Ye()),null}function ll(e,t){var n=_c;_c|=1;try{return e(t)}finally{0===(_c=n)&&(zc=Ye()+500,Do&&$o())}}function ul(e){null!==Vc&&0===Vc.tag&&0===(6&_c)&&kl();var t=_c;_c|=1;var n=Ac.transition,r=wt;try{if(Ac.transition=null,wt=1,e)return e()}finally{wt=r,Ac.transition=n,0===(6&(_c=t))&&$o()}}function dl(){xc=Mc.current,Eo(Mc)}function hl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oo(n)),null!==Pc)for(n=Pc.return;null!==n;){var r=n;switch(ni(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&No();break;case 3:Yi(),Eo(Po),Eo(Ro),ra();break;case 5:Zi(r);break;case 4:Yi();break;case 13:case 19:Eo(ea);break;case 10:_i(r.type._context);break;case 22:case 23:dl()}n=n.return}if(Rc=e,Pc=e=Ml(e.current,null),Oc=xc=t,Nc=0,Lc=null,Fc=Uc=qc=0,Dc=Hc=null,null!==xi){for(t=0;t<xi.length;t++)if(null!==(r=(n=xi[t]).interleaved)){n.interleaved=null;var o=r.next,i=n.pending;if(null!==i){var a=i.next;i.next=o,r.next=a}n.pending=r}xi=null}return e}function fl(e,t){for(;;){var n=Pc;try{if(Ai(),oa.current=Xa,ua){for(var r=sa.memoizedState;null!==r;){var o=r.queue;null!==o&&(o.pending=null),r=r.next}ua=!1}if(aa=0,la=ca=sa=null,da=!1,ha=0,Ec.current=null,null===n||null===n.return){Nc=1,Lc=t,Pc=null;break}e:{var a=e,s=n.return,c=n,l=t;if(t=Oc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,d=c,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,ys(p,s,c,0,t),1&p.mode&&gs(a,u,t),l=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(l),t.updateQueue=m}else g.add(l);break e}if(0===(1&t)){gs(a,u,t),gl();break e}l=Error(i(426))}else if(ii&&1&c.mode){var y=ms(s);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ys(y,s,c,0,t),gi(ls(l,c));break e}}a=l=ls(l,c),4!==Nc&&(Nc=2),null===Hc?Hc=[a]:Hc.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,zi(a,fs(0,l,t));break e;case 1:c=l;var v=a.type,w=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wc||!Wc.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t,zi(a,ps(a,c,t));break e}}a=a.return}while(null!==a)}bl(n)}catch(b){t=b,Pc===n&&null!==n&&(Pc=n=n.return);continue}break}}function pl(){var e=Ic.current;return Ic.current=Xa,null===e?Xa:e}function gl(){0!==Nc&&3!==Nc&&2!==Nc||(Nc=4),null===Rc||0===(268435455&qc)&&0===(268435455&Uc)||sl(Rc,Oc)}function ml(e,t){var n=_c;_c|=2;var r=pl();for(Rc===e&&Oc===t||($c=null,hl(e,t));;)try{yl();break}catch(o){fl(e,o)}if(Ai(),_c=n,Ic.current=r,null!==Pc)throw Error(i(261));return Rc=null,Oc=0,Nc}function yl(){for(;null!==Pc;)wl(Pc)}function vl(){for(;null!==Pc&&!Ge();)wl(Pc)}function wl(e){var t=Sc(e.alternate,e,xc);e.memoizedProps=e.pendingProps,null===t?bl(e):Pc=t,Ec.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qs(n,t,xc)))return void(Pc=n)}else{if(null!==(n=Vs(n,t)))return n.flags&=32767,void(Pc=n);if(null===e)return Nc=6,void(Pc=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pc=t);Pc=t=e}while(null!==t);0===Nc&&(Nc=5)}function Cl(e,t,n){var r=wt,o=Ac.transition;try{Ac.transition=null,wt=1,function(e,t,n,r){do{kl()}while(null!==Vc);if(0!==(6&_c))throw Error(i(327));n=e.finishedWork;var o=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-at(n),i=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~i}}(e,a),e===Rc&&(Pc=Rc=null,Oc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Rl(tt,(function(){return kl(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ac.transition,Ac.transition=null;var s=wt;wt=1;var c=_c;_c|=4,Ec.current=null,function(e,t){if(eo=jt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(C){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==a||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===o&&(c=s),f===a&&++d===r&&(l=s),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(to={focusedElem:e,selectionRange:n},jt=!1,Xs=t;null!==Xs;)if(e=(t=Xs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xs=e;else for(;null!==Xs;){t=Xs;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ns(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(C){Tl(t,t.return,C)}if(null!==(e=t.sibling)){e.return=t.return,Xs=e;break}Xs=t.return}g=tc,tc=!1}(e,n),mc(n,e),pr(to),jt=!!eo,to=eo=null,e.current=n,vc(n,e,o),Je(),_c=c,wt=s,Ac.transition=a}else e.current=n;if(Qc&&(Qc=!1,Vc=e,Gc=o),a=e.pendingLanes,0===a&&(Wc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ye()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(jc)throw jc=!1,e=Kc,Kc=null,e;0!==(1&Gc)&&0!==e.tag&&kl(),a=e.pendingLanes,0!==(1&a)?e===Yc?Jc++:(Jc=0,Yc=e):Jc=0,$o()}(e,t,n,r)}finally{Ac.transition=o,wt=r}return null}function kl(){if(null!==Vc){var e=bt(Gc),t=Ac.transition,n=wt;try{if(Ac.transition=null,wt=16>e?16:e,null===Vc)var r=!1;else{if(e=Vc,Vc=null,Gc=0,0!==(6&_c))throw Error(i(331));var o=_c;for(_c|=4,Xs=e.current;null!==Xs;){var a=Xs,s=a.child;if(0!==(16&Xs.flags)){var c=a.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xs=u;null!==Xs;){var d=Xs;switch(d.tag){case 0:case 11:case 15:nc(8,d,a)}var h=d.child;if(null!==h)h.return=d,Xs=h;else for(;null!==Xs;){var f=(d=Xs).sibling,p=d.return;if(ic(d),d===u){Xs=null;break}if(null!==f){f.return=p,Xs=f;break}Xs=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Xs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Xs=s;else e:for(;null!==Xs;){if(0!==(2048&(a=Xs).flags))switch(a.tag){case 0:case 11:case 15:nc(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Xs=v;break e}Xs=a.return}}var w=e.current;for(Xs=w;null!==Xs;){var b=(s=Xs).child;if(0!==(2064&s.subtreeFlags)&&null!==b)b.return=s,Xs=b;else e:for(s=w;null!==Xs;){if(0!==(2048&(c=Xs).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(k){Tl(c,c.return,k)}if(c===s){Xs=null;break e}var C=c.sibling;if(null!==C){C.return=c.return,Xs=C;break e}Xs=c.return}}if(_c=o,$o(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(ot,e)}catch(k){}r=!0}return r}finally{wt=n,Ac.transition=t}}return!1}function Sl(e,t,n){e=Di(e,t=fs(0,t=ls(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function Tl(e,t,n){if(3===e.tag)Sl(e,e,n);else for(;null!==t;){if(3===t.tag){Sl(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=Di(t,e=ps(t,e=ls(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Il(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Rc===e&&(Oc&n)===n&&(4===Nc||3===Nc&&(130023424&Oc)===Oc&&500>Ye()-Bc?hl(e,0):Fc|=n),rl(e,t)}function El(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Li(e,t))&&(yt(e,t,n),rl(e,n))}function Al(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),El(e,n)}function _l(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),El(e,n)}function Rl(e,t){return Qe(e,t)}function Pl(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ol(e,t,n,r){return new Pl(e,t,n,r)}function xl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ml(e,t){var n=e.alternate;return null===n?((n=Ol(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nl(e,t,n,r,o,a){var s=2;if(r=e,"function"===typeof e)xl(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case S:return Ll(n.children,o,a,t);case T:s=8,o|=8;break;case I:return(e=Ol(12,n,t,2|o)).elementType=I,e.lanes=a,e;case R:return(e=Ol(13,n,t,o)).elementType=R,e.lanes=a,e;case P:return(e=Ol(19,n,t,o)).elementType=P,e.lanes=a,e;case M:return ql(n,o,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:s=10;break e;case A:s=9;break e;case _:s=11;break e;case O:s=14;break e;case x:s=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Ol(s,n,t,o)).elementType=e,t.type=r,t.lanes=a,t}function Ll(e,t,n,r){return(e=Ol(7,e,r,t)).lanes=n,e}function ql(e,t,n,r){return(e=Ol(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Ul(e,t,n){return(e=Ol(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Ol(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hl(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function Dl(e,t,n,r,o,i,a,s,c){return e=new Hl(e,t,n,s,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Ol(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(i),e}function Bl(e){if(!e)return _o;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mo(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Mo(n))return qo(e,n,t)}return t}function zl(e,t,n,r,o,i,a,s,c){return(e=Dl(n,r,!0,e,0,i,0,s,c)).context=Bl(null),n=e.current,(i=Hi(r=el(),o=tl(n))).callback=void 0!==t&&null!==t?t:null,Di(n,i,o),e.current.lanes=o,yt(e,o,r),rl(e,r),e}function $l(e,t,n,r){var o=t.current,i=el(),a=tl(o);return n=Bl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Hi(i,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Di(o,t,a))&&(nl(e,o,a,i),Bi(e,o,a)),a}function jl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kl(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){Kl(e,t),(e=e.alternate)&&Kl(e,t)}Sc=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Po.current)ws=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ws=!1,function(e,t,n){switch(t.tag){case 3:Rs(t),pi();break;case 5:Xi(t);break;case 1:Mo(t.type)&&Uo(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Ao(Si,r._currentValue),r._currentValue=o;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ao(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Us(e,t,n):(Ao(ea,1&ea.current),null!==(e=js(e,t,n))?e.sibling:null);Ao(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),Ao(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return js(e,t,n)}(e,t,n);ws=0!==(131072&e.flags)}else ws=!1,ii&&0!==(1048576&t.flags)&&ei(t,Qo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$s(e,t),e=t.pendingProps;var o=xo(t,Ro.current);Pi(t,n),o=ma(null,t,r,e,o,n);var a=ya();return t.flags|=1,"object"===typeof o&&null!==o&&"function"===typeof o.render&&void 0===o.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mo(r)?(a=!0,Uo(t)):a=!1,t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,Ui(t),o.updater=os,t.stateNode=o,o._reactInternals=t,cs(t,r,e,n),t=_s(null,t,r,!0,a,n)):(t.tag=0,ii&&a&&ti(t),bs(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch($s(e,t),e=t.pendingProps,r=(o=r._init)(r._payload),t.type=r,o=t.tag=function(e){if("function"===typeof e)return xl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===_)return 11;if(e===O)return 14}return 2}(r),e=ns(r,e),o){case 0:t=Es(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Cs(null,t,r,e,n);break e;case 14:t=ks(null,t,r,ns(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,Es(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 1:return r=t.type,o=t.pendingProps,As(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 3:e:{if(Rs(t),null===e)throw Error(i(387));r=t.pendingProps,o=(a=t.memoizedState).element,Fi(e,t),$i(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Ps(e,t,r,n,o=ls(Error(i(423)),t));break e}if(r!==o){t=Ps(e,t,r,n,o=ls(Error(i(424)),t));break e}for(oi=lo(t.stateNode.containerInfo.firstChild),ri=t,ii=!0,ai=null,n=ki(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(pi(),r===o){t=js(e,t,n);break e}bs(e,t,r,n)}t=t.child}return t;case 5:return Xi(t),null===e&&ui(t),r=t.type,o=t.pendingProps,a=null!==e?e.memoizedProps:null,s=o.children,no(r,o)?s=null:null!==a&&no(r,a)&&(t.flags|=32),Is(e,t),bs(e,t,s,n),t.child;case 6:return null===e&&ui(t),null;case 13:return Us(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ci(t,null,r,n):bs(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,Cs(e,t,r,o=t.elementType===r?o:ns(r,o),n);case 7:return bs(e,t,t.pendingProps,n),t.child;case 8:case 12:return bs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,s=o.value,Ao(Si,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===o.children&&!Po.current){t=js(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var c=a.dependencies;if(null!==c){s=a.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===a.tag){(l=Hi(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ri(a.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(i(341));s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ri(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}bs(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pi(t,n),r=r(o=Oi(o)),t.flags|=1,bs(e,t,r,n),t.child;case 14:return o=ns(r=t.type,t.pendingProps),ks(e,t,r,o=ns(r.type,o),n);case 15:return Ss(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:ns(r,o),$s(e,t),t.tag=1,Mo(r)?(e=!0,Uo(t)):e=!1,Pi(t,n),as(t,r,o),cs(t,r,o,n),_s(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ts(e,t,n)}throw Error(i(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Vl(e){this._internalRoot=e}function Gl(e){this._internalRoot=e}function Jl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function Zl(e,t,n,r,o){var i=n._reactRootContainer;if(i){var a=i;if("function"===typeof o){var s=o;o=function(){var e=jl(a);s.call(e)}}$l(t,a,e,o)}else a=function(e,t,n,r,o){if(o){if("function"===typeof r){var i=r;r=function(){var e=jl(a);i.call(e)}}var a=zl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=a,e[go]=a.current,zr(8===e.nodeType?e.parentNode:e),ul(),a}for(;o=e.lastChild;)e.removeChild(o);if("function"===typeof r){var s=r;r=function(){var e=jl(c);s.call(e)}}var c=Dl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[go]=c.current,zr(8===e.nodeType?e.parentNode:e),ul((function(){$l(t,c,n,r)})),c}(n,t,e,o,r);return jl(a)}Gl.prototype.render=Vl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));$l(e,t,null,null)},Gl.prototype.unmount=Vl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul((function(){$l(null,e,null,null)})),t[go]=null}},Gl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Ut(e)}},Ct=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),rl(t,Ye()),0===(6&_c)&&(zc=Ye()+500,$o()))}break;case 13:ul((function(){var t=Li(e,1);if(null!==t){var n=el();nl(t,e,1,n)}})),Wl(e,1)}},kt=function(e){if(13===e.tag){var t=Li(e,134217728);if(null!==t)nl(t,e,134217728,el());Wl(e,134217728)}},St=function(e){if(13===e.tag){var t=tl(e),n=Li(e,t);if(null!==n)nl(n,e,t,el());Wl(e,t)}},Tt=function(){return wt},It=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},ke=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=ko(r);if(!o)throw Error(i(90));Q(r),X(r,o)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},_e=ll,Re=ul;var eu={usingClientEntryPoint:!1,Events:[bo,Co,ko,Ee,Ae,ll]},tu={findFiberByHostInstance:wo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{ot=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:k,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jl(e))throw Error(i(299));var n=!1,r="",o=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(o=t.onRecoverableError)),t=Dl(e,1,!1,null,0,n,0,r,o),e[go]=t.current,zr(8===e.nodeType?e.parentNode:e),new Vl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Yl(t))throw Error(i(200));return Zl(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,o=!1,a="",s=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(o=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zl(t,null,e,1,null!=n?n:null,o,0,a,s),e[go]=t.current,zr(e),r)for(e=0;e<r.length;e++)o=(o=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Gl(t)},t.render=function(e,t,n){if(!Yl(t))throw Error(i(200));return Zl(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yl(e))throw Error(i(40));return!!e._reactRootContainer&&(ul((function(){Zl(null,null,e,!1,(function(){e._reactRootContainer=null,e[go]=null}))})),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Yl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return Zl(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>dn,hasStandardBrowserEnv:()=>fn,hasStandardBrowserWebWorkerEnv:()=>pn,navigator:()=>hn,origin:()=>gn});var o=n(43),i=n(950),a=(n(358),"popstate");function s(){return p((function(e,t){let{pathname:n,search:r,hash:o}=e.location;return d("",{pathname:n,search:r,hash:o},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:h(t)}),null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return{pathname:"string"===typeof e?e:e.pathname,search:"",hash:"",..."string"===typeof t?f(t):t,state:n,key:t&&t.key||r||Math.random().toString(36).substring(2,10)}}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function p(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:o=document.defaultView,v5Compat:i=!1}=r,s=o.history,l="POP",f=null,p=g();function g(){return(s.state||{idx:null}).idx}function m(){l="POP";let e=g(),t=null==e?null:e-p;p=e,f&&f({action:l,location:v.location,delta:t})}function y(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),c(t,`No window.location.(origin|href) available to create URL for href: ${n}`),new URL(n,t)}null==p&&(p=0,s.replaceState({...s.state,idx:p},""));let v={get action(){return l},get location(){return e(o,s)},listen(e){if(f)throw new Error("A history only accepts one active listener");return o.addEventListener(a,m),f=e,()=>{o.removeEventListener(a,m),f=null}},createHref:e=>t(o,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l="PUSH";let r=d(v.location,e,t);n&&n(r,e),p=g()+1;let a=u(r,p),c=v.createHref(r);try{s.pushState(a,"",c)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;o.location.assign(c)}i&&f&&f({action:l,location:v.location,delta:1})},replace:function(e,t){l="REPLACE";let r=d(v.location,e,t);n&&n(r,e),p=g();let o=u(r,p),a=v.createHref(r);s.replaceState(o,"",a),i&&f&&f({action:l,location:v.location,delta:0})},go:e=>s.go(e)};return v}function g(e,t){return m(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function m(e,t,n,r){let o=P(("string"===typeof t?f(t):t).pathname||"/",n);if(null==o)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let a=null;for(let s=0;null==a&&s<i.length;++s){let e=R(o);a=A(i[s],e,r)}return a}function y(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=(e,o,i)=>{let a={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:o,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),`Absolute route path "${a.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),a.relativePath=a.relativePath.slice(r.length));let s=L([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,`Index routes must not have child routes. Please remove all child routes from route path "${s}".`),y(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:E(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{if(""!==e.path&&e.path?.includes("?"))for(let n of v(e.path))o(e,t,n);else o(e,t)})),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,o=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return o?[i,""]:[i];let a=v(r.join("/")),s=[];return s.push(...a.map((e=>""===e?i:[i,e].join("/")))),o&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}var w=/^:[\w-]+$/,b=3,C=2,k=1,S=10,T=-2,I=e=>"*"===e;function E(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=T),t&&(r+=C),n.filter((e=>!I(e))).reduce(((e,t)=>e+(w.test(t)?b:""===t?k:S)),r)}function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,o={},i="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],c=s===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),d=e.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(o,u.params),a.push({params:o,pathname:L([i,u.pathname]),pathnameBase:q(L([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=L([i,u.pathnameBase]))}return a}function _(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];l("*"===e||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),o+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":""!==e&&"/"!==e&&(o+="(?:(?=\\/|$))");let i=new RegExp(o,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let i=o[0],a=i.replace(/(.)\/+$/,"$1"),s=o.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:o}=t;if("*"===r){let e=s[n]||"";a=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=s[n];return e[r]=o&&!c?void 0:(c||"").replace(/%2F/g,"/"),e}),{}),pathname:i,pathnameBase:a,pattern:e}}function R(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return l(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function P(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function O(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function x(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function M(e){let t=x(e);return t.map(((e,n)=>n===t.length-1?e.pathname:e.pathnameBase))}function N(e,t,n){let r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=f(e):(r={...e},c(!r.pathname||!r.pathname.includes("?"),O("?","pathname","search",r)),c(!r.pathname||!r.pathname.includes("#"),O("#","pathname","hash",r)),c(!r.search||!r.search.includes("#"),O("#","search","hash",r)));let i,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)i=n;else{let e=t.length-1;if(!o&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:n,search:r="",hash:o=""}="string"===typeof e?f(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:U(r),hash:F(o)}}(r,i),u=s&&"/"!==s&&s.endsWith("/"),d=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!u&&!d||(l.pathname+="/"),l}var L=e=>e.join("/").replace(/\/\/+/g,"/"),q=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),U=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var D=["POST","PUT","PATCH","DELETE"],B=(new Set(D),["GET",...D]);new Set(B),Symbol("ResetLoaderData");var z=o.createContext(null);z.displayName="DataRouter";var $=o.createContext(null);$.displayName="DataRouterState";var j=o.createContext({isTransitioning:!1});j.displayName="ViewTransition";var K=o.createContext(new Map);K.displayName="Fetchers";var W=o.createContext(null);W.displayName="Await";var Q=o.createContext(null);Q.displayName="Navigation";var V=o.createContext(null);V.displayName="Location";var G=o.createContext({outlet:null,matches:[],isDataRoute:!1});G.displayName="Route";var J=o.createContext(null);J.displayName="RouteError";function Y(){return null!=o.useContext(V)}function X(){return c(Y(),"useLocation() may be used only in the context of a <Router> component."),o.useContext(V).location}var Z="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ee(e){o.useContext(Q).static||o.useLayoutEffect(e)}function te(){let{isDataRoute:e}=o.useContext(G);return e?function(){let{router:e}=ue("useNavigate"),t=he("useNavigate"),n=o.useRef(!1);ee((()=>{n.current=!0}));let r=o.useCallback((async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(n.current,Z),n.current&&("number"===typeof r?e.navigate(r):await e.navigate(r,{fromRouteId:t,...o}))}),[e,t]);return r}():function(){c(Y(),"useNavigate() may be used only in the context of a <Router> component.");let e=o.useContext(z),{basename:t,navigator:n}=o.useContext(Q),{matches:r}=o.useContext(G),{pathname:i}=X(),a=JSON.stringify(M(r)),s=o.useRef(!1);ee((()=>{s.current=!0}));let u=o.useCallback((function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(l(s.current,Z),!s.current)return;if("number"===typeof r)return void n.go(r);let c=N(r,JSON.parse(a),i,"path"===o.relative);null==e&&"/"!==t&&(c.pathname="/"===c.pathname?t:L([t,c.pathname])),(o.replace?n.replace:n.push)(c,o.state,o)}),[t,n,a,i,e]);return u}()}o.createContext(null);function ne(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:n}=o.useContext(G),{pathname:r}=X(),i=JSON.stringify(M(n));return o.useMemo((()=>N(e,JSON.parse(i),r,"path"===t)),[e,i,r,t])}function re(e,t,n,r){c(Y(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:a}=o.useContext(Q),{matches:s}=o.useContext(G),u=s[s.length-1],d=u?u.params:{},h=u?u.pathname:"/",p=u?u.pathnameBase:"/",m=u&&u.route;{let e=m&&m.path||"";ge(h,!m||e.endsWith("*")||e.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${e}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="${e}"> to <Route path="${"/"===e?"*":`${e}/*`}">.`)}let y,v=X();if(t){let e="string"===typeof t?f(t):t;c("/"===p||e.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${e.pathname}" was given in the \`location\` prop.`),y=e}else y=v;let w=y.pathname||"/",b=w;if("/"!==p){let e=p.replace(/^\//,"").split("/");b="/"+w.replace(/^\//,"").split("/").slice(e.length).join("/")}let C=!a&&n&&n.matches&&n.matches.length>0?n.matches:g(e,{pathname:b});l(m||null!=C,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),l(null==C||void 0!==C[C.length-1].route.element||void 0!==C[C.length-1].route.Component||void 0!==C[C.length-1].route.lazy,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=ce(C&&C.map((e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:L([p,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?p:L([p,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),s,n,r);return t&&k?o.createElement(V.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},k):k}function oe(){let e=fe(),t=H(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",e),s=o.createElement(o.Fragment,null,o.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),o.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",o.createElement("code",{style:a},"ErrorBoundary")," or"," ",o.createElement("code",{style:a},"errorElement")," prop on your route.")),o.createElement(o.Fragment,null,o.createElement("h2",null,"Unexpected Application Error!"),o.createElement("h3",{style:{fontStyle:"italic"}},t),n?o.createElement("pre",{style:i},n):null,s)}var ie=o.createElement(oe,null),ae=class extends o.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?o.createElement(G.Provider,{value:this.props.routeContext},o.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function se(e){let{routeContext:t,match:n,children:r}=e,i=o.useContext(z);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),o.createElement(G.Provider,{value:t},r)}function ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==e){if(!n)return null;if(n.errors)e=n.matches;else{if(0!==t.length||n.initialized||!(n.matches.length>0))return null;e=n.matches}}let r=e,i=n?.errors;if(null!=i){let e=r.findIndex((e=>e.route.id&&void 0!==i?.[e.route.id]));c(e>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,e+1))}let a=!1,s=-1;if(n)for(let o=0;o<r.length;o++){let e=r[o];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(s=o),e.route.id){let{loaderData:t,errors:o}=n,i=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!o||void 0===o[e.route.id]);if(e.route.lazy||i){a=!0,r=s>=0?r.slice(0,s+1):[r[0]];break}}}return r.reduceRight(((e,c,l)=>{let u,d=!1,h=null,f=null;n&&(u=i&&c.route.id?i[c.route.id]:void 0,h=c.route.errorElement||ie,a&&(s<0&&0===l?(ge("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),d=!0,f=null):s===l&&(d=!0,f=c.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,l+1)),g=()=>{let t;return t=u?h:d?f:c.route.Component?o.createElement(c.route.Component,null):c.route.element?c.route.element:e,o.createElement(se,{match:c,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(c.route.ErrorBoundary||c.route.errorElement||0===l)?o.createElement(ae,{location:n.location,revalidation:n.revalidation,component:h,error:u,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()}),null)}function le(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ue(e){let t=o.useContext(z);return c(t,le(e)),t}function de(e){let t=o.useContext($);return c(t,le(e)),t}function he(e){let t=function(e){let t=o.useContext(G);return c(t,le(e)),t}(e),n=t.matches[t.matches.length-1];return c(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function fe(){let e=o.useContext(J),t=de("useRouteError"),n=he("useRouteError");return void 0!==e?e:t.errors?.[n]}var pe={};function ge(e,t,n){t||pe[e]||(pe[e]=!0,l(!1,n))}o.memo((function(e){let{routes:t,future:n,state:r}=e;return re(t,void 0,r,n)}));function me(e){let{to:t,replace:n,state:r,relative:i}=e;c(Y(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=o.useContext(Q);l(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:s}=o.useContext(G),{pathname:u}=X(),d=te(),h=N(t,M(s),u,"path"===i),f=JSON.stringify(h);return o.useEffect((()=>{d(JSON.parse(f),{replace:n,state:r,relative:i})}),[d,f,i,n,r]),null}function ye(e){c(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ve(e){let{basename:t="/",children:n=null,location:r,navigationType:i="POP",navigator:a,static:s=!1}=e;c(!Y(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=t.replace(/^\/*/,"/"),d=o.useMemo((()=>({basename:u,navigator:a,static:s,future:{}})),[u,a,s]);"string"===typeof r&&(r=f(r));let{pathname:h="/",search:p="",hash:g="",state:m=null,key:y="default"}=r,v=o.useMemo((()=>{let e=P(h,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:m,key:y},navigationType:i}}),[u,h,p,g,m,y,i]);return l(null!=v,`<Router basename="${u}"> is not able to match the URL "${h}${p}${g}" because it does not start with the basename, so the <Router> won't render anything.`),null==v?null:o.createElement(Q.Provider,{value:d},o.createElement(V.Provider,{children:n,value:v}))}function we(e){let{children:t,location:n}=e;return re(be(t),n)}o.Component;function be(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return o.Children.forEach(e,((e,r)=>{if(!o.isValidElement(e))return;let i=[...t,r];if(e.type===o.Fragment)return void n.push.apply(n,be(e.props.children,i));c(e.type===ye,`[${"string"===typeof e.type?e.type:e.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),c(!e.props.index||!e.props.children,"An index route cannot have child routes.");let a={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=be(e.props.children,i)),n.push(a)})),n}var Ce="get",ke="application/x-www-form-urlencoded";function Se(e){return null!=e&&"string"===typeof e.tagName}var Te=null;var Ie=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ee(e){return null==e||Ie.has(e)?e:(l(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ke}"`),null)}function Ae(e,t){let n,r,o,i,a;if(Se(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?P(a,t):null,n=e.getAttribute("method")||Ce,o=Ee(e.getAttribute("enctype"))||ke,i=new FormData(e)}else if(function(e){return Se(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Se(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?P(s,t):null,n=e.getAttribute("formmethod")||a.getAttribute("method")||Ce,o=Ee(e.getAttribute("formenctype"))||Ee(a.getAttribute("enctype"))||ke,i=new FormData(a,e),!function(){if(null===Te)try{new FormData(document.createElement("form"),0),Te=!1}catch(e){Te=!0}return Te}()){let{name:t,type:n,value:r}=e;if("image"===n){let e=t?`${t}.`:"";i.append(`${e}x`,"0"),i.append(`${e}y`,"0")}else t&&i.append(t,r)}}else{if(Se(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ce,r=null,o=ke,a=e}var s;return i&&"text/plain"===o&&(a=i,i=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:i,body:a}}function _e(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Re(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise((()=>{}))}}function Pe(e){return null!=e&&"string"===typeof e.page}function Oe(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function xe(e,t,n,r,o,i){let a=(e,t)=>!n[t]||e.route.id!==n[t].route.id,s=(e,t)=>n[t].pathname!==e.pathname||n[t].route.path?.endsWith("*")&&n[t].params["*"]!==e.params["*"];return"assets"===i?t.filter(((e,t)=>a(e,t)||s(e,t))):"data"===i?t.filter(((t,i)=>{let c=r.routes[t.route.id];if(!c||!c.hasLoader)return!1;if(a(t,i)||s(t,i))return!0;if(t.route.shouldRevalidate){let r=t.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0})):[]}function Me(e,t){let{includeHydrateFallback:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map((e=>{let r=t.routes[e.route.id];if(!r)return[];let o=[r.module];return r.clientActionModule&&(o=o.concat(r.clientActionModule)),r.clientLoaderModule&&(o=o.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(o=o.concat(r.hydrateFallbackModule)),r.imports&&(o=o.concat(r.imports)),o})).flat(1),[...new Set(r)];var r}function Ne(e,t){let n=new Set,r=new Set(t);return e.reduce(((e,o)=>{if(t&&!Pe(o)&&"script"===o.as&&o.href&&r.has(o.href))return e;let i=JSON.stringify(function(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}(o));return n.has(i)||(n.add(i),e.push({key:i,link:o})),e}),[])}function Le(e){return{__html:e}}Symbol("SingleFetchRedirect");function qe(e){let t="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===t.pathname?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}o.Component;function Ue(e){let{error:t,isOutsideRemixApp:n}=e;console.error(t);let r,i=o.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://remix.run/guides/errors for more information."\n        );\n      '}});if(H(t))return o.createElement(Fe,{title:"Unhandled Thrown Response!"},o.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),i);if(t instanceof Error)r=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);r=new Error(e)}return o.createElement(Fe,{title:"Application Error!",isOutsideRemixApp:n},o.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),o.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},r.stack),i)}function Fe(e){let{title:t,renderScripts:n,isOutsideRemixApp:r,children:i}=e,{routeModules:a}=$e();return a.root?.Layout&&!r?i:o.createElement("html",{lang:"en"},o.createElement("head",null,o.createElement("meta",{charSet:"utf-8"}),o.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),o.createElement("title",null,t)),o.createElement("body",null,o.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},i,n?o.createElement(Je,null):null)))}function He(e){return!0===e}function De(){let e=o.useContext(z);return _e(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Be(){let e=o.useContext($);return _e(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var ze=o.createContext(void 0);function $e(){let e=o.useContext(ze);return _e(e,"You must render this element inside a <HydratedRouter> element"),e}function je(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function Ke(e,t,n){if(n&&!Ge)return[e[0]];if(t){let n=e.findIndex((e=>void 0!==t[e.route.id]));return e.slice(0,n+1)}return e}function We(e){let{page:t,...n}=e,{router:r}=De(),i=o.useMemo((()=>g(r.routes,t,r.basename)),[r.routes,t,r.basename]);return i?o.createElement(Ve,{page:t,matches:i,...n}):null}function Qe(e){let{manifest:t,routeModules:n}=$e(),[r,i]=o.useState([]);return o.useEffect((()=>{let r=!1;return async function(e,t,n){return Ne((await Promise.all(e.map((async e=>{let r=t.routes[e.route.id];if(r){let e=await Re(r,n);return e.links?e.links():[]}return[]})))).flat(1).filter(Oe).filter((e=>"stylesheet"===e.rel||"preload"===e.rel)).map((e=>"stylesheet"===e.rel?{...e,rel:"prefetch",as:"style"}:{...e,rel:"prefetch"})))}(e,t,n).then((e=>{r||i(e)})),()=>{r=!0}}),[e,t,n]),r}function Ve(e){let{page:t,matches:n,...r}=e,i=X(),{manifest:a,routeModules:s}=$e(),{loaderData:c,matches:l}=Be(),u=o.useMemo((()=>xe(t,n,l,a,i,"data")),[t,n,l,a,i]),d=o.useMemo((()=>xe(t,n,l,a,i,"assets")),[t,n,l,a,i]),h=o.useMemo((()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,r=!1;if(n.forEach((t=>{let n=a.routes[t.route.id];n&&n.hasLoader&&(!u.some((e=>e.route.id===t.route.id))&&t.route.id in c&&s[t.route.id]?.shouldRevalidate||n.hasClientLoader?r=!0:e.add(t.route.id))})),0===e.size)return[];let o=qe(t);return r&&e.size>0&&o.searchParams.set("_routes",n.filter((t=>e.has(t.route.id))).map((e=>e.route.id)).join(",")),[o.pathname+o.search]}),[c,i,a,u,n,t,s]),f=o.useMemo((()=>Me(d,a)),[d,a]),p=Qe(d);return o.createElement(o.Fragment,null,h.map((e=>o.createElement("link",{key:e,rel:"prefetch",as:"fetch",href:e,...r}))),f.map((e=>o.createElement("link",{key:e,rel:"modulepreload",href:e,...r}))),p.map((e=>{let{key:t,link:n}=e;return o.createElement("link",{key:t,...n})})))}ze.displayName="FrameworkContext";var Ge=!1;function Je(e){let{manifest:t,serverHandoffString:n,isSpaMode:r,ssr:i,renderMeta:a}=$e(),{router:s,static:c,staticContext:l}=De(),{matches:u}=Be(),d=He(i);a&&(a.didRenderScripts=!0);let h=Ke(u,null,r);o.useEffect((()=>{Ge=!0}),[]);let f=o.useMemo((()=>{let r=l?`window.__reactRouterContext = ${n};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",i=c?`${t.hmr?.runtime?`import ${JSON.stringify(t.hmr.runtime)};`:""}${d?"":`import ${JSON.stringify(t.url)}`};\n${h.map(((e,n)=>{let r=`route${n}`,o=t.routes[e.route.id];_e(o,`Route ${e.route.id} not found in manifest`);let{clientActionModule:i,clientLoaderModule:a,hydrateFallbackModule:s,module:c}=o,l=[...i?[{module:i,varName:`${r}_clientAction`}]:[],...a?[{module:a,varName:`${r}_clientLoader`}]:[],...s?[{module:s,varName:`${r}_HydrateFallback`}]:[],{module:c,varName:`${r}_main`}];return 1===l.length?`import * as ${r} from ${JSON.stringify(c)};`:[l.map((e=>`import * as ${e.varName} from "${e.module}";`)).join("\n"),`const ${r} = {${l.map((e=>`...${e.varName}`)).join(",")}};`].join("\n")})).join("\n")}\n  ${d?`window.__reactRouterManifest = ${JSON.stringify(function(e,t){let n=new Set(t.state.matches.map((e=>e.route.id))),r=t.state.location.pathname.split("/").filter(Boolean),o=["/"];for(r.pop();r.length>0;)o.push(`/${r.join("/")}`),r.pop();o.forEach((e=>{let r=g(t.routes,e,t.basename);r&&r.forEach((e=>n.add(e.route.id)))}));let i=[...n].reduce(((t,n)=>Object.assign(t,{[n]:e.routes[n]})),{});return{...e,routes:i}}(t,s),null,2)};`:""}\n  window.__reactRouterRouteModules = {${h.map(((e,t)=>`${JSON.stringify(e.route.id)}:route${t}`)).join(",")}};\n\nimport(${JSON.stringify(t.entry.module)});`:" ";return o.createElement(o.Fragment,null,o.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Le(r),type:void 0}),o.createElement("script",{...e,suppressHydrationWarning:!0,dangerouslySetInnerHTML:Le(i),type:"module",async:!0}))}),[]),p=Ge?[]:t.entry.imports.concat(Me(h,t,{includeHydrateFallback:!0}));return Ge?null:o.createElement(o.Fragment,null,d?null:o.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin}),o.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin}),(m=p,[...new Set(m)]).map((t=>o.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin}))),f);var m}function Ye(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))}}var Xe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{Xe&&(window.__reactRouterVersion="7.2.0")}catch(Fp){}function Ze(e){let{basename:t,children:n,window:r}=e,i=o.useRef();null==i.current&&(i.current=s({window:r,v5Compat:!0}));let a=i.current,[c,l]=o.useState({action:a.action,location:a.location}),u=o.useCallback((e=>{o.startTransition((()=>l(e)))}),[l]);return o.useLayoutEffect((()=>a.listen(u)),[a,u]),o.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:a})}var et=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,tt=o.forwardRef((function(e,t){let n,{onClick:r,discover:i="render",prefetch:a="none",relative:s,reloadDocument:u,replace:d,state:f,target:p,to:g,preventScrollReset:m,viewTransition:y,...v}=e,{basename:w}=o.useContext(Q),b="string"===typeof g&&et.test(g),C=!1;if("string"===typeof g&&b&&(n=g,Xe))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),n=P(t.pathname,w);t.origin===e.origin&&null!=n?g=n+t.search+t.hash:C=!0}catch(Fp){l(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(Y(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=o.useContext(Q),{hash:i,pathname:a,search:s}=ne(e,{relative:t}),l=a;return"/"!==n&&(l="/"===a?n:L([n,a])),r.createHref({pathname:l,search:s,hash:i})}(g,{relative:s}),[S,T,I]=function(e,t){let n=o.useContext(ze),[r,i]=o.useState(!1),[a,s]=o.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:h}=t,f=o.useRef(null);o.useEffect((()=>{if("render"===e&&s(!0),"viewport"===e){let e=new IntersectionObserver((e=>{e.forEach((e=>{s(e.isIntersecting)}))}),{threshold:.5});return f.current&&e.observe(f.current),()=>{e.disconnect()}}}),[e]),o.useEffect((()=>{if(r){let e=setTimeout((()=>{s(!0)}),100);return()=>{clearTimeout(e)}}}),[r]);let p=()=>{i(!0)},g=()=>{i(!1),s(!1)};return n?"intent"!==e?[a,f,{}]:[a,f,{onFocus:je(c,p),onBlur:je(l,g),onMouseEnter:je(u,p),onMouseLeave:je(d,g),onTouchStart:je(h,p)}]:[!1,f,{}]}(a,v),E=function(e){let{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=te(),l=X(),u=ne(e,{relative:a});return o.useCallback((o=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(o,t)){o.preventDefault();let t=void 0!==n?n:h(l)===h(u);c(e,{replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:s})}}),[l,c,u,n,r,t,e,i,a,s])}(g,{replace:d,state:f,target:p,preventScrollReset:m,relative:s,viewTransition:y});let A=o.createElement("a",{...v,...I,href:n||k,onClick:C||u?r:function(e){r&&r(e),e.defaultPrevented||E(e)},ref:Ye(t,T),target:p,"data-discover":b||"render"!==i?void 0:"true"});return S&&!b?o.createElement(o.Fragment,null,A,o.createElement(We,{page:k})):A}));tt.displayName="Link",o.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:a=!1,style:s,to:l,viewTransition:u,children:d,...h}=e,f=ne(l,{relative:h.relative}),p=X(),g=o.useContext($),{navigator:m,basename:y}=o.useContext(Q),v=null!=g&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.useContext(j);c(null!=n,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=ot("useViewTransitionState"),i=ne(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=P(n.currentLocation.pathname,r)||n.currentLocation.pathname,s=P(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=_(i.pathname,s)||null!=_(i.pathname,a)}(f)&&!0===u,w=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,b=p.pathname,C=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(b=b.toLowerCase(),C=C?C.toLowerCase():null,w=w.toLowerCase()),C&&y&&(C=P(C,y)||C);const k="/"!==w&&w.endsWith("/")?w.length-1:w.length;let S,T=b===w||!a&&b.startsWith(w)&&"/"===b.charAt(k),I=null!=C&&(C===w||!a&&C.startsWith(w)&&"/"===C.charAt(w.length)),E={isActive:T,isPending:I,isTransitioning:v},A=T?n:void 0;S="function"===typeof i?i(E):[i,T?"active":null,I?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R="function"===typeof s?s(E):s;return o.createElement(tt,{...h,"aria-current":A,className:S,ref:t,style:R,to:l,viewTransition:u},"function"===typeof d?d(E):d)})).displayName="NavLink";var nt=o.forwardRef(((e,t)=>{let{discover:n="render",fetcherKey:r,navigate:i,reloadDocument:a,replace:s,state:l,method:u=Ce,action:d,onSubmit:f,relative:p,preventScrollReset:g,viewTransition:m,...y}=e,v=st(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:n}=o.useContext(Q),r=o.useContext(G);c(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...ne(e||".",{relative:t})},s=X();if(null==e){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some((e=>""===e))){e.delete("index"),t.filter((e=>e)).forEach((t=>e.append("index",t)));let n=e.toString();a.search=n?`?${n}`:""}}e&&"."!==e||!i.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==n&&(a.pathname="/"===a.pathname?n:L([n,a.pathname]));return h(a)}(d,{relative:p}),b="get"===u.toLowerCase()?"get":"post",C="string"===typeof d&&et.test(d);return o.createElement("form",{ref:t,method:b,action:w,onSubmit:a?f:e=>{if(f&&f(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,n=t?.getAttribute("formmethod")||u;v(t||e.currentTarget,{fetcherKey:r,method:n,navigate:i,replace:s,state:l,relative:p,preventScrollReset:g,viewTransition:m})},...y,"data-discover":C||"render"!==n?void 0:"true"})}));function rt(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ot(e){let t=o.useContext(z);return c(t,rt(e)),t}nt.displayName="Form";var it=0,at=()=>`__${String(++it)}__`;function st(){let{router:e}=ot("useSubmit"),{basename:t}=o.useContext(Q),n=he("useRouteId");return o.useCallback((async function(r){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:i,method:a,encType:s,formData:c,body:l}=Ae(r,t);if(!1===o.navigate){let t=o.fetcherKey||at();await e.fetch(t,n,o.action||i,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||a,formEncType:o.encType||s,flushSync:o.flushSync})}else await e.navigate(o.action||i,{preventScrollReset:o.preventScrollReset,formData:c,body:l,formMethod:o.method||a,formEncType:o.encType||s,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})}),[e,t,n])}new TextEncoder;function ct(e,t){return function(){return e.apply(t,arguments)}}const{toString:lt}=Object.prototype,{getPrototypeOf:ut}=Object,dt=(ht=Object.create(null),e=>{const t=lt.call(e);return ht[t]||(ht[t]=t.slice(8,-1).toLowerCase())});var ht;const ft=e=>(e=e.toLowerCase(),t=>dt(t)===e),pt=e=>t=>typeof t===e,{isArray:gt}=Array,mt=pt("undefined");const yt=ft("ArrayBuffer");const vt=pt("string"),wt=pt("function"),bt=pt("number"),Ct=e=>null!==e&&"object"===typeof e,kt=e=>{if("object"!==dt(e))return!1;const t=ut(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},St=ft("Date"),Tt=ft("File"),It=ft("Blob"),Et=ft("FileList"),At=ft("URLSearchParams"),[_t,Rt,Pt,Ot]=["ReadableStream","Request","Response","Headers"].map(ft);function xt(e,t){let n,r,{allOwnKeys:o=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),gt(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=o?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let a;for(n=0;n<i;n++)a=r[n],t.call(null,e[a],a,e)}}function Mt(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,o=n.length;for(;o-- >0;)if(r=n[o],t===r.toLowerCase())return r;return null}const Nt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Lt=e=>!mt(e)&&e!==Nt;const qt=(Ut="undefined"!==typeof Uint8Array&&ut(Uint8Array),e=>Ut&&e instanceof Ut);var Ut;const Ft=ft("HTMLFormElement"),Ht=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Dt=ft("RegExp"),Bt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};xt(n,((n,o)=>{let i;!1!==(i=t(n,o,e))&&(r[o]=i||n)})),Object.defineProperties(e,r)};const zt=ft("AsyncFunction"),$t=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],Nt.addEventListener("message",(e=>{let{source:t,data:o}=e;t===Nt&&o===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),Nt.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,wt(Nt.postMessage)),jt="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Nt):"undefined"!==typeof process&&process.nextTick||$t,Kt={isArray:gt,isArrayBuffer:yt,isBuffer:function(e){return null!==e&&!mt(e)&&null!==e.constructor&&!mt(e.constructor)&&wt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||wt(e.append)&&("formdata"===(t=dt(e))||"object"===t&&wt(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&yt(e.buffer),t},isString:vt,isNumber:bt,isBoolean:e=>!0===e||!1===e,isObject:Ct,isPlainObject:kt,isReadableStream:_t,isRequest:Rt,isResponse:Pt,isHeaders:Ot,isUndefined:mt,isDate:St,isFile:Tt,isBlob:It,isRegExp:Dt,isFunction:wt,isStream:e=>Ct(e)&&wt(e.pipe),isURLSearchParams:At,isTypedArray:qt,isFileList:Et,forEach:xt,merge:function e(){const{caseless:t}=Lt(this)&&this||{},n={},r=(r,o)=>{const i=t&&Mt(n,o)||o;kt(n[i])&&kt(r)?n[i]=e(n[i],r):kt(r)?n[i]=e({},r):gt(r)?n[i]=r.slice():n[i]=r};for(let o=0,i=arguments.length;o<i;o++)arguments[o]&&xt(arguments[o],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return xt(t,((t,r)=>{n&&wt(t)?e[r]=ct(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let o,i,a;const s={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)a=o[i],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&ut(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:dt,kindOfTest:ft,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(gt(e))return e;let t=e.length;if(!bt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ft,hasOwnProperty:Ht,hasOwnProp:Ht,reduceDescriptors:Bt,freezeMethods:e=>{Bt(e,((t,n)=>{if(wt(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];wt(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return gt(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Mt,global:Nt,isContextDefined:Lt,isSpecCompliantForm:function(e){return!!(e&&wt(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ct(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const o=gt(e)?[]:{};return xt(e,((e,t)=>{const i=n(e,r+1);!mt(i)&&(o[t]=i)})),t[r]=void 0,o}}return e};return n(e,0)},isAsyncFn:zt,isThenable:e=>e&&(Ct(e)||wt(e))&&wt(e.then)&&wt(e.catch),setImmediate:$t,asap:jt};function Wt(e,t,n,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Kt.inherits(Wt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Kt.toJSONObject(this.config),code:this.code,status:this.status}}});const Qt=Wt.prototype,Vt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Vt[e]={value:e}})),Object.defineProperties(Wt,Vt),Object.defineProperty(Qt,"isAxiosError",{value:!0}),Wt.from=(e,t,n,r,o,i)=>{const a=Object.create(Qt);return Kt.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Wt.call(a,e.message,t,n,r,o),a.cause=e,a.name=e.name,i&&Object.assign(a,i),a};const Gt=Wt;function Jt(e){return Kt.isPlainObject(e)||Kt.isArray(e)}function Yt(e){return Kt.endsWith(e,"[]")?e.slice(0,-2):e}function Xt(e,t,n){return e?e.concat(t).map((function(e,t){return e=Yt(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Zt=Kt.toFlatObject(Kt,{},null,(function(e){return/^is[A-Z]/.test(e)}));const en=function(e,t,n){if(!Kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Kt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Kt.isUndefined(t[e])}))).metaTokens,o=n.visitor||l,i=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Kt.isSpecCompliantForm(t);if(!Kt.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Kt.isDate(e))return e.toISOString();if(!s&&Kt.isBlob(e))throw new Gt("Blob is not supported. Use a Buffer instead.");return Kt.isArrayBuffer(e)||Kt.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,o){let s=e;if(e&&!o&&"object"===typeof e)if(Kt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Kt.isArray(e)&&function(e){return Kt.isArray(e)&&!e.some(Jt)}(e)||(Kt.isFileList(e)||Kt.endsWith(n,"[]"))&&(s=Kt.toArray(e)))return n=Yt(n),s.forEach((function(e,r){!Kt.isUndefined(e)&&null!==e&&t.append(!0===a?Xt([n],r,i):null===a?n:n+"[]",c(e))})),!1;return!!Jt(e)||(t.append(Xt(o,n,i),c(e)),!1)}const u=[],d=Object.assign(Zt,{defaultVisitor:l,convertValue:c,isVisitable:Jt});if(!Kt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Kt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Kt.forEach(n,(function(n,i){!0===(!(Kt.isUndefined(n)||null===n)&&o.call(t,n,Kt.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])})),u.pop()}}(e),t};function tn(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function nn(e,t){this._pairs=[],e&&en(e,this,t)}const rn=nn.prototype;rn.append=function(e,t){this._pairs.push([e,t])},rn.toString=function(e){const t=e?function(t){return e.call(this,t,tn)}:tn;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const on=nn;function an(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sn(e,t,n){if(!t)return e;const r=n&&n.encode||an;Kt.isFunction(n)&&(n={serialize:n});const o=n&&n.serialize;let i;if(i=o?o(t,n):Kt.isURLSearchParams(t)?t.toString():new on(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const cn=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Kt.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},ln={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},un={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:on,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},dn="undefined"!==typeof window&&"undefined"!==typeof document,hn="object"===typeof navigator&&navigator||void 0,fn=dn&&(!hn||["ReactNative","NativeScript","NS"].indexOf(hn.product)<0),pn="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,gn=dn&&window.location.href||"http://localhost",mn={...r,...un};const yn=function(e){function t(e,n,r,o){let i=e[o++];if("__proto__"===i)return!0;const a=Number.isFinite(+i),s=o>=e.length;if(i=!i&&Kt.isArray(r)?r.length:i,s)return Kt.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!a;r[i]&&Kt.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],o)&&Kt.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const o=n.length;let i;for(r=0;r<o;r++)i=n[r],t[i]=e[i];return t}(r[i])),!a}if(Kt.isFormData(e)&&Kt.isFunction(e.entries)){const n={};return Kt.forEachEntry(e,((e,r)=>{t(function(e){return Kt.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const vn={transitional:ln,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,o=Kt.isObject(e);o&&Kt.isHTMLForm(e)&&(e=new FormData(e));if(Kt.isFormData(e))return r?JSON.stringify(yn(e)):e;if(Kt.isArrayBuffer(e)||Kt.isBuffer(e)||Kt.isStream(e)||Kt.isFile(e)||Kt.isBlob(e)||Kt.isReadableStream(e))return e;if(Kt.isArrayBufferView(e))return e.buffer;if(Kt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return en(e,new mn.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return mn.isNode&&Kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Kt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return en(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||r?(t.setContentType("application/json",!1),function(e,t,n){if(Kt.isString(e))try{return(t||JSON.parse)(e),Kt.trim(e)}catch(Fp){if("SyntaxError"!==Fp.name)throw Fp}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||vn.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Kt.isResponse(e)||Kt.isReadableStream(e))return e;if(e&&Kt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Fp){if(n){if("SyntaxError"===Fp.name)throw Gt.from(Fp,Gt.ERR_BAD_RESPONSE,this,null,this.response);throw Fp}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:mn.classes.FormData,Blob:mn.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Kt.forEach(["delete","get","head","post","put","patch"],(e=>{vn.headers[e]={}}));const wn=vn,bn=Kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Cn=Symbol("internals");function kn(e){return e&&String(e).trim().toLowerCase()}function Sn(e){return!1===e||null==e?e:Kt.isArray(e)?e.map(Sn):String(e)}function Tn(e,t,n,r,o){return Kt.isFunction(r)?r.call(this,t,n):(o&&(t=n),Kt.isString(t)?Kt.isString(r)?-1!==t.indexOf(r):Kt.isRegExp(r)?r.test(t):void 0:void 0)}class In{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function o(e,t,n){const o=kn(t);if(!o)throw new Error("header name must be a non-empty string");const i=Kt.findKey(r,o);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=Sn(e))}const i=(e,t)=>Kt.forEach(e,((e,n)=>o(e,n,t)));if(Kt.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Kt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,o;return e&&e.split("\n").forEach((function(e){o=e.indexOf(":"),n=e.substring(0,o).trim().toLowerCase(),r=e.substring(o+1).trim(),!n||t[n]&&bn[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Kt.isHeaders(e))for(const[a,s]of e.entries())o(s,a,n);else null!=e&&o(t,e,n);return this}get(e,t){if(e=kn(e)){const n=Kt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Kt.isFunction(t))return t.call(this,e,n);if(Kt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=kn(e)){const n=Kt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Tn(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function o(e){if(e=kn(e)){const o=Kt.findKey(n,e);!o||t&&!Tn(0,n[o],o,t)||(delete n[o],r=!0)}}return Kt.isArray(e)?e.forEach(o):o(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const o=t[n];e&&!Tn(0,this[o],o,e,!0)||(delete this[o],r=!0)}return r}normalize(e){const t=this,n={};return Kt.forEach(this,((r,o)=>{const i=Kt.findKey(n,o);if(i)return t[i]=Sn(r),void delete t[o];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(o):String(o).trim();a!==o&&delete t[o],t[a]=Sn(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Kt.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Kt.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[Cn]=this[Cn]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=kn(e);t[r]||(!function(e,t){const n=Kt.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,o){return this[r].call(this,t,e,n,o)},configurable:!0})}))}(n,e),t[r]=!0)}return Kt.isArray(e)?e.forEach(r):r(e),this}}In.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Kt.reduceDescriptors(In.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Kt.freezeMethods(In);const En=In;function An(e,t){const n=this||wn,r=t||n,o=En.from(r.headers);let i=r.data;return Kt.forEach(e,(function(e){i=e.call(n,i,o.normalize(),t?t.status:void 0)})),o.normalize(),i}function _n(e){return!(!e||!e.__CANCEL__)}function Rn(e,t,n){Gt.call(this,null==e?"canceled":e,Gt.ERR_CANCELED,t,n),this.name="CanceledError"}Kt.inherits(Rn,Gt,{__CANCEL__:!0});const Pn=Rn;function On(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Gt("Request failed with status code "+n.status,[Gt.ERR_BAD_REQUEST,Gt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const xn=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let o,i=0,a=0;return t=void 0!==t?t:1e3,function(s){const c=Date.now(),l=r[a];o||(o=c),n[i]=s,r[i]=c;let u=a,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),c-o<t)return;const h=l&&c-l;return h?Math.round(1e3*d/h):void 0}};const Mn=function(e,t){let n,r,o=0,i=1e3/t;const a=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();o=i,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-o;for(var s=arguments.length,c=new Array(s),l=0;l<s;l++)c[l]=arguments[l];t>=i?a(c,e):(n=c,r||(r=setTimeout((()=>{r=null,a(n)}),i-t)))},()=>n&&a(n)]},Nn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const o=xn(50,250);return Mn((n=>{const i=n.loaded,a=n.lengthComputable?n.total:void 0,s=i-r,c=o(s);r=i;e({loaded:i,total:a,progress:a?i/a:void 0,bytes:s,rate:c||void 0,estimated:c&&a&&i<=a?(a-i)/c:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},Ln=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},qn=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Kt.asap((()=>e(...n)))},Un=mn.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,mn.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(mn.origin),mn.navigator&&/(msie|trident)/i.test(mn.navigator.userAgent)):()=>!0,Fn=mn.hasStandardBrowserEnv?{write(e,t,n,r,o,i){const a=[e+"="+encodeURIComponent(t)];Kt.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Kt.isString(r)&&a.push("path="+r),Kt.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Hn(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&r||0==n?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Dn=e=>e instanceof En?{...e}:e;function Bn(e,t){t=t||{};const n={};function r(e,t,n,r){return Kt.isPlainObject(e)&&Kt.isPlainObject(t)?Kt.merge.call({caseless:r},e,t):Kt.isPlainObject(t)?Kt.merge({},t):Kt.isArray(t)?t.slice():t}function o(e,t,n,o){return Kt.isUndefined(t)?Kt.isUndefined(e)?void 0:r(void 0,e,0,o):r(e,t,0,o)}function i(e,t){if(!Kt.isUndefined(t))return r(void 0,t)}function a(e,t){return Kt.isUndefined(t)?Kt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,o,i){return i in t?r(n,o):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t,n)=>o(Dn(e),Dn(t),0,!0)};return Kt.forEach(Object.keys(Object.assign({},e,t)),(function(r){const i=c[r]||o,a=i(e[r],t[r],r);Kt.isUndefined(a)&&i!==s||(n[r]=a)})),n}const zn=e=>{const t=Bn({},e);let n,{data:r,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:a,headers:s,auth:c}=t;if(t.headers=s=En.from(s),t.url=sn(Hn(t.baseURL,t.url),e.params,e.paramsSerializer),c&&s.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Kt.isFormData(r))if(mn.hasStandardBrowserEnv||mn.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(mn.hasStandardBrowserEnv&&(o&&Kt.isFunction(o)&&(o=o(t)),o||!1!==o&&Un(t.url))){const e=i&&a&&Fn.read(a);e&&s.set(i,e)}return t},$n="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=zn(e);let o=r.data;const i=En.from(r.headers).normalize();let a,s,c,l,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let g=new XMLHttpRequest;function m(){if(!g)return;const r=En.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders());On((function(e){t(e),p()}),(function(e){n(e),p()}),{data:d&&"text"!==d&&"json"!==d?g.response:g.responseText,status:g.status,statusText:g.statusText,headers:r,config:e,request:g}),g=null}g.open(r.method.toUpperCase(),r.url,!0),g.timeout=r.timeout,"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){g&&4===g.readyState&&(0!==g.status||g.responseURL&&0===g.responseURL.indexOf("file:"))&&setTimeout(m)},g.onabort=function(){g&&(n(new Gt("Request aborted",Gt.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new Gt("Network Error",Gt.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const o=r.transitional||ln;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Gt(t,o.clarifyTimeoutError?Gt.ETIMEDOUT:Gt.ECONNABORTED,e,g)),g=null},void 0===o&&i.setContentType(null),"setRequestHeader"in g&&Kt.forEach(i.toJSON(),(function(e,t){g.setRequestHeader(t,e)})),Kt.isUndefined(r.withCredentials)||(g.withCredentials=!!r.withCredentials),d&&"json"!==d&&(g.responseType=r.responseType),f&&([c,u]=Nn(f,!0),g.addEventListener("progress",c)),h&&g.upload&&([s,l]=Nn(h),g.upload.addEventListener("progress",s),g.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(a=t=>{g&&(n(!t||t.type?new Pn(null,e,g):t),g.abort(),g=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===mn.protocols.indexOf(y)?n(new Gt("Unsupported protocol "+y+":",Gt.ERR_BAD_REQUEST,e)):g.send(o||null)}))},jn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const o=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Gt?t:new Pn(t instanceof Error?t.message:t))}};let i=t&&setTimeout((()=>{i=null,o(new Gt(`timeout ${t} of ms exceeded`,Gt.ETIMEDOUT))}),t);const a=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((e=>e.addEventListener("abort",o)));const{signal:s}=r;return s.unsubscribe=()=>Kt.asap(a),s}},Kn=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,o=0;for(;o<n;)r=o+t,yield e.slice(o,r),o=r},Wn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Qn=(e,t,n,r)=>{const o=async function*(e,t){for await(const n of Wn(e))yield*Kn(n,t)}(e,t);let i,a=0,s=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return s(),void e.close();let i=r.byteLength;if(n){let e=a+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw s(t),t}},cancel:e=>(s(e),o.return())},{highWaterMark:2})},Vn="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Gn=Vn&&"function"===typeof ReadableStream,Jn=Vn&&("function"===typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Yn=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Fp){return!1}},Xn=Gn&&Yn((()=>{let e=!1;const t=new Request(mn.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Zn=Gn&&Yn((()=>Kt.isReadableStream(new Response("").body))),er={stream:Zn&&(e=>e.body)};var tr;Vn&&(tr=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!er[e]&&(er[e]=Kt.isFunction(tr[e])?t=>t[e]():(t,n)=>{throw new Gt(`Response type '${e}' is not supported`,Gt.ERR_NOT_SUPPORT,n)})})));const nr=async(e,t)=>{const n=Kt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Kt.isBlob(e))return e.size;if(Kt.isSpecCompliantForm(e)){const t=new Request(mn.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Kt.isArrayBufferView(e)||Kt.isArrayBuffer(e)?e.byteLength:(Kt.isURLSearchParams(e)&&(e+=""),Kt.isString(e)?(await Jn(e)).byteLength:void 0)})(t):n},rr=Vn&&(async e=>{let{url:t,method:n,data:r,signal:o,cancelToken:i,timeout:a,onDownloadProgress:s,onUploadProgress:c,responseType:l,headers:u,withCredentials:d="same-origin",fetchOptions:h}=zn(e);l=l?(l+"").toLowerCase():"text";let f,p=jn([o,i&&i.toAbortSignal()],a);const g=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let m;try{if(c&&Xn&&"get"!==n&&"head"!==n&&0!==(m=await nr(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Kt.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Ln(m,Nn(qn(c)));r=Qn(n.body,65536,e,t)}}Kt.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:o?d:void 0});let i=await fetch(f);const a=Zn&&("stream"===l||"response"===l);if(Zn&&(s||a&&g)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=i[t]}));const t=Kt.toFiniteNumber(i.headers.get("content-length")),[n,r]=s&&Ln(t,Nn(qn(s),!0))||[];i=new Response(Qn(i.body,65536,n,(()=>{r&&r(),g&&g()})),e)}l=l||"text";let y=await er[Kt.findKey(er,l)||"text"](i,e);return!a&&g&&g(),await new Promise(((t,n)=>{On(t,n,{data:y,headers:En.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})}))}catch(y){if(g&&g(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new Gt("Network Error",Gt.ERR_NETWORK,e,f),{cause:y.cause||y});throw Gt.from(y,y&&y.code,e,f)}}),or={http:null,xhr:$n,fetch:rr};Kt.forEach(or,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Fp){}Object.defineProperty(e,"adapterName",{value:t})}}));const ir=e=>`- ${e}`,ar=e=>Kt.isFunction(e)||null===e||!1===e,sr=e=>{e=Kt.isArray(e)?e:[e];const{length:t}=e;let n,r;const o={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!ar(n)&&(r=or[(t=String(n)).toLowerCase()],void 0===r))throw new Gt(`Unknown adapter '${t}'`);if(r)break;o[t||"#"+i]=r}if(!r){const e=Object.entries(o).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(ir).join("\n"):" "+ir(e[0]):"as no adapter specified";throw new Gt("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function cr(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pn(null,e)}function lr(e){cr(e),e.headers=En.from(e.headers),e.data=An.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return sr(e.adapter||wn.adapter)(e).then((function(t){return cr(e),t.data=An.call(e,e.transformResponse,t),t.headers=En.from(t.headers),t}),(function(t){return _n(t)||(cr(e),t&&t.response&&(t.response.data=An.call(e,e.transformResponse,t.response),t.response.headers=En.from(t.response.headers))),Promise.reject(t)}))}const ur="1.8.1",dr={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{dr[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const hr={};dr.transitional=function(e,t,n){function r(e,t){return"[Axios v1.8.1] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,o,i)=>{if(!1===e)throw new Gt(r(o," has been removed"+(t?" in "+t:"")),Gt.ERR_DEPRECATED);return t&&!hr[o]&&(hr[o]=!0,console.warn(r(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,o,i)}},dr.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const fr={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Gt("options must be an object",Gt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const i=r[o],a=t[i];if(a){const t=e[i],n=void 0===t||a(t,i,e);if(!0!==n)throw new Gt("option "+i+" must be "+n,Gt.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Gt("Unknown option "+i,Gt.ERR_BAD_OPTION)}},validators:dr},pr=fr.validators;class gr{constructor(e){this.defaults=e,this.interceptors={request:new cn,response:new cn}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Fp){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Bn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:o}=t;void 0!==n&&fr.assertOptions(n,{silentJSONParsing:pr.transitional(pr.boolean),forcedJSONParsing:pr.transitional(pr.boolean),clarifyTimeoutError:pr.transitional(pr.boolean)},!1),null!=r&&(Kt.isFunction(r)?t.paramsSerializer={serialize:r}:fr.assertOptions(r,{encode:pr.function,serialize:pr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),fr.assertOptions(t,{baseUrl:pr.spelling("baseURL"),withXsrfToken:pr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&Kt.merge(o.common,o[t.method]);o&&Kt.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete o[e]})),t.headers=En.concat(i,o);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const c=[];let l;this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));let u,d=0;if(!s){const e=[lr.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=a.length;let h=t;for(d=0;d<u;){const e=a[d++],t=a[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{l=lr.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return sn(Hn((e=Bn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Kt.forEach(["delete","get","head","options"],(function(e){gr.prototype[e]=function(t,n){return this.request(Bn(n||{},{method:e,url:t,data:(n||{}).data}))}})),Kt.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,o){return this.request(Bn(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}gr.prototype[e]=t(),gr.prototype[e+"Form"]=t(!0)}));const mr=gr;class yr{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,o){n.reason||(n.reason=new Pn(e,r,o),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new yr((function(t){e=t})),cancel:e}}}const vr=yr;const wr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(wr).forEach((e=>{let[t,n]=e;wr[n]=t}));const br=wr;const Cr=function e(t){const n=new mr(t),r=ct(mr.prototype.request,n);return Kt.extend(r,mr.prototype,n,{allOwnKeys:!0}),Kt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Bn(t,n))},r}(wn);Cr.Axios=mr,Cr.CanceledError=Pn,Cr.CancelToken=vr,Cr.isCancel=_n,Cr.VERSION=ur,Cr.toFormData=en,Cr.AxiosError=Gt,Cr.Cancel=Cr.CanceledError,Cr.all=function(e){return Promise.all(e)},Cr.spread=function(e){return function(t){return e.apply(null,t)}},Cr.isAxiosError=function(e){return Kt.isObject(e)&&!0===e.isAxiosError},Cr.mergeConfig=Bn,Cr.AxiosHeaders=En,Cr.formToJSON=e=>yn(Kt.isHTMLForm(e)?new FormData(e):e),Cr.getAdapter=sr,Cr.HttpStatusCode=br,Cr.default=Cr;const kr=Cr,Sr={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Tr=400,Ir=499,Er=500,Ar=599,_r=[Sr.OPENID_SCOPE,Sr.PROFILE_SCOPE,Sr.OFFLINE_ACCESS_SCOPE],Rr=[..._r,Sr.EMAIL_SCOPE],Pr="Content-Type",Or="Content-Length",xr="Retry-After",Mr="X-AnchorMailbox",Nr="x-ms-request-id",Lr="x-ms-httpver",qr="active-account-filters",Ur="common",Fr="organizations",Hr="consumers",Dr="access_token",Br="xms_cc",zr={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},$r={PLAIN:"plain",S256:"S256"},jr={QUERY:"query",FRAGMENT:"fragment"},Kr={...jr,FORM_POST:"form_post"},Wr="authorization_code",Qr="refresh_token",Vr="MSSTS",Gr="ADFS",Jr="Generic",Yr="-",Xr=".",Zr={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},eo="appmetadata",to="1",no="authority-metadata",ro=86400,oo="config",io="cache",ao="network",so="hardcoded_values",co={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},lo={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},uo=60,ho=3600,fo="throttling",po="retry-after, h429",go="invalid_grant",mo="client_mismatch",yo="username",vo="password",wo=200,bo=400,Co="1",ko="3",So="4",To="2",Io="4",Eo="5",Ao="0",_o="1",Ro="2",Po="3",Oo="4",xo="pop";var Mo;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(Mo||(Mo={}));class No{constructor(e,t,n){this.level=Mo.Info;const r=e||No.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:Mo.Info,this.correlationId=r.correlationId||Sr.EMPTY_STRING,this.packageName=t||Sr.EMPTY_STRING,this.packageVersion=n||Sr.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Mo.Info}}clone(e,t,n){return new No({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=`${`[${(new Date).toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${Mo[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,n,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:Mo.Error,containsPii:!1,correlationId:t||Sr.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:Mo.Error,containsPii:!0,correlationId:t||Sr.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:Mo.Warning,containsPii:!1,correlationId:t||Sr.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:Mo.Warning,containsPii:!0,correlationId:t||Sr.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:Mo.Info,containsPii:!1,correlationId:t||Sr.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:Mo.Info,containsPii:!0,correlationId:t||Sr.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:Mo.Verbose,containsPii:!1,correlationId:t||Sr.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:Mo.Verbose,containsPii:!0,correlationId:t||Sr.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:Mo.Trace,containsPii:!1,correlationId:t||Sr.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:Mo.Trace,containsPii:!0,correlationId:t||Sr.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const Lo="AAD",qo="OIDC",Uo="none",Fo="unexpected_error",Ho="post_request_failed",Do={[Fo]:"Unexpected error in authentication.",[Ho]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Bo extends Error{constructor(e,t,n){super(t?`${e}: ${t}`:e),Object.setPrototypeOf(this,Bo.prototype),this.errorCode=e||Sr.EMPTY_STRING,this.errorMessage=t||Sr.EMPTY_STRING,this.subError=n||Sr.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function zo(e,t){return new Bo(e,t?`${Do[e]} ${t}`:Do[e])}const $o="client_info_decoding_error",jo="client_info_empty_error",Ko="token_parsing_error",Wo="null_or_empty_token",Qo="endpoints_resolution_error",Vo="network_error",Go="openid_config_error",Jo="hash_not_deserialized",Yo="invalid_state",Xo="state_mismatch",Zo="state_not_found",ei="nonce_mismatch",ti="auth_time_not_found",ni="max_age_transpired",ri="multiple_matching_tokens",oi="multiple_matching_accounts",ii="multiple_matching_appMetadata",ai="request_cannot_be_made",si="cannot_remove_empty_scope",ci="cannot_append_scopeset",li="empty_input_scopeset",ui="device_code_polling_cancelled",di="device_code_expired",hi="device_code_unknown_error",fi="no_account_in_silent_request",pi="invalid_cache_record",gi="invalid_cache_environment",mi="no_account_found",yi="no_crypto_object",vi="unexpected_credential_type",wi="invalid_assertion",bi="invalid_client_credential",Ci="token_refresh_required",ki="user_timeout_reached",Si="token_claims_cnf_required_for_signedjwt",Ti="authorization_code_missing_from_server_response",Ii="binding_key_not_removed",Ei="end_session_endpoint_not_supported",Ai="key_id_missing",_i="no_network_connectivity",Ri="user_canceled",Pi="missing_tenant_id_error",Oi="method_not_implemented",xi="nested_app_auth_bridge_disabled",Mi={[$o]:"The client info could not be parsed/decoded correctly",[jo]:"The client info was empty",[Ko]:"Token cannot be parsed",[Wo]:"The token is null or empty",[Qo]:"Endpoints cannot be resolved",[Vo]:"Network request failed",[Go]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Jo]:"The hash parameters could not be deserialized",[Yo]:"State was not the expected format",[Xo]:"State mismatch error",[Zo]:"State not found",[ei]:"Nonce mismatch error",[ti]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[ni]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ri]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[oi]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[ii]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ai]:"Token request cannot be made without authorization code or refresh token.",[si]:"Cannot remove null or empty scope from ScopeSet",[ci]:"Cannot append ScopeSet",[li]:"Empty input ScopeSet cannot be processed",[ui]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[di]:"Device code is expired.",[hi]:"Device code stopped polling for unknown reasons.",[fi]:"Please pass an account object, silent flow is not supported without account information",[pi]:"Cache record object was null or undefined.",[gi]:"Invalid environment when attempting to create cache entry",[mi]:"No account found in cache for given key.",[yi]:"No crypto object detected.",[vi]:"Unexpected credential type.",[wi]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[bi]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Ci]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[ki]:"User defined timeout for device code polling reached",[Si]:"Cannot generate a POP jwt if the token_claims are not populated",[Ti]:"Server response does not contain an authorization code to proceed",[Ii]:"Could not remove the credential's binding key from storage.",[Ei]:"The provided authority does not support logout",[Ai]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[_i]:"No network connectivity. Check your internet connection.",[Ri]:"User cancelled the flow.",[Pi]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Oi]:"This method has not been implemented",[xi]:"The nested app auth bridge is disabled"};class Ni extends Bo{constructor(e,t){super(e,t?`${Mi[e]}: ${t}`:Mi[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Ni.prototype)}}function Li(e,t){return new Ni(e,t)}const qi={createNewGuid:()=>{throw Li(Oi)},base64Decode:()=>{throw Li(Oi)},base64Encode:()=>{throw Li(Oi)},base64UrlEncode:()=>{throw Li(Oi)},encodeKid:()=>{throw Li(Oi)},async getPublicKeyThumbprint(){throw Li(Oi)},async removeTokenBindingKey(){throw Li(Oi)},async clearKeystore(){throw Li(Oi)},async signJwt(){throw Li(Oi)},async hashString(){throw Li(Oi)}},Ui="@azure/msal-common",Fi="15.2.0";function Hi(e,t){const n=function(e){if(!e)throw Li(Wo);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw Li(Ko);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(r){throw Li(Ko)}}function Di(e,t){if(0===t||Date.now()-3e5>e+t)throw Li(ni)}function Bi(){return Math.round((new Date).getTime()/1e3)}function zi(e,t){const n=Number(e)||0;return Bi()+t>n}function $i(e){return[Vi(e),Gi(e),Ji(e),Yi(e),Xi(e)].join(Yr).toLowerCase()}function ji(e,t,n,r,o){return{credentialType:Zr.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o}}function Ki(e,t,n,r,o,i,a,s,c,l,u,d,h,f,p){const g={homeAccountId:e,credentialType:Zr.ACCESS_TOKEN,secret:n,cachedAt:Bi().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||lo.BEARER};if(d&&(g.userAssertionHash=d),l&&(g.refreshOn=l.toString()),f&&(g.requestedClaims=f,g.requestedClaimsHash=p),g.tokenType?.toLowerCase()!==lo.BEARER.toLowerCase())switch(g.credentialType=Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME,g.tokenType){case lo.POP:const e=Hi(n,c);if(!e?.cnf?.kid)throw Li(Si);g.keyId=e.cnf.kid;break;case lo.SSH:g.keyId=h}return g}function Wi(e,t,n,r,o,i,a){const s={credentialType:Zr.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function Qi(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function Vi(e){return[e.homeAccountId,e.environment].join(Yr).toLowerCase()}function Gi(e){const t=e.credentialType===Zr.REFRESH_TOKEN&&e.familyId||e.clientId;return[e.credentialType,t,e.realm||""].join(Yr).toLowerCase()}function Ji(e){return(e.target||"").toLowerCase()}function Yi(e){return(e.requestedClaimsHash||"").toLowerCase()}function Xi(e){return e.tokenType&&e.tokenType.toLowerCase()!==lo.BEARER.toLowerCase()?e.tokenType.toLowerCase():""}function Zi(){return Bi()+ro}function ea(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function ta(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function na(e){return e.expiresAt<=Bi()}const ra="redirect_uri_empty",oa="claims_request_parsing_error",ia="authority_uri_insecure",aa="url_parse_error",sa="empty_url_error",ca="empty_input_scopes_error",la="invalid_prompt_value",ua="invalid_claims",da="token_request_empty",ha="logout_request_empty",fa="invalid_code_challenge_method",pa="pkce_params_missing",ga="invalid_cloud_discovery_metadata",ma="invalid_authority_metadata",ya="untrusted_authority",va="missing_ssh_jwk",wa="missing_ssh_kid",ba="missing_nonce_authentication_header",Ca="invalid_authentication_header",ka="cannot_set_OIDCOptions",Sa="cannot_allow_platform_broker",Ta="authority_mismatch",Ia={[ra]:"A redirect URI is required for all calls, and none has been set.",[oa]:"Could not parse the given claims request object.",[ia]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[aa]:"URL could not be parsed into appropriate segments.",[sa]:"URL was empty or null.",[ca]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[la]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[ua]:"Given claims parameter must be a stringified JSON object.",[da]:"Token request was empty and not found in cache.",[ha]:"The logout request was null or undefined.",[fa]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[pa]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[ga]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[ma]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[ya]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[va]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[wa]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[ba]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[Ca]:"Invalid authentication header provided",[ka]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Sa]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Ta]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Ea extends Bo{constructor(e){super(e,Ia[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Ea.prototype)}}function Aa(e){return new Ea(e)}class _a{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(Fp){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach((e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}})),t}static trimArrayEntries(e){return e.map((e=>e.trim()))}static removeEmptyStringsFromArray(e){return e.filter((e=>!!e))}static jsonParseHelper(e){try{return JSON.parse(e)}catch(Fp){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class Ra{constructor(e){const t=e?_a.trimArrayEntries([...e]):[],n=t?_a.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw Aa(ca);this.scopes=new Set,n.forEach((e=>this.scopes.add(e)))}static fromString(e){const t=(e||Sr.EMPTY_STRING).split(" ");return new Ra(t)}static createSearchScopes(e){const t=new Ra(e);return t.containsOnlyOIDCScopes()?t.removeScope(Sr.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new Ra(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every((e=>this.containsScope(e))))}containsOnlyOIDCScopes(){let e=0;return Rr.forEach((t=>{this.containsScope(t)&&(e+=1)})),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach((e=>this.appendScope(e)))}catch(Fp){throw Li(ci)}}removeScope(e){if(!e)throw Li(si);this.scopes.delete(e.trim())}removeOIDCScopes(){Rr.forEach((e=>{this.scopes.delete(e)}))}unionScopeSets(e){if(!e)throw Li(li);const t=new Set;return e.scopes.forEach((e=>t.add(e.toLowerCase()))),this.scopes.forEach((e=>t.add(e.toLowerCase()))),t}intersectingScopeSets(e){if(!e)throw Li(li);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach((t=>e.push(t))),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return Sr.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Pa(e,t){if(!e)throw Li(jo);try{const n=t(e);return JSON.parse(n)}catch(Fp){throw Li($o)}}function Oa(e){if(!e)throw Li($o);const t=e.split(Xr,2);return{uid:t[0],utid:t.length<2?Sr.EMPTY_STRING:t[1]}}function xa(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Ma(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s}=r,c=o||a||s||"";return{tenantId:c,localAccountId:t||n||"",name:i,isHomeTenant:xa(c,e)}}return{tenantId:n,localAccountId:t,isHomeTenant:xa(n,e)}}function Na(e,t,n,r){let o=e;if(t){const{isHomeTenant:n,...r}=t;o={...e,...r}}if(n){const{isHomeTenant:t,...i}=Ma(e.homeAccountId,e.localAccountId,e.tenantId,n);return o={...o,...i,idTokenClaims:n,idToken:r},o}return o}const La=0,qa=1,Ua=2,Fa=3;function Ha(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class Da{generateAccountId(){return[this.homeAccountId,this.environment].join(Yr).toLowerCase()}generateAccountKey(){return Da.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map((e=>[e.tenantId,e])))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Yr).toLowerCase()}static createAccount(e,t,n){const r=new Da;let o;t.authorityType===qa?r.authorityType=Gr:t.protocolMode===Lo?r.authorityType=Vr:r.authorityType=Jr,e.clientInfo&&n&&(o=Pa(e.clientInfo,n)),r.clientInfo=e.clientInfo,r.homeAccountId=e.homeAccountId,r.nativeAccountId=e.nativeAccountId;const i=e.environment||t&&t.getPreferredCache();if(!i)throw Li(gi);r.environment=i,r.realm=o?.utid||Ha(e.idTokenClaims)||"",r.localAccountId=o?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"";const a=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn,s=e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null;if(r.username=a||s||"",r.name=e.idTokenClaims?.name||"",r.cloudGraphHostName=e.cloudGraphHostName,r.msGraphHost=e.msGraphHost,e.tenantProfiles)r.tenantProfiles=e.tenantProfiles;else{const t=Ma(e.homeAccountId,r.localAccountId,r.realm,e.idTokenClaims);r.tenantProfiles=[t]}return r}static createFromAccountInfo(e,t,n){const r=new Da;return r.authorityType=e.authorityType||Jr,r.homeAccountId=e.homeAccountId,r.localAccountId=e.localAccountId,r.nativeAccountId=e.nativeAccountId,r.realm=e.tenantId,r.environment=e.environment,r.username=e.username,r.name=e.name,r.cloudGraphHostName=t,r.msGraphHost=n,r.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),r}static generateHomeAccountId(e,t,n,r,o){if(t!==qa&&t!==Ua){if(e)try{const t=Pa(e,r.base64Decode);if(t.uid&&t.utid)return`${t.uid}.${t.utid}`}catch(Fp){}n.warning("No client info in response")}return o?.sub||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function Ba(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function za(e){if(!e||e.indexOf("=")<0)return null;try{const t=Ba(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.error||n.error_description||n.state)return n}catch(Fp){throw Li(Jo)}return null}class $a{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Aa(sa);e.includes("#")||(this._urlString=$a.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return _a.endsWith(t,"?")?t=t.slice(0,-1):_a.endsWith(t,"?/")&&(t=t.slice(0,-2)),_a.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(Fp){throw Aa(aa)}if(!e.HostNameAndPort||!e.PathSegments)throw Aa(aa);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Aa(ia)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return $a.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==Ur&&n[0]!==Fr||(n[0]=e),$a.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Aa(aa);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter((e=>e&&e.length>0)),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Aa(aa);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===Sr.FORWARD_SLASH){const n=new $a(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new $a(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!za(e)}}const ja={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Ka={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Wa=new Set;function Qa(e,t,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),e&&t){const o=Va(t,e);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Va(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}Ka.metadata.forEach((e=>{e.aliases.forEach((e=>{Wa.add(e)}))}));const Ga="cache_quota_exceeded",Ja="cache_error_unknown",Ya={[Ga]:"Exceeded cache storage capacity.",[Ja]:"Unexpected error occurred when using cache storage."};class Xa extends Error{constructor(e,t){const n=t||(Ya[e]?Ya[e]:Ya[Ja]);super(`${e}: ${n}`),Object.setPrototypeOf(this,Xa.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}class Za{constructor(e,t,n,r){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(Ui,Fi),this.staticAuthorityOptions=r}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);if(t.length>1){return t.sort((e=>e.idTokenClaims?-1:1))[0]}return 1===t.length?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap((e=>this.getTenantProfilesFromAccountEntity(e,t?.tenantId,t)))}getTenantedAccountInfoByFilter(e,t,n,r){let o,i=null;if(r&&!this.tenantProfileMatchesFilter(n,r))return null;const a=this.getIdToken(e,t,n.tenantId);return a&&(o=Hi(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(o,r))?null:(i=Na(e,n,o,a?.secret),i)}getTenantProfilesFromAccountEntity(e,t,n){const r=e.getAccountInfo();let o=r.tenantProfiles||new Map;const i=this.getTokenKeys();if(t){const e=o.get(t);if(!e)return[];o=new Map([[t,e]])}const a=[];return o.forEach((e=>{const t=this.getTenantedAccountInfoByFilter(r,i,e,n);t&&a.push(t)})),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw Li(pi);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==n?.idToken&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==n?.accessToken&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==n?.refreshToken&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(Fp){throw this.commonLogger?.error("CacheManager.saveCacheRecord: failed"),Fp instanceof Error?(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${Fp.message}`,t),"QuotaExceededError"===Fp.name||"NS_ERROR_DOM_QUOTA_REACHED"===Fp.name||Fp.message.includes("exceeded the quota")?(this.commonLogger?.error("CacheManager.saveCacheRecord: exceeded storage quota",t),new Xa(Ga)):new Xa(Fp.name,Fp.message)):(this.commonLogger?.errorPii(`CacheManager.saveCacheRecord: ${Fp}`,t),new Xa(Ja))}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=Ra.fromString(e.target),i=[];r.accessToken.forEach((e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const t=this.getAccessTokenCredential(e);if(t&&this.credentialMatchesFilter(t,n)){Ra.fromString(t.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(e))}})),await Promise.all(i),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),n=[];return t.forEach((t=>{if(!this.isAccountKey(t,e.homeAccountId))return;const r=this.getAccount(t,this.commonLogger);if(!r)return;if(e.homeAccountId&&!this.matchHomeAccountId(r,e.homeAccountId))return;if(e.username&&!this.matchUsername(r.username,e.username))return;if(e.environment&&!this.matchEnvironment(r,e.environment))return;if(e.realm&&!this.matchRealm(r,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(r,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(r,e.authorityType))return;const o={localAccountId:e?.localAccountId,name:e?.name},i=r.tenantProfiles?.filter((e=>this.tenantProfileMatchesFilter(e,o)));i&&0===i.length||n.push(r)})),n}isAccountKey(e,t,n){return!(e.split(Yr).length<3)&&(!(t&&!e.toLowerCase().includes(t.toLowerCase()))&&!(n&&!e.toLowerCase().includes(n.toLowerCase())))}isCredentialKey(e){if(e.split(Yr).length<6)return!1;const t=e.toLowerCase();if(-1===t.indexOf(Zr.ID_TOKEN.toLowerCase())&&-1===t.indexOf(Zr.ACCESS_TOKEN.toLowerCase())&&-1===t.indexOf(Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===t.indexOf(Zr.REFRESH_TOKEN.toLowerCase()))return!1;if(t.indexOf(Zr.REFRESH_TOKEN.toLowerCase())>-1){const e=`${Zr.REFRESH_TOKEN}${Yr}${this.clientId}${Yr}`,n=`${Zr.REFRESH_TOKEN}${Yr}${to}${Yr}`;if(-1===t.indexOf(e.toLowerCase())&&-1===t.indexOf(n.toLowerCase()))return!1}else if(-1===t.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===lo.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach((t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))})),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach((t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)})),n}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach((e=>{t.push(this.removeAccount(e))})),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),n=e.generateAccountId(),r=[];t.idToken.forEach((e=>{0===e.indexOf(n)&&this.removeIdToken(e)})),t.accessToken.forEach((e=>{0===e.indexOf(n)&&r.push(this.removeAccessToken(e))})),t.refreshToken.forEach((e=>{0===e.indexOf(n)&&this.removeRefreshToken(e)})),await Promise.all(r)}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===lo.POP){const e=t.keyId;if(e)try{await this.cryptoImpl.removeTokenBindingKey(e)}catch(n){throw Li(Ii)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach((e=>{this.isAppMetadata(e)&&this.removeItem(e)})),!0}readAccountFromCache(e){const t=Da.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Zr.ID_TOKEN,clientId:this.clientId,realm:n},a=this.getIdTokensByFilter(i,t),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let t=a;if(!n){const n=new Map;a.forEach(((t,r)=>{t.realm===e.tenantId&&n.set(r,t)}));const r=n.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),n.values().next().value;t=n}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),t.forEach(((e,t)=>{this.removeIdToken(t)})),r&&o&&r.addFields({multiMatchedID:a.size},o),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const n=t&&t.idToken||this.getTokenKeys().idToken,r=new Map;return n.forEach((t=>{if(!this.idTokenKeyMatchesFilter(t,{clientId:this.clientId,...e}))return;const n=this.getIdTokenCredential(t);n&&this.credentialMatchesFilter(n,e)&&r.set(t,n)})),r}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const a=Ra.createSearchScopes(t.scopes),s=t.authenticationScheme||lo.BEARER,c=s&&s.toLowerCase()!==lo.BEARER.toLowerCase()?Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME:Zr.ACCESS_TOKEN,l={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:r||e.tenantId,target:a,tokenType:s,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},u=n&&n.accessToken||this.getTokenKeys().accessToken,d=[];u.forEach((e=>{if(this.accessTokenKeyMatchesFilter(e,l,!0)){const t=this.getAccessTokenCredential(e);t&&this.credentialMatchesFilter(t,l)&&d.push(t)}}));const h=d.length;return h<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):h>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach((e=>{this.removeAccessToken($i(e))})),o&&i&&o.addFields({multiMatchedAT:d.length},i),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),n=[];return t.accessToken.forEach((t=>{if(!this.accessTokenKeyMatchesFilter(t,e,!0))return;const r=this.getAccessTokenCredential(t);r&&this.credentialMatchesFilter(r,e)&&n.push(r)})),n}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?to:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Zr.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=n&&n.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach((e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}}));const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&r&&o&&r.addFields({multiMatchedRT:l},o),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map((e=>n[e])),o=r.length;if(o<1)return null;if(o>1)throw Li(ii);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==to)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){return!(t.toLowerCase()!==e.name?.toLowerCase())}matchUsername(e,t){return!(!e||"string"!==typeof e||t?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){const o=new $a(r).getUrlComponents().HostNameAndPort;n=Qa(o,e.cloudDiscoveryMetadata?.metadata,oo,t)||Qa(o,Ka.metadata,so,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){return!(e.realm?.toLowerCase()!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==Zr.ACCESS_TOKEN&&e.credentialType!==Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return Ra.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(eo)}isAuthorityMetadata(e){return-1!==e.indexOf(no)}generateAuthorityMetadataCacheKey(e){return`${no}-${this.clientId}-${e}`}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class es extends Za{async setAccount(){throw Li(Oi)}getAccount(){throw Li(Oi)}async setIdTokenCredential(){throw Li(Oi)}getIdTokenCredential(){throw Li(Oi)}async setAccessTokenCredential(){throw Li(Oi)}getAccessTokenCredential(){throw Li(Oi)}async setRefreshTokenCredential(){throw Li(Oi)}getRefreshTokenCredential(){throw Li(Oi)}setAppMetadata(){throw Li(Oi)}getAppMetadata(){throw Li(Oi)}setServerTelemetry(){throw Li(Oi)}getServerTelemetry(){throw Li(Oi)}setAuthorityMetadata(){throw Li(Oi)}getAuthorityMetadata(){throw Li(Oi)}getAuthorityMetadataKeys(){throw Li(Oi)}setThrottlingCache(){throw Li(Oi)}getThrottlingCache(){throw Li(Oi)}removeItem(){throw Li(Oi)}getKeys(){throw Li(Oi)}getAccountKeys(){throw Li(Oi)}getTokenKeys(){throw Li(Oi)}}const ts={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},ns={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:Mo.Info,correlationId:Sr.EMPTY_STRING},rs={claimsBasedCachingEnabled:!1},os={async sendGetRequestAsync(){throw Li(Oi)},async sendPostRequestAsync(){throw Li(Oi)}},is={sku:Sr.SKU,version:Fi,cpu:Sr.EMPTY_STRING,os:Sr.EMPTY_STRING},as={clientSecret:Sr.EMPTY_STRING,clientAssertion:void 0},ss={azureCloudInstance:Uo,tenant:`${Sr.DEFAULT_COMMON_TENANT}`},cs={application:{appName:"",appVersion:""}};function ls(e){return e.authOptions.authority.options.protocolMode===qo}const us={sendGetRequestAsync:()=>Promise.reject(Li(Oi)),sendPostRequestAsync:()=>Promise.reject(Li(Oi))},ds="acquireTokenByCode",hs="acquireTokenByRefreshToken",fs="acquireTokenSilent",ps="acquireTokenSilentAsync",gs="acquireTokenPopup",ms="acquireTokenPreRedirect",ys="acquireTokenRedirect",vs="cryptoOptsGetPublicKeyThumbprint",ws="cryptoOptsSignJwt",bs="silentCacheClientAcquireToken",Cs="silentIframeClientAcquireToken",ks="awaitConcurrentIframe",Ss="silentRefreshClientAcquireToken",Ts="ssoSilent",Is="standardInteractionClientGetDiscoveredAuthority",Es="fetchAccountIdWithNativeBroker",As="nativeInteractionClientAcquireToken",_s="networkClientSendPostRequestAsync",Rs="refreshTokenClientExecutePostToTokenEndpoint",Ps="authorizationCodeClientExecutePostToTokenEndpoint",Os="refreshTokenClientExecuteTokenRequest",xs="refreshTokenClientAcquireToken",Ms="refreshTokenClientAcquireTokenWithCachedRefreshToken",Ns="refreshTokenClientAcquireTokenByRefreshToken",Ls="refreshTokenClientCreateTokenRequestBody",qs="acquireTokenFromCache",Us="silentFlowClientAcquireCachedToken",Fs="silentFlowClientGenerateResultFromCacheRecord",Hs="acquireTokenBySilentIframe",Ds="initializeBaseRequest",Bs="initializeSilentRequest",zs="initializeClientApplication",$s="initializeCache",js="silentIframeClientTokenHelper",Ks="silentHandlerInitiateAuthRequest",Ws="silentHandlerMonitorIframeForHash",Qs="silentHandlerLoadFrame",Vs="silentHandlerLoadFrameSync",Gs="standardInteractionClientCreateAuthCodeClient",Js="standardInteractionClientGetClientConfiguration",Ys="standardInteractionClientInitializeAuthorizationRequest",Xs="standardInteractionClientInitializeAuthorizationCodeRequest",Zs="getAuthCodeUrl",ec="handleCodeResponseFromServer",tc="handleCodeResponse",nc="updateTokenEndpointAuthority",rc="authClientAcquireToken",oc="authClientExecuteTokenRequest",ic="authClientCreateTokenRequestBody",ac="authClientCreateQueryString",sc="popTokenGenerateCnf",cc="popTokenGenerateKid",lc="handleServerTokenResponse",uc="deserializeResponse",dc="authorityFactoryCreateDiscoveredInstance",hc="authorityResolveEndpointsAsync",fc="authorityGetCloudDiscoveryMetadataFromNetwork",pc="authorityUpdateCloudDiscoveryMetadata",gc="authorityGetEndpointMetadataFromNetwork",mc="authorityUpdateEndpointMetadata",yc="authorityUpdateMetadataWithRegionalInformation",vc="regionDiscoveryDetectRegion",wc="regionDiscoveryGetRegionFromIMDS",bc="regionDiscoveryGetCurrentVersion",Cc="acquireTokenByCodeAsync",kc="handleRedirectPromise",Sc="handleNativeRedirectPromise",Tc="nativeMessageHandlerHandshake",Ic="removeHiddenIframe",Ec="clearTokensAndKeysWithClaims",Ac="cacheManagerGetRefreshToken",_c="importExistingCache",Rc="setUserData",Pc="localStorageUpdated",Oc="generatePkceCodes",xc="generateCodeVerifier",Mc="generateCodeChallengeFromVerifier",Nc="sha256Digest",Lc="getRandomValues",qc="generateHKDF",Uc="generateBaseKey",Fc="base64Decode",Hc="urlEncodeArr",Dc="encrypt",Bc="decrypt",zc=(new Map([[ds,"ATByCode"],[hs,"ATByRT"],[fs,"ATS"],[ps,"ATSAsync"],[gs,"ATPopup"],[ys,"ATRedirect"],[vs,"CryptoGetPKThumb"],[ws,"CryptoSignJwt"],[bs,"SltCacheClientAT"],[Cs,"SltIframeClientAT"],[Ss,"SltRClientAT"],[Ts,"SsoSlt"],[Is,"StdIntClientGetDiscAuth"],[Es,"FetchAccIdWithNtvBroker"],[As,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[_s,"NetClientSendPost"],[Rs,"RTClientExecPost"],[Ps,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Os,"RTClientExecTReq"],[xs,"RTClientAT"],[Ms,"RTClientATWithCachedRT"],[Ns,"RTClientATByRT"],[Ls,"RTClientCreateTReqBody"],[qs,"ATFromCache"],[Us,"SltFlowClientATCached"],[Fs,"SltFlowClientGenResFromCache"],[Hs,"ATBySltIframe"],[Ds,"InitBaseReq"],[Bs,"InitSltReq"],[zs,"InitClientApplication"],[$s,"InitCache"],[_c,"importCache"],[Rc,"setUserData"],[Pc,"localStorageUpdated"],[js,"SIClientTHelper"],[Ks,"SHandlerInitAuthReq"],[Ws,"SltHandlerMonitorIframeForHash"],[Qs,"SHandlerLoadFrame"],[Vs,"SHandlerLoadFrameSync"],[Gs,"StdIntClientCreateAuthCodeClient"],[Js,"StdIntClientGetClientConf"],[Ys,"StdIntClientInitAuthReq"],[Xs,"StdIntClientInitAuthCodeReq"],[Zs,"GetAuthCodeUrl"],[ec,"HandleCodeResFromServer"],[tc,"HandleCodeResp"],[nc,"UpdTEndpointAuth"],[rc,"AuthClientAT"],[oc,"AuthClientExecTReq"],[ic,"AuthClientCreateTReqBody"],[ac,"AuthClientCreateQueryStr"],[sc,"PopTGenCnf"],[cc,"PopTGenKid"],[lc,"HandleServerTRes"],[uc,"DeserializeRes"],[dc,"AuthFactCreateDiscInst"],[hc,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[fc,"AuthGetCDMetaFromNet"],[pc,"AuthUpdCDMeta"],[gc,"AuthUpdCDMetaFromNet"],[mc,"AuthUpdEndpointMeta"],[yc,"AuthUpdMetaWithRegInfo"],[vc,"RegDiscDetectReg"],[wc,"RegDiscGetRegFromIMDS"],[bc,"RegDiscGetCurrentVer"],[Cc,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[kc,"HandleRedirectPromise"],[Sc,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[Tc,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[Ic,"RemoveHiddenIframe"],[Ec,"ClearTAndKeysWithClaims"],[Ac,"CacheManagerGetRT"],[Oc,"GenPkceCodes"],[xc,"GenCodeVerifier"],[Mc,"GenCodeChallengeFromVerifier"],[Nc,"Sha256Digest"],[Lc,"GetRandomValues"],[qc,"genHKDF"],[Uc,"genBaseKey"],[Fc,"b64Decode"],[Hc,"urlEncArr"],[Dc,"encrypt"],[Bc,"decrypt"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount"]);class $c{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class jc{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:zc,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new $c}}startPerformanceMeasurement(){return new $c}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Kc="invalid_grant",Wc=483,Qc=600,Vc="msal",Gc=30,Jc="msal.js.browser",Yc="53ee284d-920a-4b59-9d30-a60315b26836",Xc="ppnbnpeolgkicgegkbkbjmhlideopiji",Zc="MATS",el="Handshake",tl="HandshakeResponse",nl="GetToken",rl="Response",ol="localStorage",il="sessionStorage",al="memoryStorage",sl="GET",cl="POST",ll="authority",ul="request.state",dl="nonce.id_token",hl="request.origin",fl="urlHash",pl="request.params",gl="interaction.status",ml="ccs.credential",yl="request.correlationId",vl="request.native",wl="msal.account.keys",bl="msal.token.keys",Cl="wrapper.sku",kl="wrapper.version",Sl=861,Tl=862,Il=863,El=865,Al=866,_l=61,Rl=961,Pl=962;var Ol;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(Ol||(Ol={}));const xl="startup",Ml="login",Nl="logout",Ll="acquireToken",ql="ssoSilent",Ul="handleRedirect",Fl="none",Hl={scopes:_r},Dl="@azure/msal-react",Bl="msal.db",zl=`${Bl}.keys`,$l=0,jl=1,Kl=2,Wl=3,Ql=4,Vl=5,Gl=[$l,Vl,Ql];class Jl{navigateInternal(e,t){return Jl.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Jl.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e=>{setTimeout((()=>{e(!0)}),t.timeout)}))}}class Yl extends Bo{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,Yl.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function Xl(e,t,n){return new Yl(e,t,n)}const Zl="pkce_not_created",eu="crypto_nonexistent",tu="empty_navigate_uri",nu="hash_empty_error",ru="no_state_in_hash",ou="hash_does_not_contain_known_properties",iu="unable_to_parse_state",au="state_interaction_type_mismatch",su="interaction_in_progress",cu="popup_window_error",lu="empty_window_error",uu="user_cancelled",du="monitor_popup_timeout",hu="monitor_window_timeout",fu="redirect_in_iframe",pu="block_iframe_reload",gu="block_nested_popups",mu="iframe_closed_prematurely",yu="silent_logout_unsupported",vu="no_account_error",wu="silent_prompt_value_error",bu="no_token_request_cache_error",Cu="unable_to_parse_token_request_cache_error",ku="no_cached_authority_error",Su="auth_request_not_set_error",Tu="invalid_cache_type",Iu="non_browser_environment",Eu="database_not_open",Au="no_network_connectivity",_u="post_request_failed",Ru="get_request_failed",Pu="failed_to_parse_response",Ou="unable_to_load_token",xu="crypto_key_not_found",Mu="auth_code_required",Nu="auth_code_or_nativeAccountId_required",Lu="spa_code_and_nativeAccountId_present",qu="database_unavailable",Uu="unable_to_acquire_token_from_native_platform",Fu="native_handshake_timeout",Hu="native_extension_not_installed",Du="native_connection_not_established",Bu="uninitialized_public_client_application",zu="native_prompt_not_supported",$u="invalid_base64_string",ju="invalid_pop_token_request",Ku="failed_to_build_headers",Wu="failed_to_parse_headers",Qu="For more visit: aka.ms/msaljs/browser-errors",Vu={[Zl]:"The PKCE code challenge and verifier could not be generated.",[eu]:"The crypto object or function is not available.",[tu]:"Navigation URI is empty. Please check stack trace for more info.",[nu]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${Qu}`,[ru]:"Hash does not contain state. Please verify that the request originated from msal.",[ou]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${Qu}`,[iu]:"Unable to parse state. Please verify that the request originated from msal.",[au]:"Hash contains state but the interaction type does not match the caller.",[su]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${Qu}`,[cu]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[lu]:"window.open returned null or undefined window object.",[uu]:"User cancelled the flow.",[du]:`Token acquisition in popup failed due to timeout.  ${Qu}`,[hu]:`Token acquisition in iframe failed due to timeout.  ${Qu}`,[fu]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[pu]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${Qu}`,[gu]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[mu]:"The iframe being monitored was closed prematurely.",[yu]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[vu]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[wu]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[bu]:"No token request found in cache.",[Cu]:"The cached token request could not be parsed.",[ku]:"No cached authority found.",[Su]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Tu]:"Invalid cache type",[Iu]:"Login and token requests are not supported in non-browser environments.",[Eu]:"Database is not open!",[Au]:"No network connectivity. Check your internet connection.",[_u]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[Ru]:"Network request failed. Please check the network trace to determine root cause.",[Pu]:"Failed to parse network response. Check network trace.",[Ou]:"Error loading token to cache.",[xu]:"Cryptographic Key or Keypair not found in browser storage.",[Mu]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Nu]:"An authorization code or nativeAccountId must be provided to this flow.",[Lu]:"Request cannot contain both spa code and native account id.",[qu]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Uu]:`Unable to acquire token from native platform.  ${Qu}`,[Fu]:"Timed out while attempting to establish connection to browser extension",[Hu]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[Du]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${Qu}`,[Bu]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${Qu}`,[zu]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[$u]:"Invalid base64 encoded string.",[ju]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Ku]:"Failed to build request headers object.",[Wu]:"Failed to parse response headers"};class Gu extends Bo{constructor(e,t){super(e,Vu[e],t),Object.setPrototypeOf(this,Gu.prototype),this.name="BrowserAuthError"}}function Ju(e,t){return new Gu(e,t)}class Yu{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=Xu(t);try{n=await fetch(e,{method:sl,headers:i})}catch(Fp){throw Ju(window.navigator.onLine?Ru:Au)}r=Zu(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(Fp){throw Xl(Ju(Pu),o,r)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=Xu(t);let o,i=0,a={};try{o=await fetch(e,{method:cl,headers:r,body:n})}catch(Fp){throw Ju(window.navigator.onLine?_u:Au)}a=Zu(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(Fp){throw Xl(Ju(Pu),i,a)}}}function Xu(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach((e=>{let[n,r]=e;t.append(n,r)})),t}catch(Fp){throw Ju(Ku)}}function Zu(e){try{const t={};return e.forEach(((e,n)=>{t[n]=e})),t}catch(Fp){throw Ju(Wu)}}function ed(e){return encodeURIComponent(nd(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function td(e){return rd(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function nd(e){return rd((new TextEncoder).encode(e))}function rd(e){const t=Array.from(e,(e=>String.fromCodePoint(e))).join("");return btoa(t)}function od(e){return(new TextDecoder).decode(id(e))}function id(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Ju($u)}const n=atob(t);return Uint8Array.from(n,(e=>e.codePointAt(0)||0))}const ad="AES-GCM",sd="HKDF",cd="SHA-256",ld=new Uint8Array([1,0,1]),ud="0123456789abcdef",dd=new Uint32Array(1),hd="encrypt",fd="decrypt",pd={name:"RSASSA-PKCS1-v1_5",hash:cd,modulusLength:2048,publicExponent:ld};async function gd(e,t,n){t?.addQueueMeasurement(Nc,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(cd,r)}function md(e){return window.crypto.getRandomValues(e)}function yd(){return window.crypto.getRandomValues(dd),dd[0]}function vd(){const e=Date.now(),t=1024*yd()+(1023&yd()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=yd();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=ud.charAt(n[s]>>>4),a+=ud.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function wd(e){return window.crypto.subtle.exportKey("jwk",e)}async function bd(){const e=await window.crypto.subtle.generateKey({name:ad,length:256},!0,[hd,fd]);return window.crypto.subtle.exportKey("raw",e)}async function Cd(e){return window.crypto.subtle.importKey("raw",e,sd,!1,["deriveKey"])}async function kd(e,t,n){return window.crypto.subtle.deriveKey({name:sd,salt:t,hash:cd,info:(new TextEncoder).encode(n)},e,{name:ad,length:256},!1,[hd,fd])}async function Sd(e,t,n){const r=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await kd(e,o,n),a=await window.crypto.subtle.encrypt({name:ad,iv:new Uint8Array(12)},i,r);return{data:td(new Uint8Array(a)),nonce:td(o)}}async function Td(e,t,n,r){const o=id(r),i=await kd(e,id(t),n),a=await window.crypto.subtle.decrypt({name:ad,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function Id(e){const t=await gd(e);return td(new Uint8Array(t))}const Ed="storage_not_supported",Ad="stubbed_public_client_application_called",_d="in_mem_redirect_unavailable",Rd={[Ed]:"Given storage configuration option was not supported.",[Ad]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[_d]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Pd extends Bo{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Pd.prototype)}}function Od(e){return new Pd(e,Rd[e])}function xd(){return window.parent!==window}function Md(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function Nd(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf(`${Vc}.`))throw Ju(gu)}function Ld(){if("undefined"===typeof window)throw Ju(Iu)}function qd(e){if(!e)throw Ju(Bu)}function Ud(e){Ld(),function(){if($a.hashContainsKnownProperties(window.location.hash)&&xd())throw Ju(pu)}(),Nd(),qd(e)}function Fd(e,t){if(Ud(e),function(e){if(xd()&&!e)throw Ju(fu)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===al&&!t.cache.storeAuthStateInCookie)throw Od(_d)}function Hd(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout((()=>{try{document.head.removeChild(t)}catch{}}),1e4)}const Dd=1e4;const Bd="4.5.0";class zd{static loggerCallback(e,t){switch(e){case Mo.Error:return void console.error(t);case Mo.Info:return void console.info(t);case Mo.Verbose:return void console.debug(t);case Mo.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){let t;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:i}=e;const a={clientId:Sr.EMPTY_STRING,authority:`${Sr.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:Sr.EMPTY_STRING,authorityMetadata:Sr.EMPTY_STRING,redirectUri:"undefined"!==typeof window?Md():"",postLogoutRedirectUri:Sr.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Lo,OIDCOptions:{serverResponseType:jr.FRAGMENT,defaultScopes:[Sr.OPENID_SCOPE,Sr.PROFILE_SCOPE,Sr.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Uo,tenant:Sr.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:il,temporaryCacheLocation:il,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==ol),claimsBasedCachingEnabled:!1},c={loggerCallback:()=>{},logLevel:Mo.Info,piiLoggingEnabled:!1},l={...{...ts,loggerOptions:c,networkClient:t?new Yu:us,navigationClient:new Jl,loadFrameTimeout:0,windowHashTimeout:o?.loadFrameTimeout||6e4,iframeHashTimeout:o?.loadFrameTimeout||Dd,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:o?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:Gc},...o,loggerOptions:o?.loggerOptions||c},u={application:{appName:Sr.EMPTY_STRING,appVersion:Sr.EMPTY_STRING},client:new jc};n?.protocolMode!==qo&&n?.OIDCOptions&&new No(l.loggerOptions).warning(JSON.stringify(Aa(ka)));if(n?.protocolMode&&n.protocolMode!==Lo&&l?.allowPlatformBroker)throw Aa(Sa);return{auth:{...a,...n,OIDCOptions:{...a.OIDCOptions,...n?.OIDCOptions}},cache:{...s,...r},system:l,telemetry:{...u,...i}}}(e,this.browserEnvironment);try{t=window[il]}catch(Fp){}const n=t?.getItem("msal.browser.log.level"),r=t?.getItem("msal.browser.log.pii")?.toLowerCase(),o="true"===r||"false"!==r&&void 0,i={...this.config.system.loggerOptions},a=n&&Object.keys(Mo).includes(n)?Mo[n]:void 0;a&&(i.loggerCallback=zd.loggerCallback,i.logLevel=a),void 0!==o&&(i.piiLoggingEnabled=o),this.logger=new No(i,"@azure/msal-browser",Bd),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class $d extends zd{getModuleName(){return $d.MODULE_NAME}getId(){return $d.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}$d.MODULE_NAME="",$d.ID="StandardOperatingContext";const jd="missing_kid_error",Kd="missing_alg_error",Wd={[jd]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Kd]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class Qd extends Bo{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,Qd.prototype)}}function Vd(e){return new Qd(e,Wd[e])}class Gd{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Vd(jd);if(!e.alg)throw Vd(Kd);const t=new Gd({typ:e.typ||xo,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Jd{constructor(){this.dbName=Bl,this.version=1,this.tableName=zl,this.dbOpen=!1}async open(){return new Promise(((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",(e=>{e.target.result.createObjectStore(this.tableName)})),n.addEventListener("success",(t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()})),n.addEventListener("error",(()=>t(Ju(qu))))}))}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Ju(Eu));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async setItem(e,t){return await this.validateDbIsOpen(),new Promise(((n,r)=>{if(!this.db)return r(Ju(Eu));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",(()=>{this.closeConnection(),n()})),o.addEventListener("error",(e=>{this.closeConnection(),r(e)}))}))}async removeItem(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Ju(Eu));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",(()=>{this.closeConnection(),t()})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async getKeys(){return await this.validateDbIsOpen(),new Promise(((e,t)=>{if(!this.db)return t(Ju(Eu));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",(t=>{const n=t;this.closeConnection(),e(n.target.result)})),n.addEventListener("error",(e=>{this.closeConnection(),t(e)}))}))}async containsKey(e){return await this.validateDbIsOpen(),new Promise(((t,n)=>{if(!this.db)return n(Ju(Eu));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",(e=>{const n=e;this.closeConnection(),t(1===n.target.result)})),r.addEventListener("error",(e=>{this.closeConnection(),n(e)}))}))}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise(((e,t)=>{const n=window.indexedDB.deleteDatabase(Bl),r=setTimeout((()=>t(!1)),200);n.addEventListener("success",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("blocked",(()=>(clearTimeout(r),e(!0)))),n.addEventListener("error",(()=>(clearTimeout(r),t(!1))))}))}}class Yd{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach(((t,n)=>{e.push(n)})),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class Xd{constructor(e){this.inMemoryCache=new Yd,this.indexedDBCache=new Jd,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof Gu&&e.errorCode===qu))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(Fp){this.handleDatabaseAccessError(Fp)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(Fp){this.handleDatabaseAccessError(Fp)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(Fp){this.handleDatabaseAccessError(Fp)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(Fp){this.handleDatabaseAccessError(Fp)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(Fp){this.handleDatabaseAccessError(Fp)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(Fp){return this.handleDatabaseAccessError(Fp),!1}}}class Zd{constructor(e,t,n){this.logger=e,function(e){if(!window)throw Ju(Iu);if(!window.crypto)throw Ju(eu);if(!e&&!window.crypto.subtle)throw Ju(eu,"crypto_subtle_undefined")}(n??!1),this.cache=new Xd(this.logger),this.performanceClient=t}createNewGuid(){return vd()}base64Encode(e){return nd(e)}base64Decode(e){return od(e)}base64UrlEncode(e){return ed(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){const t=this.performanceClient?.startMeasurement(vs,e.correlationId),n=await async function(e,t){return window.crypto.subtle.generateKey(pd,e,t)}(Zd.EXTRACTABLE,Zd.POP_KEY_USAGES),r=await wd(n.publicKey),o=eh({e:r.e,kty:r.kty,n:r.n}),i=await this.hashString(o),a=await wd(n.privateKey),s=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,pd,t,n)}(a,!1,["sign"]);return await this.cache.setItem(i,{privateKey:s,publicKey:n.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),i}async removeTokenBindingKey(e){await this.cache.removeItem(e);return!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(Fp){return Fp instanceof Error?this.logger.error(`Clearing keystore failed with error: ${Fp.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){const o=this.performanceClient?.startMeasurement(ws,r),i=await this.cache.getItem(t);if(!i)throw Ju(xu);const a=await wd(i.publicKey),s=eh(a),c=ed(JSON.stringify({kid:t})),l=ed(Gd.getShrHeaderString({...n?.header,alg:a.alg,kid:c}));e.cnf={jwk:JSON.parse(s)};const u=`${l}.${ed(JSON.stringify(e))}`,d=(new TextEncoder).encode(u),h=await async function(e,t){return window.crypto.subtle.sign(pd,e,t)}(i.privateKey,d),f=`${u}.${td(new Uint8Array(h))}`;return o&&o.end({success:!0}),f}async hashString(e){return Id(e)}}function eh(e){return JSON.stringify(e,Object.keys(e).sort())}Zd.POP_KEY_USAGES=["sign","verify"],Zd.EXTRACTABLE=!0;const th=(e,t,n,r,o)=>function(){n.trace(`Executing function ${t}`);const i=r?.startMeasurement(t,o);if(o){const e=t+"CallCount";r?.incrementFields({[e]:1},o)}try{const r=e(...arguments);return i?.end({success:!0}),n.trace(`Returning result from ${t}`),r}catch(Fp){n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(Fp))}catch(Fp){n.trace("Unable to print error message.")}throw i?.end({success:!1},Fp),Fp}},nh=(e,t,n,r,o)=>function(){n.trace(`Executing function ${t}`);const i=r?.startMeasurement(t,o);if(o){const e=t+"CallCount";r?.incrementFields({[e]:1},o)}return r?.setPreQueueTime(t,o),e(...arguments).then((e=>(n.trace(`Returning result from ${t}`),i?.end({success:!0}),e))).catch((e=>{n.trace(`Error occurred in ${t}`);try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw i?.end({success:!1},e),e}))};class rh{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){this.performanceClient?.addQueueMeasurement(vc,this.correlationId);let n=e;if(n)t.region_source=ko;else{const e=rh.IMDS_OPTIONS;try{const r=await nh(this.getRegionFromIMDS.bind(this),wc,this.logger,this.performanceClient,this.correlationId)(Sr.IMDS_VERSION,e);if(r.status===wo&&(n=r.body,t.region_source=So),r.status===bo){const r=await nh(this.getCurrentVersion.bind(this),bc,this.logger,this.performanceClient,this.correlationId)(e);if(!r)return t.region_source=Co,null;const o=await nh(this.getRegionFromIMDS.bind(this),wc,this.logger,this.performanceClient,this.correlationId)(r,e);o.status===wo&&(n=o.body,t.region_source=So)}}catch(Fp){return t.region_source=Co,null}}return n||(t.region_source=Co),n||null}async getRegionFromIMDS(e,t){return this.performanceClient?.addQueueMeasurement(wc,this.correlationId),this.networkInterface.sendGetRequestAsync(`${Sr.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,Sr.IMDS_TIMEOUT)}async getCurrentVersion(e){this.performanceClient?.addQueueMeasurement(bc,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync(`${Sr.IMDS_ENDPOINT}?format=json`,e);return t.status===bo&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(Fp){return null}}}rh.IMDS_OPTIONS={headers:{Metadata:"true"}};class oh{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new rh(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Sr.CIAM_AUTH_URL))return Fa;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Sr.ADFS:return qa;case Sr.DSTS:return Ua}return La}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new $a(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Li(Qo)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Li(Qo)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Li(Qo)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Li(Ei);return this.replacePath(this.metadata.end_session_endpoint)}throw Li(Qo)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Li(Qo)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Li(Qo)}canReplaceTenant(e){return 1===e.PathSegments.length&&!oh.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===La&&this.protocolMode===Lo}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new $a(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach(((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new $a(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose(`Replacing tenant domain name ${i} with id ${e}`),i=e)}e!==i&&(t=t.replace(`/${i}/`,`/${e}/`))})),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===qa||this.protocolMode!==Lo&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){this.performanceClient?.addQueueMeasurement(hc,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await nh(this.updateCloudDiscoveryMetadata.bind(this),pc,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const n=await nh(this.updateEndpointMetadata.bind(this),mc,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:n}),this.performanceClient?.addFields({cloudDiscoverySource:t,authorityEndpointSource:n},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Zi(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==io&&n?.source!==io&&(e.expiresAt=Zi(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){this.performanceClient?.addQueueMeasurement(mc,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===so&&this.authorityOptions.azureRegionConfiguration?.azureRegion&&t.metadata){ea(e,await nh(this.updateMetadataWithRegionalInformation.bind(this),yc,this.logger,this.performanceClient,this.correlationId)(t.metadata),!1),e.canonical_authority=this.canonicalAuthority}return t.source}let n=await nh(this.getEndpointMetadataFromNetwork.bind(this),gc,this.logger,this.performanceClient,this.correlationId)();if(n)return this.authorityOptions.azureRegionConfiguration?.azureRegion&&(n=await nh(this.updateMetadataWithRegionalInformation.bind(this),yc,this.logger,this.performanceClient,this.correlationId)(n)),ea(e,n,!0),ao;throw Li(Go,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),ea(e,t,!1),{source:oo};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return ea(e,t,!1),{source:so,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=na(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:io}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new $a(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(Fp){throw Aa(ma)}return null}async getEndpointMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(gc,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const n=await this.networkInterface.sendGetRequestAsync(t,e),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(n.body);return r?n.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(Fp){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${Fp}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in ja?ja[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){this.performanceClient?.addQueueMeasurement(yc,this.correlationId);const t=this.authorityOptions.azureRegionConfiguration?.azureRegion;if(t){if(t!==Sr.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=To,this.regionDiscoveryMetadata.region_used=t,oh.replaceWithRegionalInformation(e,t);const n=await nh(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),vc,this.logger,this.performanceClient,this.correlationId)(this.authorityOptions.azureRegionConfiguration?.environmentRegion,this.regionDiscoveryMetadata);if(n)return this.regionDiscoveryMetadata.region_outcome=Io,this.regionDiscoveryMetadata.region_used=n,oh.replaceWithRegionalInformation(e,n);this.regionDiscoveryMetadata.region_outcome=Eo}return e}async updateCloudDiscoveryMetadata(e){this.performanceClient?.addQueueMeasurement(pc,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const n=await nh(this.getCloudDiscoveryMetadataFromNetwork.bind(this),fc,this.logger,this.performanceClient,this.correlationId)();if(n)return ta(e,n,!0),ao;throw Aa(ya)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||Sr.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||Sr.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||Sr.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),ta(e,t,!1),oo;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,Va(Ka.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),ta(e,t,!1),so;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=na(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),io):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Fa)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),oh.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=Va(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(Fp){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Aa(ga)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),oh.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){this.performanceClient?.addQueueMeasurement(fc,this.correlationId);const e=`${Sr.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let n=null;try{const r=await this.networkInterface.sendGetRequestAsync(e,t);let o,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(r.body))o=r.body,i=o.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${o.tenant_discovery_endpoint}`);else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(r.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${r.status}`),o=r.body,o.error===Sr.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${o.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${o.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),n=Va(i,this.hostnameAndPort)}catch(r){if(r instanceof Bo)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${r.errorCode}\nError Description: ${r.errorMessage}`);else{const e=r;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${e.name}\nError Description: ${e.message}`)}return null}return n||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),n=oh.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),n}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter((e=>e&&$a.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort)).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==Uo){const e=t.tenant?t.tenant:Sr.DEFAULT_COMMON_TENANT;n=`${t.azureCloudInstance}/${e}/`}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Sr.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Li(Qo)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Wa.has(e)}static isPublicCloudAuthority(e){return Sr.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new $a(e);r.validateAsUri();const o=r.getUrlComponents();let i=`${t}.${o.HostNameAndPort}`;this.isPublicCloudAuthority(o.HostNameAndPort)&&(i=`${t}.${Sr.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=$a.constructAuthorityUriFromObject({...r.getUrlComponents(),HostNameAndPort:i}).urlString;return n?`${a}?${n}`:a}static replaceWithRegionalInformation(e,t){const n={...e};return n.authorization_endpoint=oh.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=oh.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=oh.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new $a(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(Sr.CIAM_AUTH_URL)){t=`${t}${n.HostNameAndPort.split(".")[0]}${Sr.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}function ih(e){return e.endsWith(Sr.FORWARD_SLASH)?e:`${e}${Sr.FORWARD_SLASH}`}oh.reservedTenantDomains=new Set(["{tenant}","{tenantid}",Ur,Hr,Fr]);const ah="no_tokens_found",sh="native_account_unavailable",ch="refresh_token_expired",lh="bad_token",uh=["interaction_required","consent_required","login_required",lh],dh=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],hh={[ah]:"No refresh token found in the cache. Please sign-in.",[sh]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[ch]:"Refresh token has expired.",[lh]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class fh extends Bo{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,fh.prototype),this.timestamp=r||Sr.EMPTY_STRING,this.traceId=o||Sr.EMPTY_STRING,this.correlationId=i||Sr.EMPTY_STRING,this.claims=a||Sr.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function ph(e,t,n){const r=!!e&&uh.indexOf(e)>-1,o=!!n&&dh.indexOf(n)>-1,i=!!t&&uh.some((e=>t.indexOf(e)>-1));return r||i||o}function gh(e){return new fh(e,hh[e])}class mh{static setRequestState(e,t,n){const r=mh.generateLibraryState(e,n);return t?`${r}${Sr.RESOURCE_DELIM}${t}`:r}static generateLibraryState(e,t){if(!e)throw Li(yi);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw Li(yi);if(!t)throw Li(Yo);try{const n=t.split(Sr.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(Sr.RESOURCE_DELIM):Sr.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||Sr.EMPTY_STRING,libraryState:a}}catch(Fp){throw Li(Yo)}}}const yh="home_account_id",vh="UPN",wh=864e5,bh="Lax",Ch="None";class kh{initialize(){return Promise.resolve()}getItem(e){const t=`${encodeURIComponent(e)}`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw Li(Oi)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:bh,i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=${o};`;if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*wh);return n.toUTCString()}(n);i+=`expires=${e};`}(r||o===Ch)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(Li(Oi))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach((e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])})),t}containsKey(e){return this.getKeys().includes(e)}}function Sh(e){const t=e.getItem(wl);return t?JSON.parse(t):[]}function Th(e,t){const n=t.getItem(`${bl}.${e}`);if(n){const e=JSON.parse(n);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}const Ih="msal.cache.encryption";class Eh{constructor(e,t,n){if(!window.localStorage)throw Od(Ed);this.memoryStorage=new Yd,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){this.initialized=!0;const t=new kh,n=t.getItem(Ih);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(Fp){}if(r.key&&r.id){const t=th(id,Fc,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await nh(Cd,qc,this.logger,this.performanceClient,e)(t)},await nh(this.importExistingCache.bind(this),_c,this.logger,this.performanceClient,e)(e)}else{this.clear();const n=vd(),r=await nh(bd,Uc,this.logger,this.performanceClient,e)(),o=th(td,Hc,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await nh(Cd,qc,this.logger,this.performanceClient,e)(r)};const i={id:n,key:o};t.setItem(Ih,JSON.stringify(i),0,!0,Ch)}this.broadcast.addEventListener("message",this.updateCache.bind(this))}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Ju(Bu);return this.memoryStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw Ju(Bu);const{data:r,nonce:o}=await nh(Sd,Dc,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),i={id:this.encryptionCookie.id,nonce:o,data:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(i)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();Sh(this).forEach((e=>this.removeItem(e)));const e=Th(this.clientId,this);e.idToken.forEach((e=>this.removeItem(e))),e.accessToken.forEach((e=>this.removeItem(e))),e.refreshToken.forEach((e=>this.removeItem(e))),this.getKeys().forEach((e=>{(e.startsWith(Sr.CACHE_PREFIX)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)}))}async importExistingCache(e){if(!this.encryptionCookie)return;let t=Sh(this);t=await this.importArray(t,e),this.setItem(wl,JSON.stringify(t));const n=Th(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),this.setItem(`${bl}.${this.clientId}`,JSON.stringify(n))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(Fp){return null}return r.id&&r.nonce&&r.data?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):nh(Td,Bc,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),null)}async importArray(e,t){const n=[],r=[];return e.forEach((e=>{const o=this.getItemFromEncryptedCache(e,t).then((t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)}));r.push(o)})),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(Pc);t.add({isBackground:!0});const{key:n,value:r,context:o}=e.data;return n?o&&o!==this.clientId?(this.logger.trace(`Ignoring broadcast event from clientId: ${o}`),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class Ah{constructor(){if(!window.sessionStorage)throw Od(Ed)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function _h(e,t){if(!t)return null;try{return mh.parseRequestState(e,t).libraryState.meta}catch(Fp){throw Li(Yo)}}const Rh="msal:initializeStart",Ph="msal:initializeEnd",Oh="msal:accountAdded",xh="msal:accountRemoved",Mh="msal:activeAccountChanged",Nh="msal:loginStart",Lh="msal:loginSuccess",qh="msal:loginFailure",Uh="msal:acquireTokenStart",Fh="msal:acquireTokenSuccess",Hh="msal:acquireTokenFailure",Dh="msal:acquireTokenFromNetworkStart",Bh="msal:ssoSilentStart",zh="msal:ssoSilentSuccess",$h="msal:ssoSilentFailure",jh="msal:acquireTokenByCodeStart",Kh="msal:acquireTokenByCodeSuccess",Wh="msal:acquireTokenByCodeFailure",Qh="msal:handleRedirectStart",Vh="msal:handleRedirectEnd",Gh="msal:popupOpened",Jh="msal:logoutStart",Yh="msal:logoutSuccess",Xh="msal:logoutFailure",Zh="msal:logoutEnd",ef="msal:restoreFromBFCache";class tf extends Za{constructor(e,t,n,r,o,i,a){super(e,n,r,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new Yd,this.browserStorage=nf(e,t.cacheLocation,r,o),this.temporaryCacheStorage=nf(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new kh,this.performanceClient=o,this.eventHandler=i}async initialize(e){await this.browserStorage.initialize(e)}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}getAccount(e){this.logger.trace("BrowserCacheManager.getAccount called");const t=this.browserStorage.getUserData(e);if(!t)return this.removeAccountKeyFromMap(e),null;const n=this.validateAndParseJson(t);return n&&Da.isAccountEntity(n)?Za.toObject(new Da,n):(this.removeAccountKeyFromMap(e),null)}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();await nh(this.browserStorage.setUserData.bind(this.browserStorage),Rc,this.logger,this.performanceClient)(n,JSON.stringify(e),t);const r=this.addAccountKeyToMap(n);this.cacheConfig.cacheLocation===ol&&r&&this.eventHandler.emitEvent(Oh,void 0,e.getAccountInfo())}getAccountKeys(){return Sh(this.browserStorage)}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();return-1===t.indexOf(e)?(t.push(e),this.browserStorage.setItem(wl,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),n=t.indexOf(e);n>-1?(t.splice(n,1),this.browserStorage.setItem(wl,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}async removeAccountContext(e){await super.removeAccountContext(e),this.cacheConfig.cacheLocation===ol&&this.eventHandler.emitEvent(xh,void 0,e.getAccountInfo())}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,Zr.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,Zr.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,Zr.REFRESH_TOKEN)}getTokenKeys(){return Th(this.clientId,this.browserStorage)}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const n=this.getTokenKeys();switch(t){case Zr.ID_TOKEN:-1===n.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),n.idToken.push(e));break;case Zr.ACCESS_TOKEN:-1===n.accessToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),n.accessToken.push(e));break;case Zr.REFRESH_TOKEN:-1===n.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),n.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),Li(vi)}this.browserStorage.setItem(`${bl}.${this.clientId}`,JSON.stringify(n))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const n=this.getTokenKeys();switch(t){case Zr.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const r=n.idToken.indexOf(e);r>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),n.idToken.splice(r,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Zr.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const o=n.accessToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),n.accessToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Zr.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const i=n.refreshToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),n.refreshToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),Li(vi)}this.browserStorage.setItem(`${bl}.${this.clientId}`,JSON.stringify(n))}getIdTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.ID_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Qi(r)&&r.hasOwnProperty("realm")&&r.credentialType===Zr.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.ID_TOKEN),null);var r}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=$i(e);await nh(this.browserStorage.setUserData.bind(this.browserStorage),Rc,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,Zr.ID_TOKEN)}getAccessTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.ACCESS_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Qi(r)&&r.hasOwnProperty("realm")&&r.hasOwnProperty("target")&&(r.credentialType===Zr.ACCESS_TOKEN||r.credentialType===Zr.ACCESS_TOKEN_WITH_AUTH_SCHEME)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.ACCESS_TOKEN),null);var r}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=$i(e);await nh(this.browserStorage.setUserData.bind(this.browserStorage),Rc,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,Zr.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.browserStorage.getUserData(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.REFRESH_TOKEN),null;const n=this.validateAndParseJson(t);return n&&(r=n)&&Qi(r)&&r.credentialType===Zr.REFRESH_TOKEN?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),n):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Zr.REFRESH_TOKEN),null);var r}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=$i(e);await nh(this.browserStorage.setUserData.bind(this.browserStorage),Rc,this.logger,this.performanceClient)(n,JSON.stringify(e),t),this.addTokenKey(n,Zr.REFRESH_TOKEN)}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(eo)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=function(e){let{environment:t,clientId:n}=e;return[eo,t,n].join(Yr).toLowerCase()}(e);this.browserStorage.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(co.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.browserStorage.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(no)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter((e=>this.isAuthorityMetadata(e)))}setWrapperMetadata(e,t){this.internalStorage.setItem(Cl,e),this.internalStorage.setItem(kl,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Cl)||Sr.EMPTY_STRING,this.internalStorage.getItem(kl)||Sr.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(qr),t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const n=this.validateAndParseJson(t);return n?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:n.homeAccountId,localAccountId:n.localAccountId,tenantId:n.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(qr);if(e){this.logger.verbose("setActiveAccount: Active account set");const n={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(n))}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t);this.eventHandler.emitEvent(Mh)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(fo));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.browserStorage.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===ol){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach((e=>{-1===e.indexOf(Sr.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)})),this.browserStorage.getKeys().forEach((e=>{-1===e.indexOf(Sr.CACHE_PREFIX)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)})),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(Ec,t);const n=this.getTokenKeys(),r=[];n.accessToken.forEach((e=>{const t=this.getAccessTokenCredential(e);t?.requestedClaimsHash&&e.includes(t.requestedClaimsHash.toLowerCase())&&r.push(this.removeAccessToken(e))})),await Promise.all(r),r.length>0&&this.logger.warning(`${r.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):_a.startsWith(e,Sr.CACHE_PREFIX)?e:`${Sr.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=mh.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ll}.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=mh.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${dl}.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=mh.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${ul}.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),n=this.getTemporaryCache(t);if(!n)return null;const r=this.generateAuthorityKey(n);return this.getTemporaryCache(r)}updateCacheEntries(e,t,n,r,o){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const i=this.generateStateKey(e);this.setTemporaryCache(i,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const s=this.generateAuthorityKey(e);if(this.setTemporaryCache(s,n,!1),o){const e={credential:o.homeAccountId,type:yh};this.setTemporaryCache(ml,JSON.stringify(e),!0)}else if(r){const e={credential:r,type:vh};this.setTemporaryCache(ml,JSON.stringify(e),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach((t=>{-1!==t.indexOf(e)&&this.removeTemporaryItem(t)})),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(pl)),this.removeTemporaryItem(this.generateCacheKey(hl)),this.removeTemporaryItem(this.generateCacheKey(fl)),this.removeTemporaryItem(this.generateCacheKey(yl)),this.removeTemporaryItem(this.generateCacheKey(ml)),this.removeTemporaryItem(this.generateCacheKey(vl)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),n=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n||Sr.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach((t=>{if(-1===t.indexOf(ul))return;const n=this.temporaryCacheStorage.getItem(t);if(!n)return;const r=_h(this.cryptoImpl,n);r&&r.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${n}`),this.resetRequestCache(n))})),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=nd(JSON.stringify(e));this.setTemporaryCache(pl,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(pl,!0);if(!t)throw Ju(bu);let n;try{n=JSON.parse(od(t))}catch(Fp){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${Fp}`),Ju(Cu)}if(this.removeTemporaryItem(this.generateCacheKey(pl)),!n.authority){const t=this.generateAuthorityKey(e),r=this.getTemporaryCache(t);if(!r)throw Ju(ku);n.authority=r}return n}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(vl,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${Sr.CACHE_PREFIX}.${gl}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t=`${Sr.CACHE_PREFIX}.${gl}`;if(e){if(this.getInteractionInProgress())throw Ju(su);this.setTemporaryCache(t,this.clientId,!1)}else e||this.getInteractionInProgress()!==this.clientId||this.removeTemporaryItem(t)}async hydrateCache(e,t){const n=ji(e.account?.homeAccountId,e.account?.environment,e.idToken,this.clientId,e.tenantId);let r;t.claims&&(r=await this.cryptoImpl.hashString(t.claims));const o={idToken:n,accessToken:Ki(e.account?.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,od,void 0,e.tokenType,void 0,t.sshKid,t.claims,r)};return this.saveCacheRecord(o,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(Fp){if(Fp instanceof Xa&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(Fp){}throw Fp}}}function nf(e,t,n,r){try{switch(t){case ol:return new Eh(e,n,r);case il:return new Ah}}catch(Fp){n.error(Fp)}return new Yd}class rf{constructor(e){this.eventCallbacks=new Map,this.logger=e||new No({}),this.broadcastChannel=new BroadcastChannel("msal.broadcast.event"),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||vd();return this.eventCallbacks.has(r)?(this.logger.error(`Event callback with id: ${r} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${r}`),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,n,r){const o={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case Oh:case xh:case Mh:this.broadcastChannel.postMessage(o);break;default:this.invokeCallbacks(o)}}invokeCallbacks(e){this.eventCallbacks.forEach(((t,n)=>{let[r,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose(`Emitting event to callback ${n}: ${e.eventType}`),r.apply(null,[e]))}))}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){this.broadcastChannel.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){this.broadcastChannel.removeEventListener("message",this.invokeCrossTabCallbacks)}}class of extends Bo{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,of.prototype)}}class af{static generateThrottlingStorageKey(e){return`${fo}.${JSON.stringify(e)}`}static preProcess(e,t){const n=af.generateThrottlingStorageKey(t),r=e.getThrottlingCache(n);if(r){if(r.throttleTime<Date.now())return void e.removeItem(n);throw new of(r.errorCodes?.join(" ")||Sr.EMPTY_STRING,r.errorMessage,r.subError)}}static postProcess(e,t,n){if(af.checkResponseStatus(n)||af.checkResponseForRetryAfter(n)){const r={throttleTime:af.calculateThrottleTime(parseInt(n.headers[xr])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(af.generateThrottlingStorageKey(t),r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(xr)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||uo),n+ho))}static removeThrottle(e,t,n,r){const o={clientId:t,authority:n.authority,scopes:n.scopes,homeAccountIdentifier:r,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid},i=this.generateThrottlingStorageKey(o);e.removeItem(i)}}const sf="client_id",cf="redirect_uri",lf="response_type",uf="token_type",df="req_cnf",hf="return_spa_code",ff="x-client-xtra-sku",pf="brk_client_id",gf="brk_redirect_uri";class mf{static validateRedirectUri(e){if(!e)throw Aa(ra)}static validatePrompt(e){const t=[];for(const n in zr)t.push(zr[n]);if(t.indexOf(e)<0)throw Aa(la)}static validateClaims(e){try{JSON.parse(e)}catch(Fp){throw Aa(ua)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Aa(pa);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([$r.PLAIN,$r.S256].indexOf(e)<0)throw Aa(fa)}}class yf{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(lf,encodeURIComponent(Sr.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(lf,encodeURIComponent(`${Sr.TOKEN_RESPONSE_TYPE} ${Sr.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||Kr.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_r;!t||n.includes("openid")||e.includes("openid")||n.push("openid");const r=t?[...e||[],...n]:e||[],o=new Ra(r);this.parameters.set("scope",encodeURIComponent(o.printScopes()))}addClientId(e){this.parameters.set(sf,encodeURIComponent(e))}addRedirectUri(e){mf.validateRedirectUri(e),this.parameters.set(cf,encodeURIComponent(e))}addPostLogoutRedirectUri(e){mf.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Mr,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Mr,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,t){const n=this.addClientCapabilitiesToClaims(e,t);mf.validateClaims(n),this.parameters.set("claims",encodeURIComponent(n))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){mf.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,t){if(mf.validateCodeChallengeParams(e,t),!e||!t)throw Aa(pa);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(t))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach((e=>{let[t,n]=e;!this.parameters.has(t)&&n&&this.parameters.set(t,n)}))}addClientCapabilitiesToClaims(e,t){let n;if(e)try{n=JSON.parse(e)}catch(Fp){throw Aa(ua)}else n={};return t&&t.length>0&&(n.hasOwnProperty(Dr)||(n[Dr]={}),n[Dr][Br]={values:t}),JSON.stringify(n)}addUsername(e){this.parameters.set(yo,encodeURIComponent(e))}addPassword(e){this.parameters.set(vo,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(uf,lo.POP),this.parameters.set(df,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(uf,lo.SSH),this.parameters.set(df,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability",po)}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const t={};t[pf]=e.brokerClientId,t[gf]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach(((t,n)=>{e.push(`${n}=${t}`)})),function(e,t,n){if(!t)return;const r=e.get(sf);r&&e.has(pf)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(cf)},t)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}async function vf(e,t,n,r,o,i,a){a?.addQueueMeasurement(dc,i);const s=oh.transformCIAMAuthority(ih(e)),c=new oh(s,t,n,r,o,i,a);try{return await nh(c.resolveEndpointsAsync.bind(c),hc,o,a,i)(),c}catch(Fp){throw Li(Qo)}}class wf{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:s,clientCredentials:c,libraryInfo:l,telemetry:u,serverTelemetryManager:d,persistencePlugin:h,serializableCache:f}=e;const p={...ns,...r};return{authOptions:(g=t,{clientCapabilities:[],azureCloudOptions:ss,skipAuthorityMetadataCache:!1,instanceAware:!1,...g}),systemOptions:{...ts,...n},loggerOptions:p,cacheOptions:{...rs,...o},storageInterface:i||new es(t.clientId,qi,new No(p)),networkInterface:a||os,cryptoInterface:s||qi,clientCredentials:c||as,libraryInfo:{...is,...l},telemetry:{...cs,...u},serverTelemetryManager:d||null,persistencePlugin:h||null,serializableCache:f||null};var g}(e),this.logger=new No(this.config.loggerOptions,Ui,Fi),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Pr]=Sr.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case yh:try{const n=Oa(e.credential);t[Mr]=`Oid:${n.uid}@${n.utid}`}catch(Fp){this.logger.verbose("Could not parse home account ID for CCS Header: "+Fp)}break;case vh:t[Mr]=`UPN: ${e.credential}`}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){i&&this.performanceClient?.addQueueMeasurement(i,o);const a=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&a.status<500&&429!==a.status&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,n,r){let o;af.preProcess(this.cacheManager,e);try{o=await nh(this.networkClient.sendPostRequestAsync.bind(this.networkClient),_s,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};this.performanceClient?.addFields({refreshTokenSize:o.body.refresh_token?.length||0,httpVerToken:e[Lr]||"",requestId:e[Nr]||""},r)}catch(Fp){if(Fp instanceof Yl){const t=Fp.responseHeaders;throw t&&this.performanceClient?.addFields({httpVerToken:t[Lr]||"",requestId:t[Nr]||"",contentTypeHeader:t[Pr]||void 0,contentLengthHeader:t[Or]||void 0,httpStatus:Fp.httpStatus},r),Fp.error}throw Fp instanceof Bo?Fp:Li(Vo)}return af.postProcess(this.cacheManager,e,o),o}async updateAuthority(e,t){this.performanceClient?.addQueueMeasurement(nc,t);const n=`https://${e}/${this.authority.tenant}/`,r=await vf(n,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=r}createTokenQueryParameters(e){const t=new yf(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}const bf="sw";class Cf{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){this.performanceClient?.addQueueMeasurement(sc,e.correlationId);const n=await nh(this.generateKid.bind(this),sc,t,this.performanceClient,e.correlationId)(e),r=this.cryptoUtils.base64UrlEncode(JSON.stringify(n));return{kid:n.kid,reqCnfString:r}}async generateKid(e){this.performanceClient?.addQueueMeasurement(cc,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:bf}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:s,shrOptions:c}=n,l=i?new $a(i):void 0,u=l?.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Bi(),m:o?.toUpperCase(),u:u?.HostNameAndPort,nonce:s||this.cryptoUtils.createNewGuid(),p:u?.AbsolutePath,q:u?.QueryString?[[],u.QueryString]:void 0,client_claims:a||void 0,...r},t,c,n.correlationId)}}class kf{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class Sf{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?Li(Zo,"Cached State"):Li(Zo,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(Fp){throw Li(Yo,e.state)}try{r=decodeURIComponent(t)}catch(Fp){throw Li(Yo,e.state)}if(n!==r)throw Li(Xo);if(e.error||e.error_description||e.suberror){const t=function(e){const t="code=",n=e.error_uri?.lastIndexOf(t);return n&&n>=0?e.error_uri?.substring(n+5):void 0}(e);if(ph(e.error,e.error_description,e.suberror))throw new fh(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new of(e.error||"",e.error_description,e.suberror,t)}}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){const n=`Error(s): ${e.error_codes||Sr.NOT_AVAILABLE} - Timestamp: ${e.timestamp||Sr.NOT_AVAILABLE} - Description: ${e.error_description||Sr.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||Sr.NOT_AVAILABLE} - Trace ID: ${e.trace_id||Sr.NOT_AVAILABLE}`,r=e.error_codes?.length?e.error_codes[0]:void 0,o=new of(e.error,n,e.suberror,r,e.status);if(t&&e.status&&e.status>=Er&&e.status<=Ar)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${o}`);if(t&&e.status&&e.status>=Tr&&e.status<=Ir)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${o}`);if(ph(e.error,e.error_description,e.suberror))throw new fh(e.error,e.error_description,e.suberror,e.timestamp||Sr.EMPTY_STRING,e.trace_id||Sr.EMPTY_STRING,e.correlation_id||Sr.EMPTY_STRING,e.claims||Sr.EMPTY_STRING,r);throw o}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,c){let l,u;if(this.performanceClient?.addQueueMeasurement(lc,e.correlation_id),e.id_token){if(l=Hi(e.id_token||Sr.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&l.nonce!==o.nonce)throw Li(ei);if(r.maxAge||0===r.maxAge){const e=l.auth_time;if(!e)throw Li(ti);Di(e,r.maxAge)}}this.homeAccountIdentifier=Da.generateHomeAccountId(e.client_info||Sr.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,l),o&&o.state&&(u=mh.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const d=this.generateCacheRecord(e,t,n,r,l,i,o);let h;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),h=new kf(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(h)),a&&!s&&d.account){const e=d.account.generateAccountKey();if(!this.cacheStorage.getAccount(e))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await Sf.generateAuthenticationResult(this.cryptoObj,t,d,!1,r,l,u,void 0,c)}await this.cacheStorage.saveCacheRecord(d,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&h&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(h))}return Sf.generateAuthenticationResult(this.cryptoObj,t,d,!1,r,l,u,e,c)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw Li(gi);const c=Ha(o);let l,u;e.id_token&&o&&(l=ji(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=Tf(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?Ra.fromString(e.scope):new Ra(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,f=h+l,p=u&&u>0?n+u:void 0;d=Ki(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,f,this.cryptoObj.base64Decode,p,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=Wi(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let f=null;return e.foci&&(f={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:f}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,c){let l,u,d=Sr.EMPTY_STRING,h=[],f=null,p=Sr.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==lo.POP||o.popKid)d=n.accessToken.secret;else{const t=new Cf(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw Li(Ai);d=await t.signPopToken(r,i,o)}h=Ra.fromString(n.accessToken.target).asArray(),f=new Date(1e3*Number(n.accessToken.expiresOn)),l=new Date(1e3*Number(n.accessToken.extendedExpiresOn)),n.accessToken.refreshOn&&(u=new Date(1e3*Number(n.accessToken.refreshOn)))}n.appMetadata&&(p=n.appMetadata.familyId===to?to:"");const g=i?.oid||i?.sub||"",m=i?.tid||"";s?.spa_accountid&&n.account&&(n.account.nativeAccountId=s?.spa_accountid);const y=n.account?Na(n.account.getAccountInfo(),void 0,i,n.idToken?.secret):null;return{authority:t.canonicalAuthority,uniqueId:g,tenantId:m,scopes:h,account:y,idToken:n?.idToken?.secret||"",idTokenClaims:i||{},accessToken:d,fromCache:r,expiresOn:f,extExpiresOn:l,refreshOn:u,correlationId:o.correlationId,requestId:c||Sr.EMPTY_STRING,familyId:p,tokenType:n.accessToken?.tokenType||Sr.EMPTY_STRING,state:a?a.userRequestState:Sr.EMPTY_STRING,cloudGraphHostName:n.account?.cloudGraphHostName||Sr.EMPTY_STRING,msGraphHost:n.account?.msGraphHost||Sr.EMPTY_STRING,code:s?.spa_code,fromNativeBroker:!1}}}function Tf(e,t,n,r,o,i,a,s,c,l,u){u?.verbose("setCachedAccount called");const d=e.getAccountKeys().find((e=>e.startsWith(n)));let h=null;d&&(h=e.getAccount(d));const f=h||Da.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:a,cloudGraphHostName:c?.cloud_graph_host_name,msGraphHost:c?.msgraph_host,nativeAccountId:l},t,r),p=f.tenantProfiles||[],g=s||f.realm;if(g&&!p.find((e=>e.tenantId===g))){const e=Ma(n,f.localAccountId,g,o);p.push(e)}return f.tenantProfiles=p,f}async function If(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class Ef extends wf{constructor(e,t){super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}async getAuthCodeUrl(e){this.performanceClient?.addQueueMeasurement(Zs,e.correlationId);const t=await nh(this.createAuthCodeUrlQueryString.bind(this),ac,this.logger,this.performanceClient,e.correlationId)(e);return $a.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){if(this.performanceClient?.addQueueMeasurement(rc,e.correlationId),!e.code)throw Li(ai);const n=Bi(),r=await nh(this.executeTokenRequest.bind(this),oc,this.logger,this.performanceClient,e.correlationId)(this.authority,e),o=r.headers?.[Nr],i=new Sf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return i.validateTokenResponse(r.body),nh(i.handleServerTokenResponse.bind(i),lc,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,t,void 0,void 0,void 0,o)}handleFragmentResponse(e,t){if(new Sf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw Li(Ti);return e}getLogoutUri(e){if(!e)throw Aa(ha);const t=this.createLogoutUrlQueryString(e);return $a.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(oc,t.correlationId);const n=this.createTokenQueryParameters(t),r=$a.appendQueryString(e.tokenEndpoint,n),o=await nh(this.createTokenRequestBody.bind(this),ic,this.logger,this.performanceClient,t.correlationId)(t);let i;if(t.clientInfo)try{const e=Pa(t.clientInfo,this.cryptoUtils.base64Decode);i={credential:`${e.uid}${Xr}${e.utid}`,type:yh}}catch(Fp){this.logger.verbose("Could not parse client info for CCS Header: "+Fp)}const a=this.createTokenRequestHeaders(i||t.ccsCredential),s={clientId:t.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return nh(this.executePostToTokenEndpoint.bind(this),Ps,this.logger,this.performanceClient,t.correlationId)(r,o,a,s,t.correlationId,Ps)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(ic,e.correlationId);const t=new yf(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[sf]||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):mf.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!ls(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const n=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await If(n.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(n.assertionType)}if(t.addGrantType(Wr),t.addClientInfo(),e.authenticationScheme===lo.POP){const n=new Cf(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await nh(n.generateCnf.bind(n),sc,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}t.addPopToken(r)}else if(e.authenticationScheme===lo.SSH){if(!e.sshJwk)throw Aa(va);t.addSshJwk(e.sshJwk)}let n;if((!_a.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=Pa(e.clientInfo,this.cryptoUtils.base64Decode);n={credential:`${t.uid}${Xr}${t.utid}`,type:yh}}catch(Fp){this.logger.verbose("Could not parse client info for CCS Header: "+Fp)}else n=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&n)switch(n.type){case yh:try{const e=Oa(n.credential);t.addCcsOid(e)}catch(Fp){this.logger.verbose("Could not parse home account ID for CCS Header: "+Fp)}break;case vh:t.addCcsUpn(n.credential)}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[hf]||t.addExtraQueryParameters({[hf]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){const t=e.correlationId||this.config.cryptoInterface.createNewGuid();this.performanceClient?.addQueueMeasurement(ac,t);const n=new yf(t,this.performanceClient);n.addClientId(e.embeddedClientId||e.extraQueryParameters?.[sf]||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];if(n.addScopes(r,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri),n.addCorrelationId(t),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),ls(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&(n.addDomainHint(e.domainHint),this.performanceClient?.addFields({domainHintFromRequest:!0},t)),this.performanceClient?.addFields({prompt:e.prompt},t),e.prompt!==zr.SELECT_ACCOUNT)if(e.sid&&e.prompt===zr.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid),this.performanceClient?.addFields({sidFromRequest:!0},t);else if(e.account){const r=this.extractAccountSid(e.account);let o=this.extractLoginHint(e.account);if(o&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(o),this.performanceClient?.addFields({loginHintFromClaim:!0},t);try{const t=Oa(e.account.homeAccountId);n.addCcsOid(t)}catch(Fp){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(r&&e.prompt===zr.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(r),this.performanceClient?.addFields({sidFromClaim:!0},t);try{const t=Oa(e.account.homeAccountId);n.addCcsOid(t)}catch(Fp){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint),this.performanceClient?.addFields({loginHintFromRequest:!0},t);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username),this.performanceClient?.addFields({loginHintFromUpn:!0},t);try{const t=Oa(e.account.homeAccountId);n.addCcsOid(t)}catch(Fp){this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint),this.performanceClient?.addFields({loginHintFromRequest:!0},t));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,n),e.platformBroker&&(n.addNativeBroker(),e.authenticationScheme===lo.POP)){const t=new Cf(this.cryptoUtils);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await nh(t.generateCnf.bind(t),sc,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}n.addPopToken(r)}return n.createQueryString()}createLogoutUrlQueryString(e){const t=new yf(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}function Af(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(t?.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},(()=>"|"));return a.forEach(((e,t)=>{2===e.length&&e[0]?.length&&e[1]?.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})})),s.join(",")}class _f{constructor(e,t){this.cacheOutcome=Ao,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Sr.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Sr.EMPTY_STRING,this.telemetryCacheKey=co.CACHE_KEY+Yr+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${co.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();n?.length&&t.push(`broker_error=${n}`);const r=t.join(co.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(co.VALUE_SEPARATOR);return[co.SCHEMA_VERSION,o,r].join(co.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=_f.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(co.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(co.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?co.OVERFLOW_TRUE:co.OVERFLOW_FALSE].join(co.VALUE_SEPARATOR);return[co.SCHEMA_VERSION,e.cacheHits,n,r,i].join(co.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=co.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Bo?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(co.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=_f.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||Sr.EMPTY_STRING,i=e.failedRequests[2*t+1]||Sr.EMPTY_STRING,a=e.errors[t]||Sr.EMPTY_STRING;if(r+=o.toString().length+i.toString().length+a.length+3,!(r<co.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Sr.EMPTY_STRING),e.push(this.regionSource||Sr.EMPTY_STRING),e.push(this.regionOutcome||Sr.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Af(e)}}class Rf{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.nativeMessageHandler=s,this.correlationId=c||vd(),this.logger=r.clone(Jc,Bd,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){Da.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(Da.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(t){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch(Fp){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return $a.getAbsoluteUrl(t,Md())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new _f(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(Is,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=n?.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace($a.getDomainFromUrl(o),t.environment):o,s=oh.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await nh(vf,dc,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw Aa(Ta);return c}}async function Pf(e,t,n){e.addQueueMeasurement(Oc,n);const r=th(Of,xc,t,e,n)(e,t,n);return{verifier:r,challenge:await nh(xf,Mc,t,e,n)(r,e,t,n)}}function Of(e,t,n){try{const r=new Uint8Array(32);th(md,Lc,t,e,n)(r);return td(r)}catch(Fp){throw Ju(Zl)}}async function xf(e,t,n,r){t.addQueueMeasurement(Mc,r);try{const o=await nh(gd,Nc,n,t,r)(e,t,r);return td(new Uint8Array(o))}catch(Fp){throw Ju(Zl)}}async function Mf(e,t,n,r){n.addQueueMeasurement(Ds,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a={...e,correlationId:e.correlationId,authority:o,scopes:i};if(a.authenticationScheme){if(a.authenticationScheme===lo.SSH){if(!e.sshJwk)throw Aa(va);if(!e.sshKid)throw Aa(wa)}r.verbose(`Authentication Scheme set to "${a.authenticationScheme}" as configured in Auth request`)}else a.authenticationScheme=lo.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!_a.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await Id(e.claims)),a}async function Nf(e,t,n,r,o){r.addQueueMeasurement(Bs,e.correlationId);const i=await nh(Mf,Ds,o,r,e.correlationId)(e,n,r,o);return{...e,...i,account:t,forceRefresh:e.forceRefresh||!1}}class Lf extends Rf{async initializeAuthorizationCodeRequest(e,t){this.performanceClient.addQueueMeasurement(Xs,this.correlationId);const n=t||await nh(Pf,Oc,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:Sr.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=Sr.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const t={correlationId:this.correlationId||vd(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=$a.getAbsoluteUrl(e.postLogoutRedirectUri,Md())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=$a.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Md())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=$a.getAbsoluteUrl(Md(),Md())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(Gs,this.correlationId);const t=await nh(this.getClientConfiguration.bind(this),Js,this.logger,this.performanceClient,this.correlationId)(e);return new Ef(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(Js,this.correlationId);const a=await nh(this.getDiscoveredAuthority.bind(this),Is,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:Jc,version:Bd,cpu:Sr.EMPTY_STRING,os:Sr.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Ys,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=mh.setRequestState(this.browserCrypto,e&&e.state||Sr.EMPTY_STRING,r),i={...await nh(Mf,Ds,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:n,state:o,nonce:e.nonce||vd(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return i;const a=e.account||this.browserStorage.getActiveAccount();return a&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${a.homeAccountId}`,this.correlationId),i.account=a),i}}const qf="user_switch",Uf={[qf]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class Ff extends Bo{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,Ff.prototype),this.name="NativeAuthError",this.ext=n}}function Hf(e){return!(!e.ext||!e.ext.status||"PERSISTENT_ERROR"!==e.ext.status&&"DISABLED"!==e.ext.status)||(!(!e.ext||!e.ext.error||-2147186943!==e.ext.error)||"ContentError"===e.errorCode)}function Df(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return gh(sh);case"USER_INTERACTION_REQUIRED":return new fh(e,t);case"USER_CANCEL":return Ju(uu);case"NO_NETWORK":return Ju(Au)}return new Ff(e,Uf[e]||t,n)}class Bf extends wf{constructor(e,t){super(e,t)}async acquireCachedToken(e){this.performanceClient?.addQueueMeasurement(Us,e.correlationId);let t=Ao;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!_a.isEmptyObj(e.claims))throw this.setCacheOutcome(_o,e.correlationId),Li(Ci);if(!e.account)throw Li(fi);const n=e.account.tenantId||function(e){const t=new $a(e).getUrlComponents(),n=t.PathSegments.slice(-1)[0]?.toLowerCase();switch(n){case Ur:case Fr:case Hr:return;default:return n}}(e.authority),r=this.cacheManager.getTokenKeys(),o=this.cacheManager.getAccessToken(e.account,e,r,n,this.performanceClient,e.correlationId);if(!o)throw this.setCacheOutcome(Ro,e.correlationId),Li(Ci);if(i=o.cachedAt,Number(i)>Bi()||zi(o.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Po,e.correlationId),Li(Ci);var i;o.refreshOn&&zi(o.refreshOn,0)&&(t=Oo);const a=e.authority||this.authority.getPreferredCache(),s={account:this.cacheManager.readAccountFromCache(e.account),accessToken:o,idToken:this.cacheManager.getIdToken(e.account,r,n,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(a)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await nh(this.generateResultFromCacheRecord.bind(this),Fs,this.logger,this.performanceClient,e.correlationId)(s,e),t]}setCacheOutcome(e,t){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},t),e!==Ao&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){let n;if(this.performanceClient?.addQueueMeasurement(Fs,t.correlationId),e.idToken&&(n=Hi(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){const e=n?.auth_time;if(!e)throw Li(ti);Di(e,t.maxAge)}return Sf.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,n)}}class zf extends Lf{async acquireToken(e){this.performanceClient.addQueueMeasurement(bs,e.correlationId);const t=this.initializeServerTelemetryManager(_l),n=await nh(this.getClientConfiguration.bind(this),Js,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new Bf(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await nh(r.acquireCachedToken.bind(r),Us,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof Gu&&o.errorCode===xu&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t?.account)}}class $f extends Rf{constructor(e,t,n,r,o,i,a,s,c,l,u,d){super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.nativeMessageHandler=c,this.nativeStorageManager=u,this.silentCacheClient=new zf(e,this.nativeStorageManager,n,r,o,i,s,c,d);const h=this.nativeMessageHandler.getExtensionId()===Xc?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=_f.makeExtraSkuString({libraryName:Jc,libraryVersion:Bd,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[ff]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(As,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const t=this.performanceClient.startMeasurement(As,e.correlationId),n=Bi(),r=this.initializeServerTelemetryManager(this.apiId);try{const o=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(Fp){this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...i}=o,a={method:nl,request:i},s=await this.nativeMessageHandler.sendMessage(a),c=this.validateNativeResponse(s);return await this.handleNativeResponse(c,o,n).then((e=>(t.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),r.clearNativeBrokerErrorCode(),e))).catch((e=>{throw t.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError,isNativeBroker:!0}),e}))}catch(Fp){throw Fp instanceof Ff&&r.setNativeBrokerErrorCode(Fp.errorCode),Fp}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Ra.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Li(mi);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!n)throw Li(mi);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o={...n,idTokenClaims:r?.idTokenClaims,idToken:r?.idToken};return{...r,account:o}}catch(Fp){throw Fp}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...n}=e;delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n),o={method:nl,request:r};try{const e=await this.nativeMessageHandler.sendMessage(o);this.validateNativeResponse(e)}catch(Fp){if(Fp instanceof Ff){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(Fp.errorCode),Hf(Fp))throw Fp}}this.browserStorage.setTemporaryCache(vl,JSON.stringify(r),!0);const i={apiId:Sl,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,i)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&e?.addFields({errorCode:"no_cached_request"},t),null;const{prompt:r,...o}=n;r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(vl));const i={method:nl,request:o},a=Bi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const e=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(e);const t=this.handleNativeResponse(e,o,a);this.browserStorage.setInteractionInProgress(!1);const n=await t;return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),n}catch(Fp){throw this.browserStorage.setInteractionInProgress(!1),Fp}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const r=Hi(e.id_token,od),o=this.createHomeAccountIdentifier(e,r),i=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId})?.homeAccountId;if(o!==i&&e.account.id!==t.accountId)throw Df(qf);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),s=Tf(this.browserStorage,a,o,od,r,e.client_info,void 0,r.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,t,r,s,a.canonicalAuthority,n);return await this.cacheAccount(s),await this.cacheNativeTokens(e,t,o,r,e.access_token,c.tenantId,n),c}createHomeAccountIdentifier(e,t){return Da.generateHomeAccountId(e.client_info||Sr.EMPTY_STRING,La,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?Ra.fromString(e.scope):Ra.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===lo.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new Cf(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw Li(Ai);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,i){const a=this.addTelemetryFromNativeResponse(e),s=e.scope?Ra.fromString(e.scope):Ra.fromString(t.scope),c=e.account.properties||{},l=c.UID||n.oid||n.sub||Sr.EMPTY_STRING,u=c.TenantId||n.tid||Sr.EMPTY_STRING,d=Na(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),f=t.tokenType===lo.POP?lo.POP:lo.BEARER;return{authority:o,uniqueId:l,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:new Date(1e3*Number(i+e.expires_in)),tokenType:f,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e).catch((e=>{this.logger.error(`Error occurred while removing account context from browser storage. ${e}`)}))}cacheNativeTokens(e,t,n,r,o,i,a){const s=ji(n,t.authority,e.id_token||"",t.clientId,r.tid||""),c=a+(t.tokenType===lo.POP?Sr.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e,t),u={idToken:s,accessToken:Ki(n,t.authority,o,t.clientId,r.tid||i,l.printScopes(),c,0,od,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(u,this.correlationId,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw zo(Fo,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch(Fp){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new $a(t);n.validateAsUri();const{scopes:r,...o}=e,i=new Ra(r||[]);i.appendScopes(_r);const a={...o,accountId:this.accountId,clientId:this.config.auth.clientId,authority:n.urlString,scope:i.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:(()=>{switch(this.apiId){case Il:case _l:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),zr.NONE}if(e.prompt)switch(e.prompt){case zr.NONE:case zr.CONSENT:case zr.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Ju(zu)}else this.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(a.signPopToken&&e.popKid)throw Ju(ju);if(this.handleExtraBrokerParams(a),a.extraParameters=a.extraParameters||{},a.extraParameters.telemetry=Zc,e.authenticationScheme===lo.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new Cf(this.browserCrypto);let r;if(a.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:a.keyId})),a.signPopToken=!1;else{const o=await nh(n.generateCnf.bind(n),sc,this.logger,this.performanceClient,e.correlationId)(t,this.logger);r=o.reqCnfString,a.keyId=o.kid,a.signPopToken=!0}a.reqCnf=r}return this.addRequestSKUs(a),a}handleExtraBrokerParams(e){const t=e.extraParameters&&e.extraParameters.hasOwnProperty(pf)&&e.extraParameters.hasOwnProperty(gf)&&e.extraParameters.hasOwnProperty(sf);if(!e.embeddedClientId&&!t)return;let n="";const r=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,n=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[gf],n=e.extraParameters[sf]),e.extraParameters={child_client_id:n,child_redirect_uri:r},this.performanceClient?.addFields({embeddedClientId:n,embeddedRedirectUri:r},e.correlationId)}}class jf{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(Tc)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:Yc,extensionId:this.extensionId,responseId:vd(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise(((e,n)=>{this.resolvers.set(t.responseId,{resolve:e,reject:n})}))}static async createProvider(e,t,n){e.trace("NativeMessageHandler - createProvider called.");try{const r=new jf(e,t,n,Xc);return await r.sendHandshakeRequest(),r}catch(Fp){const o=new jf(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Yc,extensionId:this.extensionId,responseId:vd(),body:{method:el}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise(((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout((()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(Ju(Fu)),this.handshakeResolvers.delete(e.responseId)}),this.handshakeTimeoutMs)}))}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===Yc&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===el){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Ju(Hu))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===rl){if(!n)return;const e=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(e)}`),"Success"!==e.status)n.reject(Df(e.code,e.description,e.ext));else{if(!e.result)throw zo(Fo,"Event does not contain result.");e.result.code&&e.result.description?n.reject(Df(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===tl){if(!r)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(o){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${o}`),this.logger.errorPii(`Unable to parse ${e}`),n?n.reject(o):r&&r.reject(o)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isPlatformBrokerAvailable(e,t,n,r){if(t.trace("isPlatformBrokerAvailable called"),!e.system.allowPlatformBroker)return t.trace("isPlatformBrokerAvailable: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformBrokerAvailable: Platform extension provider is not initialized, returning false"),!1;if(r)switch(r){case lo.BEARER:case lo.POP:return t.trace("isPlatformBrokerAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformBrokerAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class Kf{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(tc,t.correlationId);try{n=this.authModule.handleFragmentResponse(e,t.state)}catch(Fp){throw Fp instanceof of&&Fp.subError===uu?Ju(uu):Fp}return nh(this.handleCodeResponseFromServer.bind(this),ec,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(ec,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await nh(this.authModule.updateAuthority.bind(this.authModule),nc,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await nh(this.authModule.acquireToken.bind(this.authModule),rc,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:yh}:e.loginHint?{credential:e.loginHint,type:vh}:null}}function Wf(e,t,n){const r=za(e);if(!r)throw Ba(e)?(n.error(`A ${t} is present in the iframe but it does not contain known properties. It's likely that the ${t} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${t} detected is: ${e}`),Ju(ou)):(n.error(`The request has returned to the redirectUri but a ${t} is not present. It's likely that the ${t} has been removed or the page has been redirected by code running on the redirectUri page.`),Ju(nu));return r}class Qf extends Lf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s}acquireToken(e,t){try{const n={popupName:this.generatePopupName(e.scopes||_r,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,t)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(e,n,t))}catch(Fp){return Promise.reject(Fp)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),n={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},r=e&&e.authority,o=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,n,r,o)):(this.logger.verbose("asyncPopup set to false, opening popup"),n.popup=this.openSizedPopup("about:blank",n),this.logoutPopupAsync(t,n,r,o))}catch(Fp){return Promise.reject(Fp)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(Tl),o=await nh(this.initializeAuthorizationRequest.bind(this),Ys,this.logger,this.performanceClient,this.correlationId)(e,Ol.Popup);t.popup&&Hd(o.authority);try{const i=await nh(this.initializeAuthorizationCodeRequest.bind(this),Xs,this.logger,this.performanceClient,this.correlationId)(o,n),a=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),s=jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let c;s&&(c=this.performanceClient.startMeasurement(Es,e.correlationId));const l=await a.getAuthCodeUrl({...o,platformBroker:s}),u=new Kf(a,this.browserStorage,i,this.logger,this.performanceClient),d=this.initiateAuthRequest(l,t);this.eventHandler.emitEvent(Gh,Ol.Popup,{popupWindow:d},null);const h=await this.monitorPopupForHash(d,t.popupWindowParent),f=th(Wf,uc,this.logger,this.performanceClient,this.correlationId)(h,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(af.removeThrottle(this.browserStorage,this.config.auth.clientId,i),f.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),c&&c.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Ju(Du);const e=new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tl,this.performanceClient,this.nativeMessageHandler,f.accountId,this.nativeStorage,o.correlationId),{userRequestState:t}=mh.parseRequestState(this.browserCrypto,o.state);return await e.acquireToken({...o,state:t,prompt:void 0})}return await u.handleCodeResponse(f,o)}catch(Fp){throw t.popup?.close(),Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),r.cacheFailedRequest(Fp)),Fp}}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Jh,Ol.Popup,e);const o=this.initializeServerTelemetryManager(Pl);try{await this.clearCacheOnLogout(e.account);const i=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{i.authority.endSessionEndpoint}catch{if(e.account?.homeAccountId&&e.postLogoutRedirectUri&&i.authority.protocolMode===qo){if(this.browserStorage.removeAccount(e.account?.homeAccountId),this.eventHandler.emitEvent(Yh,Ol.Popup,e),r){const e={apiId:Pl,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=$a.getAbsoluteUrl(r,Md());await this.navigationClient.navigateInternal(t,e)}return void t.popup?.close()}}const a=i.getLogoutUri(e);this.eventHandler.emitEvent(Yh,Ol.Popup,e);const s=this.openPopup(a,t);if(this.eventHandler.emitEvent(Gh,Ol.Popup,{popupWindow:s},null),await this.monitorPopupForHash(s,t.popupWindowParent).catch((()=>{})),r){const e={apiId:Pl,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=$a.getAbsoluteUrl(r,Md());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${t}`),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(Fp){throw t.popup?.close(),Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),o.cacheFailedRequest(Fp)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(Xh,Ol.Popup,null,Fp),this.eventHandler.emitEvent(Zh,Ol.Popup),Fp}this.eventHandler.emitEvent(Zh,Ol.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Ju(tu)}monitorPopupForHash(e,t){return new Promise(((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval((()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(Ju(uu));let o="";try{o=e.location.href}catch(Fp){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===jr.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)}),this.config.system.pollIntervalMilliseconds)})).finally((()=>{this.cleanPopup(e,t)}))}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii(`Opening popup window to: ${e}`),n=this.openSizedPopup(e,t)),!n)throw Ju(lu);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(Fp){throw this.logger.error("error opening popup "+Fp.message),this.browserStorage.setInteractionInProgress(!1),Ju(cu)}}openSizedPopup(e,t){let{popupName:n,popupWindowAttributes:r,popupWindowParent:o}=t;const i=o.screenLeft?o.screenLeft:o.screenX,a=o.screenTop?o.screenTop:o.screenY,s=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let l=r.popupSize?.width,u=r.popupSize?.height,d=r.popupPosition?.top,h=r.popupPosition?.left;return(!l||l<0||l>s)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),l=Wc),(!u||u<0||u>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=Qc),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-Qc/2+a)),(!h||h<0||h>s)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,s/2-Wc/2+i)),o.open(e,n,`width=${l}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Ol.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${Vc}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${Vc}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}class Vf{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(hl,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(yl,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const n={apiId:Sl,timeout:t.redirectTimeout,noHistory:!1};if("function"===typeof t.onRedirectNavigate){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==t.onRedirectNavigate(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await t.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await t.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Ju(tu)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const n=this.browserStorage.generateStateKey(t),r=this.browserStorage.getTemporaryCache(n);if(!r)throw Li(Zo,"Cached State");let o;try{o=this.authModule.handleFragmentResponse(e,r)}catch(Fp){throw Fp instanceof of&&Fp.subError===uu?Ju(uu):Fp}const i=this.browserStorage.generateNonceKey(r),a=this.browserStorage.getTemporaryCache(i);if(this.authCodeRequest.code=o.code,o.cloud_instance_host_name&&await nh(this.authModule.updateAuthority.bind(this.authModule),nc,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(o.cloud_instance_host_name,this.authCodeRequest.correlationId),o.nonce=a||void 0,o.state=r,o.client_info)this.authCodeRequest.clientInfo=o.client_info;else{const e=this.checkCcsCredentials();e&&(this.authCodeRequest.ccsCredential=e)}const s=await this.authModule.acquireToken(this.authCodeRequest,o);return this.browserStorage.cleanRequestByState(t),s}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(ml,!0);if(e)try{return JSON.parse(e)}catch(Fp){this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class Gf extends Lf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await nh(this.initializeAuthorizationRequest.bind(this),Ys,this.logger,this.performanceClient,this.correlationId)(e,Ol.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const n=this.initializeServerTelemetryManager(Sl),r=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(ef,Ol.Redirect))};try{const o=await nh(this.initializeAuthorizationCodeRequest.bind(this),Xs,this.logger,this.performanceClient,this.correlationId)(t),i=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new Vf(i,this.browserStorage,o,this.logger,this.performanceClient),s=await i.getAuthCodeUrl({...t,platformBroker:jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",r),await a.initiateAuthRequest(s,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(Fp){throw Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),n.cacheFailedRequest(Fp)),window.removeEventListener("pageshow",r),this.browserStorage.cleanRequestByState(t.state),Fp}}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;const n=this.initializeServerTelemetryManager(El);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[r,o]=this.getRedirectResponse(e||"");if(!r)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Ol.Redirect),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return t?.type}()?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const i=this.browserStorage.getTemporaryCache(hl,!0)||Sr.EMPTY_STRING,a=$a.removeHashFromUrl(i);if(a===$a.removeHashFromUrl(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),i.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(i);return await this.handleResponse(r,n)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(r,n);if(!xd()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(fl,o,!0);const e={apiId:El,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let t=!0;if(i&&"null"!==i)this.logger.verbose(`Navigating to loginRequestUrl: ${i}`),t=await this.navigationClient.navigateInternal(i,e);else{const n=function(){const e=new $a(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();this.browserStorage.setTemporaryCache(hl,n,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),t=await this.navigationClient.navigateInternal(n,e)}if(!t)return await this.handleResponse(r,n)}return null}catch(Fp){throw Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),n.cacheFailedRequest(Fp)),this.browserStorage.cleanRequestByInteractionType(Ol.Redirect),Fp}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===jr.QUERY?window.location.search:window.location.hash);let n=za(t);if(n){try{!function(e,t,n){if(!e.state)throw Ju(ru);const r=_h(t,e.state);if(!r)throw Ju(iu);if(r.interactionType!==n)throw Ju(au)}(n,this.browserCrypto,Ol.Redirect)}catch(Fp){return Fp instanceof Bo&&this.logger.error(`Interaction type validation failed due to ${Fp.errorCode}: ${Fp.errorMessage}`),[null,""]}return(r=window).location.hash="","function"===typeof r.history.replaceState&&r.history.replaceState(null,"",`${r.location.origin}${r.location.pathname}${r.location.search}`),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}var r;const o=this.browserStorage.getTemporaryCache(fl,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(fl)),o&&(n=za(o),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,o]):[null,""]}async handleResponse(e,t){const n=e.state;if(!n)throw Ju(ru);const r=this.browserStorage.getCachedRequest(n);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ju(Du);const t=new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Tl,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,r.correlationId),{userRequestState:o}=mh.parseRequestState(this.browserCrypto,n);return t.acquireToken({...r,state:o,prompt:void 0}).finally((()=>{this.browserStorage.cleanRequestByState(n)}))}const o=this.browserStorage.getCachedAuthority(n);if(!o)throw Ju(ku);const i=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:o});af.removeThrottle(this.browserStorage,this.config.auth.clientId,r);return new Vf(i,this.browserStorage,r,this.logger,this.performanceClient).handleCodeResponse(e,n)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Rl);try{this.eventHandler.emitEvent(Jh,Ol.Redirect,e),await this.clearCacheOnLogout(t.account);const r={apiId:Rl,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},o=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0});if(o.authority.protocolMode===qo)try{o.authority.endSessionEndpoint}catch{if(t.account?.homeAccountId)return this.browserStorage.removeAccount(t.account?.homeAccountId),void this.eventHandler.emitEvent(Yh,Ol.Redirect,t)}const i=o.getLogoutUri(t);if(this.eventHandler.emitEvent(Yh,Ol.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(i,r);if(!1!==e.onRedirectNavigate(i))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),void await this.navigationClient.navigateExternal(i,r);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(Fp){throw Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),n.cacheFailedRequest(Fp)),this.eventHandler.emitEvent(Xh,Ol.Redirect,null,Fp),this.eventHandler.emitEvent(Zh,Ol.Redirect),Fp}this.eventHandler.emitEvent(Zh,Ol.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return $a.getAbsoluteUrl(t,Md())}}async function Jf(e,t,n,r,o){if(t.addQueueMeasurement(Ks,r),!e)throw n.info("Navigate url is empty"),Ju(tu);return o?nh(Xf,Qs,n,t,r)(e,o,t,r):th(Zf,Vs,n,t,r)(e)}async function Yf(e,t,n,r,o,i,a){return r.addQueueMeasurement(Ws,i),new Promise(((r,i)=>{t<Dd&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${t}ms) than the default (10000ms). This may result in timeouts.`);const s=window.setTimeout((()=>{window.clearInterval(c),i(Ju(hu))}),t),c=window.setInterval((()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(Fp){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===jr.QUERY?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)}),n)})).finally((()=>{th(tp,Ic,o,r,i)(e)}))}function Xf(e,t,n,r){return n.addQueueMeasurement(Qs,r),new Promise(((n,r)=>{const o=ep();window.setTimeout((()=>{o?(o.src=e,n(o)):r("Unable to load iframe")}),t)}))}function Zf(e){const t=ep();return t.src=e,t}function ep(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function tp(e){document.body===e.parentNode&&document.body.removeChild(e)}class np extends Lf{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(Cs,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==zr.NONE&&t.prompt!==zr.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${zr.NONE}`),t.prompt=zr.NONE):t.prompt=zr.NONE;const n=await nh(this.initializeAuthorizationRequest.bind(this),Ys,this.logger,this.performanceClient,e.correlationId)(t,Ol.Silent);Hd(n.authority);const r=this.initializeServerTelemetryManager(this.apiId);let o;try{return o=await nh(this.createAuthCodeClient.bind(this),Gs,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),await nh(this.silentTokenHelper.bind(this),js,this.logger,this.performanceClient,e.correlationId)(o,n)}catch(Fp){if(Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),r.cacheFailedRequest(Fp)),!o||!(Fp instanceof Bo)||Fp.errorCode!==Kc)throw Fp;this.performanceClient.addFields({retryError:Fp.errorCode},this.correlationId);const i=await nh(this.initializeAuthorizationRequest.bind(this),Ys,this.logger,this.performanceClient,e.correlationId)(t,Ol.Silent);return await nh(this.silentTokenHelper.bind(this),js,this.logger,this.performanceClient,this.correlationId)(o,i)}}logout(){return Promise.reject(Ju(yu))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(js,n);const r=await nh(this.initializeAuthorizationCodeRequest.bind(this),Xs,this.logger,this.performanceClient,n)(t),o=await nh(e.getAuthCodeUrl.bind(e),Zs,this.logger,this.performanceClient,n)({...t,platformBroker:jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),i=new Kf(e,this.browserStorage,r,this.logger,this.performanceClient),a=await nh(Jf,Ks,this.logger,this.performanceClient,n)(o,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait),s=this.config.auth.OIDCOptions.serverResponseType,c=await nh(Yf,Ws,this.logger,this.performanceClient,n)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,s),l=th(Wf,uc,this.logger,this.performanceClient,this.correlationId)(c,s,this.logger);if(l.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Ju(Du);const e=new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,l.accountId,this.browserStorage,n),{userRequestState:r}=mh.parseRequestState(this.browserCrypto,t.state);return nh(e.acquireToken.bind(e),As,this.logger,this.performanceClient,n)({...t,state:r,prompt:t.prompt||zr.NONE})}return nh(i.handleCodeResponse.bind(i),tc,this.logger,this.performanceClient,n)(l,t)}}class rp extends wf{constructor(e,t){super(e,t)}async acquireToken(e){this.performanceClient?.addQueueMeasurement(xs,e.correlationId);const t=Bi(),n=await nh(this.executeTokenRequest.bind(this),Os,this.logger,this.performanceClient,e.correlationId)(e,this.authority),r=n.headers?.[Nr],o=new Sf(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return o.validateTokenResponse(n.body),nh(o.handleServerTokenResponse.bind(o),lc,this.logger,this.performanceClient,e.correlationId)(n.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,r)}async acquireTokenByRefreshToken(e){if(!e)throw Aa(da);if(this.performanceClient?.addQueueMeasurement(Ns,e.correlationId),!e.account)throw Li(fi);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await nh(this.acquireTokenWithCachedRefreshToken.bind(this),Ms,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(Fp){const n=Fp instanceof fh&&Fp.errorCode===ah,r=Fp instanceof of&&Fp.errorCode===go&&Fp.subError===mo;if(n||r)return nh(this.acquireTokenWithCachedRefreshToken.bind(this),Ms,this.logger,this.performanceClient,e.correlationId)(e,!1);throw Fp}return nh(this.acquireTokenWithCachedRefreshToken.bind(this),Ms,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){this.performanceClient?.addQueueMeasurement(Ms,e.correlationId);const n=th(this.cacheManager.getRefreshToken.bind(this.cacheManager),Ac,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!n)throw gh(ah);if(n.expiresOn&&zi(n.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),gh(ch);const r={...e,refreshToken:n.secret,authenticationScheme:e.authenticationScheme||lo.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:yh}};try{return await nh(this.acquireToken.bind(this),xs,this.logger,this.performanceClient,e.correlationId)(r)}catch(Fp){if(Fp instanceof fh&&(this.performanceClient?.addFields({rtExpiresOnMs:Number(n.expiresOn)},e.correlationId),Fp.subError===lh)){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const e=$i(n);this.cacheManager.removeRefreshToken(e)}throw Fp}}async executeTokenRequest(e,t){this.performanceClient?.addQueueMeasurement(Os,e.correlationId);const n=this.createTokenQueryParameters(e),r=$a.appendQueryString(t.tokenEndpoint,n),o=await nh(this.createTokenRequestBody.bind(this),Ls,this.logger,this.performanceClient,e.correlationId)(e),i=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:e.tokenBodyParameters?.clientId||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return nh(this.executePostToTokenEndpoint.bind(this),Rs,this.logger,this.performanceClient,e.correlationId)(r,o,i,a,e.correlationId,Rs)}async createTokenRequestBody(e){this.performanceClient?.addQueueMeasurement(Ls,e.correlationId);const t=e.correlationId,n=new yf(t,this.performanceClient);if(n.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[sf]||this.config.authOptions.clientId),e.redirectUri&&n.addRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.config.authOptions.authority.options.OIDCOptions?.defaultScopes),n.addGrantType(Qr),n.addClientInfo(),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!ls(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),n.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await If(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(t.assertionType)}if(e.authenticationScheme===lo.POP){const t=new Cf(this.cryptoUtils,this.performanceClient);let r;if(e.popKid)r=this.cryptoUtils.encodeKid(e.popKid);else{r=(await nh(t.generateCnf.bind(t),sc,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}n.addPopToken(r)}else if(e.authenticationScheme===lo.SSH){if(!e.sshJwk)throw Aa(va);n.addSshJwk(e.sshJwk)}if((!_a.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case yh:try{const t=Oa(e.ccsCredential.credential);n.addCcsOid(t)}catch(Fp){this.logger.verbose("Could not parse home account ID for CCS Header: "+Fp)}break;case vh:n.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),n.createQueryString()}}class op extends Lf{async acquireToken(e){this.performanceClient.addQueueMeasurement(Ss,e.correlationId);const t=await nh(Mf,Ds,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n={...e,...t};e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(_l),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return nh(o.acquireTokenByRefreshToken.bind(o),Ns,this.logger,this.performanceClient,e.correlationId)(n).catch((e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e}))}logout(){return Promise.reject(Ju(yu))}async createRefreshTokenClient(e){const t=await nh(this.getClientConfiguration.bind(this),Js,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new rp(t,this.performanceClient)}}class ip{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw Ju(Iu);const r=e.correlationId||vd(),o=t.id_token?Hi(t.id_token,od):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new oh(oh.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||vd()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),c=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:l,refreshToken:u},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=Da.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Ju(Ou);const i=Da.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=r?.tid,s=Tf(this.storage,o,i,od,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=ji(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?Ra.fromString(t.scope):new Ra(e.scopes),c=i.expiresOn||t.expires_in+(new Date).getTime()/1e3,l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+(new Date).getTime()/1e3,u=Ki(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),c,l,od);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=Wi(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){let o,i="",a=[],s=null;t?.accessToken&&(i=t.accessToken.secret,a=Ra.fromString(t.accessToken.target).asArray(),s=new Date(1e3*Number(t.accessToken.expiresOn)),o=new Date(1e3*Number(t.accessToken.extendedExpiresOn)));const c=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:a,account:c.getAccountInfo(),idToken:t.idToken?.secret||"",idTokenClaims:n||{},accessToken:i,fromCache:!0,expiresOn:s,correlationId:e.correlationId||"",requestId:"",extExpiresOn:o,familyId:t.refreshToken?.familyId||"",tokenType:t?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}}class ap extends Ef{constructor(e){super(e),this.includeRedirectUri=!1}}class sp extends Lf{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Ju(Mu);const t=await nh(this.initializeAuthorizationRequest.bind(this),Ys,this.logger,this.performanceClient,e.correlationId)(e,Ol.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r={...t,code:e.code},o=await nh(this.getClientConfiguration.bind(this),Js,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new ap(o);this.logger.verbose("Auth code client created");const a=new Kf(i,this.browserStorage,r,this.logger,this.performanceClient);return await nh(a.handleCodeResponseFromServer.bind(a),ec,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(Fp){throw Fp instanceof Bo&&(Fp.setCorrelationId(this.correlationId),n.cacheFailedRequest(Fp)),Fp}}logout(){return Promise.reject(Ju(yu))}}function cp(e){const t=e?.idTokenClaims;return t?.tfp||t?.acr?"B2C":t?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===t?.tid?"MSA":"AAD":void 0}function lp(e,t){try{Ud(e)}catch(Fp){throw t.end({success:!1},Fp),Fp}}class up{constructor(e){var t,n,r,o;this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Zd(this.logger,this.performanceClient):qi,this.eventHandler=new rf(this.logger),this.browserStorage=this.isBrowserEnvironment?new tf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(Fp){throw Aa(ga)}return{canonicalAuthority:e.authority?ih(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):(t=this.config.auth.clientId,n=this.logger,r=this.performanceClient,o=this.eventHandler,new tf(t,{cacheLocation:al,temporaryCacheLocation:al,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},qi,n,r,o));const i={cacheLocation:al,temporaryCacheLocation:al,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new tf(this.config.auth.clientId,i,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new ip(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new up(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(Ph);const t=e?.correlationId||this.getRequestCorrelationId(),n=this.config.system.allowPlatformBroker,r=this.performanceClient.startMeasurement(zs,t);if(this.eventHandler.emitEvent(Rh),await nh(this.browserStorage.initialize.bind(this.browserStorage),$s,this.logger,this.performanceClient,t)(t),n)try{this.nativeExtensionProvider=await jf.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(Fp){this.logger.verbose(Fp)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await nh(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),Ec,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t),this.initialized=!0,this.eventHandler.emitEvent(Ph),r.end({allowPlatformBroker:n,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),qd(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),n=this.browserStorage.getCachedNativeRequest(),r=n&&jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,o=r?n?.correlationId:this.browserStorage.getTemporaryCache(yl,!0)||"",i=this.performanceClient.startMeasurement(ys,o);let a;if(this.eventHandler.emitEvent(Qh,Ol.Redirect),r&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const e=new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,El,this.performanceClient,this.nativeExtensionProvider,n.accountId,this.nativeInternalStorage,n.correlationId);a=nh(e.handleRedirectPromise.bind(e),Sc,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const t=this.createRedirectClient(o);a=nh(t.handleRedirectPromise.bind(t),kc,this.logger,this.performanceClient,i.event.correlationId)(e,i)}return a.then((e=>{if(e){t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Lh,Ol.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Fh,Ol.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0,accountType:cp(e.account)})}else i.event.errorCode?i.end({success:!1}):i.discard();return this.eventHandler.emitEvent(Vh,Ol.Redirect),e})).catch((e=>{const n=e;throw t.length>0?this.eventHandler.emitEvent(Hh,Ol.Redirect,null,n):this.eventHandler.emitEvent(qh,Ol.Redirect,null,n),this.eventHandler.emitEvent(Vh,Ol.Redirect),i.end({success:!1},n),e}))}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(ms,t);n.add({accountType:cp(e.account),scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=e=>{const t="function"===typeof r?r(e):void 0;return!1!==t?n.end({success:!0}):n.discard(),t};else{const e=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=t=>{const r="function"===typeof e?e(t):void 0;return!1!==r?n.end({success:!0}):n.discard(),r}}const o=this.getAllAccounts().length>0;try{let r;if(Fd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),o?this.eventHandler.emitEvent(Uh,Ol.Redirect,e):this.eventHandler.emitEvent(Nh,Ol.Redirect,e),this.nativeExtensionProvider&&this.canUsePlatformBroker(e)){r=new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Sl,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch((n=>{if(n instanceof Ff&&Hf(n)){this.nativeExtensionProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(n instanceof fh){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw this.browserStorage.setInteractionInProgress(!1),n}))}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(Fp){throw n.end({success:!1},Fp),o?this.eventHandler.emitEvent(Hh,Ol.Redirect,null,Fp):this.eventHandler.emitEvent(qh,Ol.Redirect,null,Fp),Fp}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(gs,t);n.add({scenarioId:e.scenarioId,accountType:cp(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),lp(this.initialized,n),this.browserStorage.setInteractionInProgress(!0)}catch(Fp){return Promise.reject(Fp)}const r=this.getAllAccounts();let o;r.length>0?this.eventHandler.emitEvent(Uh,Ol.Popup,e):this.eventHandler.emitEvent(Nh,Ol.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))o=this.acquireTokenNative({...e,correlationId:t},Tl).then((e=>(this.browserStorage.setInteractionInProgress(!1),n.end({success:!0,isNativeBroker:!0,accountType:cp(e.account)}),e))).catch((n=>{if(n instanceof Ff&&Hf(n)){this.nativeExtensionProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(n instanceof fh){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw this.browserStorage.setInteractionInProgress(!1),n}));else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then((e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Lh,Ol.Popup,e):this.eventHandler.emitEvent(Fh,Ol.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cp(e.account)}),e))).catch((e=>(r.length>0?this.eventHandler.emitEvent(Hh,Ol.Popup,null,e):this.eventHandler.emitEvent(qh,Ol.Popup,null,e),n.end({success:!1},e),Promise.reject(e)))).finally((()=>this.config.system.asyncPopups&&this.preGeneratePkceCodes(t)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){const t=this.getRequestCorrelationId(e),n={...e,prompt:e.prompt,correlationId:t};let r;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(Ts,t),this.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:cp(e.account)}),lp(this.initialized,this.ssoSilentMeasurement),this.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(Bh,Ol.Silent,n),this.canUsePlatformBroker(n))r=this.acquireTokenNative(n,Il).catch((e=>{if(e instanceof Ff&&Hf(e)){this.nativeExtensionProvider=void 0;return this.createSilentIframeClient(n.correlationId).acquireToken(n)}throw e}));else{r=this.createSilentIframeClient(n.correlationId).acquireToken(n)}return r.then((e=>(this.eventHandler.emitEvent(zh,Ol.Silent,e),this.ssoSilentMeasurement?.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cp(e.account)}),e))).catch((e=>{throw this.eventHandler.emitEvent($h,Ol.Silent,null,e),this.ssoSilentMeasurement?.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(ds,t);lp(this.initialized,n),this.eventHandler.emitEvent(jh,Ol.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Ju(Lu);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync({...e,correlationId:t}).then((e=>(this.eventHandler.emitEvent(Kh,Ol.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,isNativeBroker:e.fromNativeBroker,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length,accountType:cp(e.account)}),e))).catch((e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Wh,Ol.Silent,null,e),n.end({success:!1},e),e})),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){const r=await this.acquireTokenNative({...e,correlationId:t},Al,e.nativeAccountId).catch((e=>{throw e instanceof Ff&&Hf(e)&&(this.nativeExtensionProvider=void 0),e}));return n.end({accountType:cp(r.account),success:!0}),r}throw Ju(Uu)}throw Ju(Nu)}catch(Fp){throw this.eventHandler.emitEvent(Wh,Ol.Silent,null,Fp),n.end({success:!1},Fp),Fp}}async acquireTokenByCodeAsync(e){this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(Cc,e.correlationId),this.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const t=this.createSilentAuthCodeClient(e.correlationId);return await t.acquireToken(e).then((e=>(this.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:e.fromCache,isNativeBroker:e.fromNativeBroker}),e))).catch((e=>{throw this.acquireTokenByCodeAsyncMeasurement?.end({success:!1},e),e})).finally((()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)}))}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(qs,e.correlationId),t){case $l:case jl:case Kl:const t=this.createSilentCacheClient(e.correlationId);return nh(t.acquireToken.bind(t),bs,this.logger,this.performanceClient,e.correlationId)(e);default:throw Li(Ci)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(hs,e.correlationId),t){case $l:case Kl:case Wl:case Ql:const t=this.createSilentRefreshClient(e.correlationId);return nh(t.acquireToken.bind(t),Ss,this.logger,this.performanceClient,e.correlationId)(e);default:throw Li(Ci)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(Hs,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return nh(t.acquireToken.bind(t),Cs,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);Fd(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);Ud(this.initialized),this.browserStorage.setInteractionInProgress(!0);return this.createPopupClient(t).logout(e)}catch(Fp){return Promise.reject(Fp)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return function(e,t,n,r){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return function(e,t,n){if(t.trace("getAccount called"),0===Object.keys(e).length)return t.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(e);return r?(t.verbose("getAccount: Account matching provided filter found, returning"),r):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByUsername(e){return function(e,t,n){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:e});return r?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${e}`),r):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return function(e,t,n){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:e});return r?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${e}`),r):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return function(e,t,n){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:e});return r?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${e}`),r):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage)}setActiveAccount(e){!function(e,t){t.setActiveAccount(e)}(e,this.browserStorage)}getActiveAccount(){return this.browserStorage.getActiveAccount()}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=Da.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Ju(Du);return new $f(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isPlatformBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case zr.NONE:case zr.CONSENT:case zr.LOGIN:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace(`canUsePlatformBroker: prompt = ${e.prompt} is not compatible with platform broker flow, returning false`),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new Qf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new Gf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new np(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Il,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new zf(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new op(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new sp(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Al,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return Ld(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===ol?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===ol?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?vd():Sr.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||Hl})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||Hl})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(fs,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),lp(this.initialized,n),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw Ju(vu);n.add({accountType:cp(r)});const o={clientId:this.config.auth.clientId,authority:e.authority||Sr.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:r.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},i=JSON.stringify(o),a=this.activeSilentTokenRequests.get(i);if("undefined"===typeof a){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const o=nh(this.acquireTokenSilentAsync.bind(this),ps,this.logger,this.performanceClient,t)({...e,correlationId:t},r).then((t=>(this.activeSilentTokenRequests.delete(i),n.end({success:!0,fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:t.accessToken.length,idTokenSize:t.idToken.length}),t))).catch((e=>{throw this.activeSilentTokenRequests.delete(i),n.end({success:!1},e),e}));return this.activeSilentTokenRequests.set(i,o),{...await o,state:e.state}}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),n.discard(),{...await a,state:e.state}}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(ps,e.correlationId),this.eventHandler.emitEvent(Uh,Ol.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await nh(Nf,Bs,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||$l;return this.acquireTokenSilentNoIframe(r,o).catch((async e=>{const t=function(e,t){const n=!(e instanceof fh&&e.subError!==lh),r=e.errorCode===Kc||e.errorCode===Ci,o=n&&r||e.errorCode===ah||e.errorCode===ch,i=Gl.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==Vl){const[t,n]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${n}`,r.correlationId);const i=this.performanceClient.startMeasurement(ks,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose(`Parallel iframe request with correlationId: ${n} succeeded. Retrying cache and/or RT redemption`,r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info(`Iframe request with correlationId: ${n} failed. Interaction is required.`),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),nh(this.acquireTokenBySilentIframe.bind(this),Hs,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise((t=>{e=t})),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),nh(this.acquireTokenBySilentIframe.bind(this),Hs,this.logger,this.performanceClient,r.correlationId)(r).then((t=>(e(!0),t))).catch((t=>{throw e(!1),t})).finally((()=>{this.activeIframeRequest=void 0}))}}throw e})).then((t=>(this.eventHandler.emitEvent(Fh,Ol.Silent,t),e.correlationId&&this.performanceClient.addFields({fromCache:t.fromCache,isNativeBroker:t.fromNativeBroker},e.correlationId),t))).catch((e=>{throw this.eventHandler.emitEvent(Hh,Ol.Silent,null,e),e})).finally((()=>{document.removeEventListener("visibilitychange",n)}))}async acquireTokenSilentNoIframe(e,t){return jf.isPlatformBrokerAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,_l).catch((async e=>{if(e instanceof Ff&&Hf(e))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Li(Ci);throw e}))):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),nh(this.acquireTokenFromCache.bind(this),qs,this.logger,this.performanceClient,e.correlationId)(e,t).catch((n=>{if(t===jl)throw n;return this.eventHandler.emitEvent(Dh,Ol.Silent,e),nh(this.acquireTokenByRefreshToken.bind(this),hs,this.logger,this.performanceClient,e.correlationId)(e,t)})))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await nh(Pf,Oc,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?{...this.pkceCode}:void 0;return this.pkceCode=void 0,this.logger.verbose((t?"Found":"Did not find")+" pre-generated PKCE codes"),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}}class dp{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new $d(e);return await n.initialize(),up.createController(n,t)}(e);return new dp(e,t)}constructor(e,t){this.controller=t||new up(new $d(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}const hp={auth:{clientId:"71a81f6b-6b96-4390-8c99-c7f9caaeb5c4",authority:"https://bytepantry.b2clogin.com/bytepantry.onmicrosoft.com/B2C_1_B2C_1A_SIGNUP_SIGNIN",knownAuthorities:["bytepantry.b2clogin.com"],redirectUri:"http://localhost:3000",navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}},fp={scopes:["openid","profile","email"]},pp={authority:"https://bytepantry.b2clogin.com/bytepantry.onmicrosoft.com/B2C_1_B2C_1A_PASSWORD_RESET",scopes:["openid","profile","email"]},gp=new dp(hp),mp=kr.create({baseURL:"http://localhost:3000",headers:{"Content-Type":"application/json"}});mp.interceptors.request.use((async e=>{const t=await(async()=>{const e=gp.getAllAccounts();if(0===e.length)return null;try{return(await gp.acquireTokenSilent({...fp,account:e[0]})).idToken}catch(t){return console.error("Error acquiring token:",t),null}})();return t&&(e.headers.Authorization=`Bearer ${t}`),e}));const yp=()=>{gp.logoutPopup().then((()=>{localStorage.removeItem("jwtToken"),window.location.href="/login"})).catch((e=>{console.error("Logout failed:",e)}))};var vp=n(579);const wp=()=>{const e=te(),[t,n]=(0,o.useState)([]);(0,o.useEffect)((()=>{r()}),[]);const r=async()=>{try{const e=await(async()=>{try{return(await mp.get("/api/pantry")).data}catch(e){throw console.error("Error fetching pantry items:",e),e}})();n(e)}catch(t){alert("Failed to fetch pantry items. Please log in again."),yp(),e("/login")}};return(0,vp.jsxs)("div",{style:{textAlign:"center",marginTop:"20px"},children:[(0,vp.jsx)("h2",{children:"Welcome to BytePantry"}),(0,vp.jsx)("button",{onClick:()=>{yp(),e("/login")},children:"Logout"}),(0,vp.jsx)("h3",{children:"Your Pantry Items:"}),(0,vp.jsx)("ul",{children:t.map((e=>(0,vp.jsxs)("li",{children:[e.name," - ",e.expiryDate]},e.itemID)))})]})},bp={instance:{initialize:()=>Promise.reject(Od(Ad)),acquireTokenPopup:()=>Promise.reject(Od(Ad)),acquireTokenRedirect:()=>Promise.reject(Od(Ad)),acquireTokenSilent:()=>Promise.reject(Od(Ad)),acquireTokenByCode:()=>Promise.reject(Od(Ad)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Od(Ad)),loginPopup:()=>Promise.reject(Od(Ad)),loginRedirect:()=>Promise.reject(Od(Ad)),logout:()=>Promise.reject(Od(Ad)),logoutRedirect:()=>Promise.reject(Od(Ad)),logoutPopup:()=>Promise.reject(Od(Ad)),ssoSilent:()=>Promise.reject(Od(Ad)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Od(Ad)},getLogger:()=>{throw Od(Ad)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Od(Ad)},hydrateCache:()=>Promise.reject(Od(Ad)),clearCache:()=>Promise.reject(Od(Ad))},inProgress:Fl,accounts:[],logger:new No({})},Cp=o.createContext(bp);Cp.Consumer;class kp{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Nh:return Ml;case Bh:return ql;case Uh:if(e.interactionType===Ol.Redirect||e.interactionType===Ol.Popup)return Ll;break;case Qh:return Ul;case Jh:return Nl;case zh:case $h:if(t&&t!==ql)break;return Fl;case Zh:if(t&&t!==Nl)break;return Fl;case Vh:if(t&&t!==Ul)break;return Fl;case Lh:case qh:case Fh:case Hh:case ef:if(e.interactionType===Ol.Redirect||e.interactionType===Ol.Popup){if(t&&t!==Ml&&t!==Ll)break;return Fl}}return null}}function Sp(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every((e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)}))}const Tp="3.0.5",Ip="UNBLOCK_INPROGRESS",Ep="EVENT",Ap=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case Ip:e.inProgress===xl&&(o=Fl,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Ep:const t=r.message,i=kp.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info(`MsalProvider - ${t.eventType} results in setting inProgress from ${e.inProgress} to ${i}`),o=i);break;default:throw new Error(`Unknown action type: ${n}`)}const i=r.instance.getAllAccounts();return o===e.inProgress||Sp(i,e.accounts)?o!==e.inProgress?{...e,inProgress:o}:Sp(i,e.accounts)?e:{...e,accounts:i}:{...e,inProgress:o,accounts:i}};function _p(e){let{instance:t,children:n}=e;(0,o.useEffect)((()=>{t.initializeWrapperLibrary(Dl,Tp)}),[t]);const r=(0,o.useMemo)((()=>t.getLogger().clone("@azure/msal-react",Tp)),[t]),[i,a]=(0,o.useReducer)(Ap,void 0,(()=>({inProgress:xl,accounts:t.getAllAccounts()})));(0,o.useEffect)((()=>{const e=t.addEventCallback((e=>{a({payload:{instance:t,logger:r,message:e},type:Ep})}));return r.verbose(`MsalProvider - Registered event callback with id: ${e}`),t.initialize().then((()=>{t.handleRedirectPromise().catch((()=>{})).finally((()=>{a({payload:{instance:t,logger:r},type:Ip})}))})).catch((()=>{})),()=>{e&&(r.verbose(`MsalProvider - Removing event callback ${e}`),t.removeEventCallback(e))}}),[t,r]);const s={instance:t,inProgress:i.inProgress,accounts:i.accounts,logger:r};return o.createElement(Cp.Provider,{value:s},n)}const Rp=()=>(0,o.useContext)(Cp);function Pp(){const{instance:e}=Rp();return(0,vp.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,vp.jsxs)("div",{className:"max-w-md w-full bg-white p-6 rounded-lg shadow-md",children:[(0,vp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-700",children:"Login with Azure AD B2C"}),(0,vp.jsx)("button",{onClick:()=>{e.loginRedirect(fp)},className:"w-full py-2 mb-4 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700 transition-colors",children:"Login"}),(0,vp.jsx)("button",{onClick:()=>{e.loginRedirect(pp)},className:"w-full py-2 bg-gray-200 text-gray-700 font-semibold rounded-md hover:bg-gray-300 transition-colors",children:"Forgot Password?"})]})})}function Op(){return(0,vp.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,vp.jsx)("h1",{children:"Profile Page"}),(0,vp.jsx)("p",{children:"This is a placeholder for the Profile feature."})]})}function xp(){return(0,vp.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,vp.jsx)("h1",{children:"Donation Page"}),(0,vp.jsx)("p",{children:"This is a placeholder for the Donation feature."})]})}function Mp(){return(0,vp.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,vp.jsx)("h1",{children:"Add Item Page"}),(0,vp.jsx)("p",{children:"This is a placeholder for adding new items."})]})}function Np(){return(0,vp.jsxs)("div",{style:{textAlign:"center",marginTop:"50px"},children:[(0,vp.jsx)("h1",{children:"Item List Page"}),(0,vp.jsx)("p",{children:"This is a placeholder for listing your items."})]})}const Lp=e=>{let{element:t}=e;const{accounts:n}=Rp();return n.length>0?t:(0,vp.jsx)(me,{to:"/login"})},qp=()=>(0,vp.jsx)(Ze,{children:(0,vp.jsxs)(we,{children:[(0,vp.jsx)(ye,{path:"/",element:(0,vp.jsx)(Lp,{element:(0,vp.jsx)(wp,{})})}),(0,vp.jsx)(ye,{path:"/home",element:(0,vp.jsx)(Lp,{element:(0,vp.jsx)(wp,{})})}),(0,vp.jsx)(ye,{path:"/login",element:(0,vp.jsx)(Pp,{})}),(0,vp.jsx)(ye,{path:"/profile",element:(0,vp.jsx)(Op,{})}),(0,vp.jsx)(ye,{path:"/donation",element:(0,vp.jsx)(xp,{})}),(0,vp.jsx)(ye,{path:"/itemadd",element:(0,vp.jsx)(Mp,{})}),(0,vp.jsx)(ye,{path:"/itemlist",element:(0,vp.jsx)(Np,{})}),(0,vp.jsx)(ye,{path:"*",element:(0,vp.jsx)(me,{to:"/"})})]})}),Up=new dp(hp);i.render((0,vp.jsx)(_p,{instance:Up,children:(0,vp.jsx)(qp,{})}),document.getElementById("root"))})();
//# sourceMappingURL=main.5027610f.js.map