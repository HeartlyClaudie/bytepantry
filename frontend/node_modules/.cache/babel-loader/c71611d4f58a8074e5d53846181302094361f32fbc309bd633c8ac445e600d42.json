{"ast":null,"code":"import React,{useEffect}from\"react\";import{BrowserRouter as Router,Routes,Route,Navigate,useNavigate}from\"react-router-dom\";import Home from\"./pages/Home\";import Login from\"./pages/Login\";import{useMsal}from\"@azure/msal-react\";import{InteractionStatus}from\"@azure/msal-browser\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{element}=_ref;const{accounts,inProgress}=useMsal();// If authentication is in progress, wait\nif(inProgress===InteractionStatus.Startup||inProgress===InteractionStatus.HandleRedirect){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});// Show a loading screen while handling login\n}// Redirect to login if not authenticated\nreturn accounts.length>0?element:/*#__PURE__*/_jsx(Navigate,{to:\"/login\"});};const LoginRedirectHandler=()=>{const{accounts}=useMsal();const navigate=useNavigate();useEffect(()=>{if(accounts.length>0){console.log(\"✅ User logged in, redirecting to home page...\");navigate(\"/home\");// Redirect user to home page after login\n}},[accounts,navigate]);return/*#__PURE__*/_jsx(\"div\",{children:\"Redirecting...\"});// Temporary UI while redirecting\n};const App=()=>{return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:/*#__PURE__*/_jsx(ProtectedRoute,{element:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/authentication/login-callback\",element:/*#__PURE__*/_jsx(LoginRedirectHandler,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})});};export default App;","map":{"version":3,"names":["React","useEffect","BrowserRouter","Router","Routes","Route","Navigate","useNavigate","Home","Login","useMsal","InteractionStatus","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","element","accounts","inProgress","Startup","HandleRedirect","children","length","to","LoginRedirectHandler","navigate","console","log","App","path"],"sources":["C:/bytepantry/frontend/src/App.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport { BrowserRouter as Router, Routes, Route, Navigate, useNavigate } from \"react-router-dom\";\r\nimport Home from \"./pages/Home\";\r\nimport Login from \"./pages/Login\";\r\nimport { useMsal } from \"@azure/msal-react\";\r\nimport { InteractionStatus } from \"@azure/msal-browser\";\r\n\r\nconst ProtectedRoute = ({ element }) => {\r\n  const { accounts, inProgress } = useMsal();\r\n\r\n  // If authentication is in progress, wait\r\n  if (inProgress === InteractionStatus.Startup || inProgress === InteractionStatus.HandleRedirect) {\r\n    return <div>Loading...</div>; // Show a loading screen while handling login\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  return accounts.length > 0 ? element : <Navigate to=\"/login\" />;\r\n};\r\n\r\nconst LoginRedirectHandler = () => {\r\n  const { accounts } = useMsal();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (accounts.length > 0) {\r\n      console.log(\"✅ User logged in, redirecting to home page...\");\r\n      navigate(\"/home\"); // Redirect user to home page after login\r\n    }\r\n  }, [accounts, navigate]);\r\n\r\n  return <div>Redirecting...</div>; // Temporary UI while redirecting\r\n};\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Routes>\r\n        <Route path=\"/\" element={<ProtectedRoute element={<Home />} />} />\r\n        <Route path=\"/home\" element={<ProtectedRoute element={<Home />} />} />\r\n        <Route path=\"/login\" element={<Login />} />\r\n        <Route path=\"/authentication/login-callback\" element={<LoginRedirectHandler />} />\r\n        <Route path=\"*\" element={<Navigate to=\"/\" />} />\r\n      </Routes>\r\n    </Router>\r\n  );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,OAASC,aAAa,GAAI,CAAAC,MAAM,CAAEC,MAAM,CAAEC,KAAK,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,kBAAkB,CAChG,MAAO,CAAAC,IAAI,KAAM,cAAc,CAC/B,MAAO,CAAAC,KAAK,KAAM,eAAe,CACjC,OAASC,OAAO,KAAQ,mBAAmB,CAC3C,OAASC,iBAAiB,KAAQ,qBAAqB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExD,KAAM,CAAAC,cAAc,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACjC,KAAM,CAAEE,QAAQ,CAAEC,UAAW,CAAC,CAAGV,OAAO,CAAC,CAAC,CAE1C;AACA,GAAIU,UAAU,GAAKT,iBAAiB,CAACU,OAAO,EAAID,UAAU,GAAKT,iBAAiB,CAACW,cAAc,CAAE,CAC/F,mBAAOT,IAAA,QAAAU,QAAA,CAAK,YAAU,CAAK,CAAC,CAAE;AAChC,CAEA;AACA,MAAO,CAAAJ,QAAQ,CAACK,MAAM,CAAG,CAAC,CAAGN,OAAO,cAAGL,IAAA,CAACP,QAAQ,EAACmB,EAAE,CAAC,QAAQ,CAAE,CAAC,CACjE,CAAC,CAED,KAAM,CAAAC,oBAAoB,CAAGA,CAAA,GAAM,CACjC,KAAM,CAAEP,QAAS,CAAC,CAAGT,OAAO,CAAC,CAAC,CAC9B,KAAM,CAAAiB,QAAQ,CAAGpB,WAAW,CAAC,CAAC,CAE9BN,SAAS,CAAC,IAAM,CACd,GAAIkB,QAAQ,CAACK,MAAM,CAAG,CAAC,CAAE,CACvBI,OAAO,CAACC,GAAG,CAAC,+CAA+C,CAAC,CAC5DF,QAAQ,CAAC,OAAO,CAAC,CAAE;AACrB,CACF,CAAC,CAAE,CAACR,QAAQ,CAAEQ,QAAQ,CAAC,CAAC,CAExB,mBAAOd,IAAA,QAAAU,QAAA,CAAK,gBAAc,CAAK,CAAC,CAAE;AACpC,CAAC,CAED,KAAM,CAAAO,GAAG,CAAGA,CAAA,GAAM,CAChB,mBACEjB,IAAA,CAACV,MAAM,EAAAoB,QAAA,cACLR,KAAA,CAACX,MAAM,EAAAmB,QAAA,eACLV,IAAA,CAACR,KAAK,EAAC0B,IAAI,CAAC,GAAG,CAACb,OAAO,cAAEL,IAAA,CAACG,cAAc,EAACE,OAAO,cAAEL,IAAA,CAACL,IAAI,GAAE,CAAE,CAAE,CAAE,CAAE,CAAC,cAClEK,IAAA,CAACR,KAAK,EAAC0B,IAAI,CAAC,OAAO,CAACb,OAAO,cAAEL,IAAA,CAACG,cAAc,EAACE,OAAO,cAAEL,IAAA,CAACL,IAAI,GAAE,CAAE,CAAE,CAAE,CAAE,CAAC,cACtEK,IAAA,CAACR,KAAK,EAAC0B,IAAI,CAAC,QAAQ,CAACb,OAAO,cAAEL,IAAA,CAACJ,KAAK,GAAE,CAAE,CAAE,CAAC,cAC3CI,IAAA,CAACR,KAAK,EAAC0B,IAAI,CAAC,gCAAgC,CAACb,OAAO,cAAEL,IAAA,CAACa,oBAAoB,GAAE,CAAE,CAAE,CAAC,cAClFb,IAAA,CAACR,KAAK,EAAC0B,IAAI,CAAC,GAAG,CAACb,OAAO,cAAEL,IAAA,CAACP,QAAQ,EAACmB,EAAE,CAAC,GAAG,CAAE,CAAE,CAAE,CAAC,EAC1C,CAAC,CACH,CAAC,CAEb,CAAC,CAED,cAAe,CAAAK,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}