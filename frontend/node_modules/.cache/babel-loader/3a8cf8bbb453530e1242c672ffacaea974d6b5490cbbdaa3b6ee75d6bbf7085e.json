{"ast":null,"code":"/*! @azure/msal-browser v4.5.0 2025-02-26 */\n'use strict';\n\nimport { BaseOperatingContext } from './BaseOperatingContext.mjs';\nimport { BridgeProxy } from '../naa/BridgeProxy.mjs';\n\n/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nclass NestedAppOperatingContext extends BaseOperatingContext {\n  constructor() {\n    super(...arguments);\n    this.bridgeProxy = undefined;\n    this.accountContext = null;\n  }\n  /**\r\n   * Return the module name.  Intended for use with import() to enable dynamic import\r\n   * of the implementation associated with this operating context\r\n   * @returns\r\n   */\n  getModuleName() {\n    return NestedAppOperatingContext.MODULE_NAME;\n  }\n  /**\r\n   * Returns the unique identifier for this operating context\r\n   * @returns string\r\n   */\n  getId() {\n    return NestedAppOperatingContext.ID;\n  }\n  /**\r\n   * Returns the current BridgeProxy\r\n   * @returns IBridgeProxy | undefined\r\n   */\n  getBridgeProxy() {\n    return this.bridgeProxy;\n  }\n  /**\r\n   * Checks whether the operating context is available.\r\n   * Confirms that the code is running a browser rather.  This is required.\r\n   * @returns Promise<boolean> indicating whether this operating context is currently available.\r\n   */\n  async initialize() {\n    try {\n      if (typeof window !== \"undefined\") {\n        if (typeof window.__initializeNestedAppAuth === \"function\") {\n          await window.__initializeNestedAppAuth();\n        }\n        const bridgeProxy = await BridgeProxy.create();\n        /*\r\n         * Because we want single sign on we expect the host app to provide the account context\r\n         * with a min set of params that can be used to identify the account\r\n         * this.account = nestedApp.getAccountByFilter(bridgeProxy.getAccountContext());\r\n         */\n        this.accountContext = bridgeProxy.getAccountContext();\n        this.bridgeProxy = bridgeProxy;\n        this.available = bridgeProxy !== undefined;\n      }\n    } catch (ex) {\n      this.logger.infoPii(`Could not initialize Nested App Auth bridge (${ex})`);\n    }\n    this.logger.info(`Nested App Auth Bridge available: ${this.available}`);\n    return this.available;\n  }\n}\n/*\r\n * TODO: Once we have determine the bundling code return here to specify the name of the bundle\r\n * containing the implementation for this operating context\r\n */\nNestedAppOperatingContext.MODULE_NAME = \"\";\n/**\r\n * Unique identifier for the operating context\r\n */\nNestedAppOperatingContext.ID = \"NestedAppOperatingContext\";\nexport { NestedAppOperatingContext };","map":{"version":3,"names":["NestedAppOperatingContext","BaseOperatingContext","constructor","bridgeProxy","undefined","accountContext","getModuleName","MODULE_NAME","getId","ID","getBridgeProxy","initialize","window","__initializeNestedAppAuth","BridgeProxy","create","getAccountContext","available","ex","logger","infoPii","info"],"sources":["C:\\bytepantry\\frontend\\node_modules\\@azure\\msal-browser\\src\\operatingcontext\\NestedAppOperatingContext.ts"],"sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\n\r\nimport { BaseOperatingContext } from \"./BaseOperatingContext.js\";\r\nimport { IBridgeProxy } from \"../naa/IBridgeProxy.js\";\r\nimport { BridgeProxy } from \"../naa/BridgeProxy.js\";\r\nimport { AccountContext } from \"../naa/BridgeAccountContext.js\";\r\n\r\ndeclare global {\r\n    interface Window {\r\n        __initializeNestedAppAuth?(): Promise<void>;\r\n    }\r\n}\r\n\r\nexport class NestedAppOperatingContext extends BaseOperatingContext {\r\n    protected bridgeProxy: IBridgeProxy | undefined = undefined;\r\n    protected accountContext: AccountContext | null = null;\r\n\r\n    /*\r\n     * TODO: Once we have determine the bundling code return here to specify the name of the bundle\r\n     * containing the implementation for this operating context\r\n     */\r\n    static readonly MODULE_NAME: string = \"\";\r\n\r\n    /**\r\n     * Unique identifier for the operating context\r\n     */\r\n    static readonly ID: string = \"NestedAppOperatingContext\";\r\n\r\n    /**\r\n     * Return the module name.  Intended for use with import() to enable dynamic import\r\n     * of the implementation associated with this operating context\r\n     * @returns\r\n     */\r\n    getModuleName(): string {\r\n        return NestedAppOperatingContext.MODULE_NAME;\r\n    }\r\n\r\n    /**\r\n     * Returns the unique identifier for this operating context\r\n     * @returns string\r\n     */\r\n    getId(): string {\r\n        return NestedAppOperatingContext.ID;\r\n    }\r\n\r\n    /**\r\n     * Returns the current BridgeProxy\r\n     * @returns IBridgeProxy | undefined\r\n     */\r\n    getBridgeProxy(): IBridgeProxy | undefined {\r\n        return this.bridgeProxy;\r\n    }\r\n\r\n    /**\r\n     * Checks whether the operating context is available.\r\n     * Confirms that the code is running a browser rather.  This is required.\r\n     * @returns Promise<boolean> indicating whether this operating context is currently available.\r\n     */\r\n    async initialize(): Promise<boolean> {\r\n        try {\r\n            if (typeof window !== \"undefined\") {\r\n                if (typeof window.__initializeNestedAppAuth === \"function\") {\r\n                    await window.__initializeNestedAppAuth();\r\n                }\r\n\r\n                const bridgeProxy: IBridgeProxy = await BridgeProxy.create();\r\n                /*\r\n                 * Because we want single sign on we expect the host app to provide the account context\r\n                 * with a min set of params that can be used to identify the account\r\n                 * this.account = nestedApp.getAccountByFilter(bridgeProxy.getAccountContext());\r\n                 */\r\n                this.accountContext = bridgeProxy.getAccountContext();\r\n                this.bridgeProxy = bridgeProxy;\r\n                this.available = bridgeProxy !== undefined;\r\n            }\r\n        } catch (ex) {\r\n            this.logger.infoPii(\r\n                `Could not initialize Nested App Auth bridge (${ex})`\r\n            );\r\n        }\r\n\r\n        this.logger.info(`Nested App Auth Bridge available: ${this.available}`);\r\n        return this.available;\r\n    }\r\n}\r\n"],"mappings":";;;;;;AAAA;;;AAGG;AAaG,MAAOA,yBAA0B,SAAQC,oBAAoB;EAAnEC,YAAA;;IACc,IAAW,CAAAC,WAAA,GAA6BC,SAAS;IACjD,IAAc,CAAAC,cAAA,GAA0B,IAAI;;EAatD;;;;AAIG;EACHC,aAAaA,CAAA;IACT,OAAON,yBAAyB,CAACO,WAAW;;EAGhD;;;AAGG;EACHC,KAAKA,CAAA;IACD,OAAOR,yBAAyB,CAACS,EAAE;;EAGvC;;;AAGG;EACHC,cAAcA,CAAA;IACV,OAAO,IAAI,CAACP,WAAW;;EAG3B;;;;AAIG;EACH,MAAMQ,UAAUA,CAAA;IACZ,IAAI;MACA,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;QAC/B,IAAI,OAAOA,MAAM,CAACC,yBAAyB,KAAK,UAAU,EAAE;UACxD,MAAMD,MAAM,CAACC,yBAAyB,EAAE;QAC3C;QAED,MAAMV,WAAW,GAAiB,MAAMW,WAAW,CAACC,MAAM,EAAE;QAC5D;;;;AAIG;QACH,IAAI,CAACV,cAAc,GAAGF,WAAW,CAACa,iBAAiB,EAAE;QACrD,IAAI,CAACb,WAAW,GAAGA,WAAW;QAC9B,IAAI,CAACc,SAAS,GAAGd,WAAW,KAAKC,SAAS;MAC7C;IACJ,EAAC,OAAOc,EAAE,EAAE;MACT,IAAI,CAACC,MAAM,CAACC,OAAO,CACf,gDAAgDF,EAAE,GAAG,CACxD;IACJ;IAED,IAAI,CAACC,MAAM,CAACE,IAAI,CAAC,qCAAqC,IAAI,CAACJ,SAAS,EAAE,CAAC;IACvE,OAAO,IAAI,CAACA,SAAS;;;AAjEzB;;;AAGG;AACajB,yBAAW,CAAAO,WAAA,GAAW,EAAE;AAExC;;AAEG;AACaP,yBAAE,CAAAS,EAAA,GAAW,2BAA2B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}